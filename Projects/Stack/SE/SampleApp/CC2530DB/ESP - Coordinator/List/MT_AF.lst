###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.20.2.41139 for 8051             13/Jun/2013  13:50:11 #
# Copyright 2004-2013 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#                                                                             #
#    Source file        =  C:\Users\PedroZ\Documents\GitHub\TG\Components\mt\ #
#                          MT_AF.c                                            #
#    Command line       =  -f C:\Users\PedroZ\Documents\GitHub\TG\Projects\St #
#                          ack\SE\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\ #
#                          f8wCoord.cfg (-DCPU32MHZ -DROOT=__near_func        #
#                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                   #
#                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8         #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f C:\Users\PedroZ\Documents\GitHub\TG\Projects\St #
#                          ack\SE\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\ #
#                          f8wConfig.cfg (-DZIGBEEPRO -DSECURE=0              #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100    #
#                          -DREJOIN_POLL_RATE=440) -f                         #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8w #
#                          ZCL.cfg (-DZCL_READ -DZCL_WRITE -DZCL_BASIC        #
#                          -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH    #
#                          -DZCL_KEY_ESTABLISHMENT_KEY_GENERATE_TIMEOUT=4     #
#                          -DZCL_KEY_ESTABLISHMENT_MAC_GENERATE_TIMEOUT=10    #
#                          -DZCL_KEY_ESTABLISHMENT_EKEY_GENERATE_TIMEOUT=10   #
#                          -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING           #
#                          -DZCL_PRICING -DZCL_MESSAGE -DZCL_TUNNELING        #
#                          -DZCL_TOU) -DZCL_DEVICE_MGMT                       #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Components\mt\ #
#                          MT_AF.c -D TC_LINKKEY_JOIN -D ZTOOL_P1 -D MT_TASK  #
#                          -D MT_APP_FUNC -D MT_SYS_FUNC -D LCD_SUPPORTED -D  #
#                          INT_HEAP_LEN=2450 -D NV_INIT -D xNV_RESTORE -D     #
#                          ZCL_REPORT -D INTER_PAN -D                         #
#                          ZDSECMGR_TC_DEVICE_MAX=16 -D TEST_CERT_DATA -lC    #
#                          "C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac #
#                          k\SE\SampleApp\CC2530DB\ESP - Coordinator\List\"   #
#                          -lA "C:\Users\PedroZ\Documents\GitHub\TG\Projects\ #
#                          Stack\SE\SampleApp\CC2530DB\ESP -                  #
#                          Coordinator\List\" --diag_suppress Pe001,Pa010 -o  #
#                          "C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac #
#                          k\SE\SampleApp\CC2530DB\ESP - Coordinator\Obj\"    #
#                          -e --no_cse --no_unroll --no_inline                #
#                          --no_code_motion --no_tbaa --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I C:\Users\PedroZ\Documents\ #
#                          GitHub\TG\Projects\Stack\SE\SampleApp\CC2530DB\    #
#                          -I C:\Users\PedroZ\Documents\GitHub\TG\Projects\St #
#                          ack\SE\SampleApp\CC2530DB\..\Source\ -I            #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\Source\ -I            #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\    #
#                          -I C:\Users\PedroZ\Documents\GitHub\TG\Projects\St #
#                          ack\SE\SampleApp\CC2530DB\..\..\..\..\..\Component #
#                          s\hal\include\ -I C:\Users\PedroZ\Documents\GitHub #
#                          \TG\Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\hal\target\CC2530EB\ -I           #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\m #
#                          ac\include\ -I C:\Users\PedroZ\Documents\GitHub\TG #
#                          \Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\high_level\ -I                   #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\m #
#                          ac\low_level\srf04\ -I C:\Users\PedroZ\Documents\G #
#                          itHub\TG\Projects\Stack\SE\SampleApp\CC2530DB\..\. #
#                          .\..\..\..\Components\mac\low_level\srf04\single_c #
#                          hip\ -I C:\Users\PedroZ\Documents\GitHub\TG\Projec #
#                          ts\Stack\SE\SampleApp\CC2530DB\..\..\..\..\..\Comp #
#                          onents\mt\ -I C:\Users\PedroZ\Documents\GitHub\TG\ #
#                          Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\..\. #
#                          .\Components\osal\include\ -I                      #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\s #
#                          ervices\saddr\ -I C:\Users\PedroZ\Documents\GitHub #
#                          \TG\Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\services\sdata\ -I                #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\s #
#                          tack\af\ -I C:\Users\PedroZ\Documents\GitHub\TG\Pr #
#                          ojects\Stack\SE\SampleApp\CC2530DB\..\..\..\..\..\ #
#                          Components\stack\nwk\ -I                           #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\s #
#                          tack\sapi\ -I C:\Users\PedroZ\Documents\GitHub\TG\ #
#                          Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\..\. #
#                          .\Components\stack\sec\ -I                         #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\s #
#                          tack\sys\ -I C:\Users\PedroZ\Documents\GitHub\TG\P #
#                          rojects\Stack\SE\SampleApp\CC2530DB\..\..\..\..\.. #
#                          \Components\stack\zcl\ -I                          #
#                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\..\..\..\..\..\Components\s #
#                          tack\zdo\ -I C:\Users\PedroZ\Documents\GitHub\TG\P #
#                          rojects\Stack\SE\SampleApp\CC2530DB\..\..\..\..\.. #
#                          \Components\zmac\ -I C:\Users\PedroZ\Documents\Git #
#                          Hub\TG\Projects\Stack\SE\SampleApp\CC2530DB\..\..\ #
#                          ..\..\..\Components\zmac\f8w\ -On                  #
#                          --require_prototypes                               #
#    List file          =  C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\ESP -                       #
#                          Coordinator\List\MT_AF.lst                         #
#    Object file        =  C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack #
#                          \SE\SampleApp\CC2530DB\ESP -                       #
#                          Coordinator\Obj\MT_AF.r51                          #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\PedroZ\Documents\GitHub\TG\Components\mt\MT_AF.c
      1          /**************************************************************************************************
      2            Filename:       MT_AF.c
      3            Revised:        $Date: 2011-05-27 16:00:27 -0700 (Fri, 27 May 2011) $
      4            Revision:       $Revision: 26145 $
      5          
      6          
      7            Description:    MonitorTest functions for the AF layer.
      8          
      9          
     10            Copyright 2007-2011 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com.
     39          
     40          **************************************************************************************************/
     41          
     42          /* ------------------------------------------------------------------------------------------------
     43           *                                          Includes
     44           * ------------------------------------------------------------------------------------------------
     45           */
     46          #include "ZComDef.h"
     47          #include "OSAL.h"
     48          #include "MT.h"
     49          #include "MT_AF.h"
     50          #include "MT_ZDO.h"
     51          #include "nwk.h"
     52          #include "OnBoard.h"
     53          #include "MT_UART.h"
     54          
     55          #if defined INTER_PAN
     56          #include "stub_aps.h"
     57          #endif
     58          
     59          /* ------------------------------------------------------------------------------------------------
     60           *                                          Constants
     61           * ------------------------------------------------------------------------------------------------
     62           */
     63          
     64          #if !defined MT_AF_EXEC_CNT
     65          #define MT_AF_EXEC_CNT  15
     66          #endif
     67          
     68          #if !defined MT_AF_EXEC_DLY
     69          #define MT_AF_EXEC_DLY  1000
     70          #endif
     71          
     72          /* ------------------------------------------------------------------------------------------------
     73           *                                           Typedefs
     74           * ------------------------------------------------------------------------------------------------
     75           */
     76          
     77          typedef struct
     78          {
     79            uint8 *data;
     80            afAddrType_t dstAddr;
     81            endPointDesc_t *epDesc;
     82            uint16 cId;
     83            uint16 dataLen;
     84            uint8 transId;
     85            uint8 txOpts;
     86            uint8 radius;
     87            uint8 tick;
     88          } mtAfDataReq_t;
     89          
     90          typedef struct _mtAfInMsgList_t
     91          {
     92            struct _mtAfInMsgList_t *next;
     93            uint8 *data;
     94            uint32 timestamp;         // Receipt timestamp from MAC.
     95            uint8 tick;
     96          } mtAfInMsgList_t;
     97          
     98          /* ------------------------------------------------------------------------------------------------
     99           *                                        Local Variables
    100           * ------------------------------------------------------------------------------------------------
    101           */
    102          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    103          mtAfInMsgList_t *pMtAfInMsgList = NULL;
   \                     pMtAfInMsgList:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    104          mtAfDataReq_t *pMtAfDataReq = NULL;
   \                     pMtAfDataReq:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    105          
    106          /* ------------------------------------------------------------------------------------------------
    107           *                                        Global Variables
    108           * ------------------------------------------------------------------------------------------------
    109           */
    110          
    111          #if defined ( MT_AF_CB_FUNC )
    112          uint16 _afCallbackSub;
    113          #endif
    114          
    115          /* ------------------------------------------------------------------------------------------------
    116           *                                        Local Functions
    117           * ------------------------------------------------------------------------------------------------
    118           */
    119          
    120          void MT_AfRegister(uint8 *pBuf);
    121          void MT_AfDataRequest(uint8 *pBuf);
    122          
    123          #if defined ( ZIGBEE_SOURCE_ROUTING )
    124          void MT_AfDataRequestSrcRtg(uint8 *pBuf);
    125          #endif
    126          
    127          #if defined INTER_PAN
    128          static void MT_AfInterPanCtl(uint8 *pBuf);
    129          #endif
    130          
    131          static void MT_AfDataRetrieve(uint8 *pBuf);
    132          static void MT_AfDataStore(uint8 *pBuf);
    133          static void MT_AfAPSF_ConfigSet(uint8 *pBuf);
    134          
    135          /**************************************************************************************************
    136           * @fn          MT_AfExec
    137           *
    138           * @brief       This function is invoked by an MT timer event.
    139           *
    140           * input parameters
    141           *
    142           * None.
    143           *
    144           * output parameters
    145           *
    146           * None.
    147           *
    148           * @return      None.
    149           **************************************************************************************************
    150           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    151          void MT_AfExec(void)
   \                     MT_AfExec:
    152          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    153            mtAfInMsgList_t *pPrev, *pItem = pMtAfInMsgList;
   \   000005   90....       MOV     DPTR,#pMtAfInMsgList
   \   000008   E0           MOVX    A,@DPTR
   \   000009   FE           MOV     R6,A
   \   00000A   A3           INC     DPTR
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   FF           MOV     R7,A
    154          
    155            while (pItem != NULL)
   \                     ??MT_AfExec_0:
   \   00000D   EE           MOV     A,R6
   \   00000E   4F           ORL     A,R7
   \   00000F   7003         JNZ     $+5
   \   000011   02....       LJMP    ??MT_AfExec_1 & 0xFFFF
    156            {
    157              if (--(pItem->tick) == 0)
   \   000014   8E82         MOV     DPL,R6
   \   000016   8F83         MOV     DPH,R7
   \   000018   A3           INC     DPTR
   \   000019   A3           INC     DPTR
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   A3           INC     DPTR
   \   00001D   A3           INC     DPTR
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   E0           MOVX    A,@DPTR
   \   000021   24FF         ADD     A,#-0x1
   \   000023   F8           MOV     R0,A
   \   000024   E8           MOV     A,R0
   \   000025   8E82         MOV     DPL,R6
   \   000027   8F83         MOV     DPH,R7
   \   000029   A3           INC     DPTR
   \   00002A   A3           INC     DPTR
   \   00002B   A3           INC     DPTR
   \   00002C   A3           INC     DPTR
   \   00002D   A3           INC     DPTR
   \   00002E   A3           INC     DPTR
   \   00002F   A3           INC     DPTR
   \   000030   A3           INC     DPTR
   \   000031   F0           MOVX    @DPTR,A
   \   000032   E8           MOV     A,R0
   \   000033   7063         JNZ     ??MT_AfExec_2
    158              {
    159                if (pMtAfInMsgList == pItem)
   \   000035   90....       MOV     DPTR,#pMtAfInMsgList
   \   000038   E0           MOVX    A,@DPTR
   \   000039   F8           MOV     R0,A
   \   00003A   A3           INC     DPTR
   \   00003B   E0           MOVX    A,@DPTR
   \   00003C   F9           MOV     R1,A
   \   00003D   EE           MOV     A,R6
   \   00003E   68           XRL     A,R0
   \   00003F   7002         JNZ     ??MT_AfExec_3
   \   000041   EF           MOV     A,R7
   \   000042   69           XRL     A,R1
   \                     ??MT_AfExec_3:
   \   000043   7026         JNZ     ??MT_AfExec_4
    160                {
    161                  pMtAfInMsgList = pItem->next;
   \   000045   8E82         MOV     DPL,R6
   \   000047   8F83         MOV     DPH,R7
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F8           MOV     R0,A
   \   00004B   A3           INC     DPTR
   \   00004C   E0           MOVX    A,@DPTR
   \   00004D   F9           MOV     R1,A
   \   00004E   90....       MOV     DPTR,#pMtAfInMsgList
   \   000051   E8           MOV     A,R0
   \   000052   F0           MOVX    @DPTR,A
   \   000053   A3           INC     DPTR
   \   000054   E9           MOV     A,R1
   \   000055   F0           MOVX    @DPTR,A
    162                  (void)osal_mem_free(pItem);
   \   000056                ; Setup parameters for call to function osal_mem_free
   \   000056   EE           MOV     A,R6
   \   000057   FA           MOV     R2,A
   \   000058   EF           MOV     A,R7
   \   000059   FB           MOV     R3,A
   \   00005A   12....       LCALL   ??osal_mem_free?relay
    163                  pItem = pMtAfInMsgList;
   \   00005D   90....       MOV     DPTR,#pMtAfInMsgList
   \   000060   E0           MOVX    A,@DPTR
   \   000061   F8           MOV     R0,A
   \   000062   A3           INC     DPTR
   \   000063   E0           MOVX    A,@DPTR
   \   000064   F9           MOV     R1,A
   \   000065   E8           MOV     A,R0
   \   000066   FE           MOV     R6,A
   \   000067   E9           MOV     A,R1
   \   000068   FF           MOV     R7,A
   \   000069   80A2         SJMP    ??MT_AfExec_0
    164                }
    165                else
    166                {
    167                  pPrev->next = pItem->next;
   \                     ??MT_AfExec_4:
   \   00006B   8E82         MOV     DPL,R6
   \   00006D   8F83         MOV     DPH,R7
   \   00006F   E0           MOVX    A,@DPTR
   \   000070   F8           MOV     R0,A
   \   000071   A3           INC     DPTR
   \   000072   E0           MOVX    A,@DPTR
   \   000073   F9           MOV     R1,A
   \   000074   85..82       MOV     DPL,?V0 + 0
   \   000077   85..83       MOV     DPH,?V0 + 1
   \   00007A   E8           MOV     A,R0
   \   00007B   F0           MOVX    @DPTR,A
   \   00007C   A3           INC     DPTR
   \   00007D   E9           MOV     A,R1
   \   00007E   F0           MOVX    @DPTR,A
    168                  (void)osal_mem_free(pItem);
   \   00007F                ; Setup parameters for call to function osal_mem_free
   \   00007F   EE           MOV     A,R6
   \   000080   FA           MOV     R2,A
   \   000081   EF           MOV     A,R7
   \   000082   FB           MOV     R3,A
   \   000083   12....       LCALL   ??osal_mem_free?relay
    169                  pItem = pPrev->next;
   \   000086   85..82       MOV     DPL,?V0 + 0
   \   000089   85..83       MOV     DPH,?V0 + 1
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   F8           MOV     R0,A
   \   00008E   A3           INC     DPTR
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   F9           MOV     R1,A
   \   000091   E8           MOV     A,R0
   \   000092   FE           MOV     R6,A
   \   000093   E9           MOV     A,R1
   \   000094   FF           MOV     R7,A
   \   000095   02....       LJMP    ??MT_AfExec_0 & 0xFFFF
    170                }
    171              }
    172              else
    173              {
    174                pPrev = pItem;
   \                     ??MT_AfExec_2:
   \   000098   8E..         MOV     ?V0 + 0,R6
   \   00009A   8F..         MOV     ?V0 + 1,R7
    175                pItem = pItem->next;
   \   00009C   8E82         MOV     DPL,R6
   \   00009E   8F83         MOV     DPH,R7
   \   0000A0   E0           MOVX    A,@DPTR
   \   0000A1   FE           MOV     R6,A
   \   0000A2   A3           INC     DPTR
   \   0000A3   E0           MOVX    A,@DPTR
   \   0000A4   FF           MOV     R7,A
   \   0000A5   02....       LJMP    ??MT_AfExec_0 & 0xFFFF
    176              }
    177            }
    178          
    179            if (pMtAfDataReq != NULL)
   \                     ??MT_AfExec_1:
   \   0000A8   90....       MOV     DPTR,#pMtAfDataReq
   \   0000AB   E0           MOVX    A,@DPTR
   \   0000AC   F8           MOV     R0,A
   \   0000AD   A3           INC     DPTR
   \   0000AE   E0           MOVX    A,@DPTR
   \   0000AF   F9           MOV     R1,A
   \   0000B0   E8           MOV     A,R0
   \   0000B1   49           ORL     A,R1
   \   0000B2   6044         JZ      ??MT_AfExec_5
    180            {
    181              if (--(pMtAfDataReq->tick) == 0)
   \   0000B4   90....       MOV     DPTR,#pMtAfDataReq
   \   0000B7   E0           MOVX    A,@DPTR
   \   0000B8   F8           MOV     R0,A
   \   0000B9   A3           INC     DPTR
   \   0000BA   E0           MOVX    A,@DPTR
   \   0000BB   C8           XCH     A,R0
   \   0000BC   2417         ADD     A,#0x17
   \   0000BE   F582         MOV     DPL,A
   \   0000C0   E8           MOV     A,R0
   \   0000C1   3400         ADDC    A,#0x0
   \   0000C3   F583         MOV     DPH,A
   \   0000C5   E0           MOVX    A,@DPTR
   \   0000C6   24FF         ADD     A,#-0x1
   \   0000C8   F8           MOV     R0,A
   \   0000C9   E8           MOV     A,R0
   \   0000CA   C0E0         PUSH    A
   \   0000CC   90....       MOV     DPTR,#pMtAfDataReq
   \   0000CF   E0           MOVX    A,@DPTR
   \   0000D0   F9           MOV     R1,A
   \   0000D1   A3           INC     DPTR
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   C9           XCH     A,R1
   \   0000D4   2417         ADD     A,#0x17
   \   0000D6   F582         MOV     DPL,A
   \   0000D8   E9           MOV     A,R1
   \   0000D9   3400         ADDC    A,#0x0
   \   0000DB   F583         MOV     DPH,A
   \   0000DD   D0E0         POP     A
   \   0000DF   F0           MOVX    @DPTR,A
   \   0000E0   E8           MOV     A,R0
   \   0000E1   7015         JNZ     ??MT_AfExec_5
    182              {
    183                (void)osal_mem_free(pMtAfDataReq);
   \   0000E3                ; Setup parameters for call to function osal_mem_free
   \   0000E3   90....       MOV     DPTR,#pMtAfDataReq
   \   0000E6   E0           MOVX    A,@DPTR
   \   0000E7   FA           MOV     R2,A
   \   0000E8   A3           INC     DPTR
   \   0000E9   E0           MOVX    A,@DPTR
   \   0000EA   FB           MOV     R3,A
   \   0000EB   12....       LCALL   ??osal_mem_free?relay
    184                pMtAfDataReq = NULL;
   \   0000EE   90....       MOV     DPTR,#pMtAfDataReq
   \   0000F1   7400         MOV     A,#0x0
   \   0000F3   F0           MOVX    @DPTR,A
   \   0000F4   A3           INC     DPTR
   \   0000F5   7400         MOV     A,#0x0
   \   0000F7   F0           MOVX    @DPTR,A
    185              }
    186            }
    187          
    188            if ((pMtAfInMsgList != NULL) || (pMtAfDataReq != NULL))
   \                     ??MT_AfExec_5:
   \   0000F8   90....       MOV     DPTR,#pMtAfInMsgList
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   F8           MOV     R0,A
   \   0000FD   A3           INC     DPTR
   \   0000FE   E0           MOVX    A,@DPTR
   \   0000FF   F9           MOV     R1,A
   \   000100   E8           MOV     A,R0
   \   000101   49           ORL     A,R1
   \   000102   700C         JNZ     ??MT_AfExec_6
   \   000104   90....       MOV     DPTR,#pMtAfDataReq
   \   000107   E0           MOVX    A,@DPTR
   \   000108   F8           MOV     R0,A
   \   000109   A3           INC     DPTR
   \   00010A   E0           MOVX    A,@DPTR
   \   00010B   F9           MOV     R1,A
   \   00010C   E8           MOV     A,R0
   \   00010D   49           ORL     A,R1
   \   00010E   6020         JZ      ??MT_AfExec_7
    189            {
    190              if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \                     ??MT_AfExec_6:
   \   000110                ; Setup parameters for call to function osal_start_timerEx
   \   000110   7CE8         MOV     R4,#-0x18
   \   000112   7D03         MOV     R5,#0x3
   \   000114   7A08         MOV     R2,#0x8
   \   000116   7B00         MOV     R3,#0x0
   \   000118   90....       MOV     DPTR,#MT_TaskID
   \   00011B   E0           MOVX    A,@DPTR
   \   00011C   F9           MOV     R1,A
   \   00011D   12....       LCALL   ??osal_start_timerEx?relay
   \   000120   E9           MOV     A,R1
   \   000121   600D         JZ      ??MT_AfExec_7
    191              {
    192                osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   000123                ; Setup parameters for call to function osal_set_event
   \   000123   7A08         MOV     R2,#0x8
   \   000125   7B00         MOV     R3,#0x0
   \   000127   90....       MOV     DPTR,#MT_TaskID
   \   00012A   E0           MOVX    A,@DPTR
   \   00012B   F9           MOV     R1,A
   \   00012C   12....       LCALL   ??osal_set_event?relay
   \   00012F   E9           MOV     A,R1
    193              }
    194            }
    195          }
   \                     ??MT_AfExec_7:
   \   000130   7F02         MOV     R7,#0x2
   \   000132   02....       LJMP    ?BANKED_LEAVE_XDATA
    196          
    197          /***************************************************************************************************
    198           * @fn      MT_AfCommandProcessing
    199           *
    200           * @brief   Process all the AF commands that are issued by test tool
    201           *
    202           * @param   pBuf - pointer to the received buffer
    203           *
    204           * @return  status
    205           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    206          uint8 MT_AfCommandProcessing(uint8 *pBuf)
   \                     MT_AfCommandProcessing:
    207          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   EA           MOV     A,R2
   \   000006   FE           MOV     R6,A
   \   000007   EB           MOV     A,R3
   \   000008   FF           MOV     R7,A
    208            uint8 status = MT_RPC_SUCCESS;
   \   000009   75..00       MOV     ?V0 + 0,#0x0
    209          
    210            switch (pBuf[MT_RPC_POS_CMD1])
   \   00000C   8E82         MOV     DPL,R6
   \   00000E   8F83         MOV     DPH,R7
   \   000010   A3           INC     DPTR
   \   000011   A3           INC     DPTR
   \   000012   E0           MOVX    A,@DPTR
   \   000013   6018         JZ      ??MT_AfCommandProcessing_0
   \   000015   14           DEC     A
   \   000016   601E         JZ      ??MT_AfCommandProcessing_1
   \   000018   14           DEC     A
   \   000019   601B         JZ      ??MT_AfCommandProcessing_1
   \   00001B   14           DEC     A
   \   00001C   6021         JZ      ??MT_AfCommandProcessing_2
   \   00001E   24F3         ADD     A,#-0xd
   \   000020   6026         JZ      ??MT_AfCommandProcessing_3
   \   000022   14           DEC     A
   \   000023   6035         JZ      ??MT_AfCommandProcessing_4
   \   000025   14           DEC     A
   \   000026   6029         JZ      ??MT_AfCommandProcessing_5
   \   000028   14           DEC     A
   \   000029   6038         JZ      ??MT_AfCommandProcessing_6
   \   00002B   803F         SJMP    ??MT_AfCommandProcessing_7
    211            {
    212              case MT_AF_REGISTER:
    213                MT_AfRegister(pBuf);
   \                     ??MT_AfCommandProcessing_0:
   \   00002D                ; Setup parameters for call to function MT_AfRegister
   \   00002D   EE           MOV     A,R6
   \   00002E   FA           MOV     R2,A
   \   00002F   EF           MOV     A,R7
   \   000030   FB           MOV     R3,A
   \   000031   12....       LCALL   ??MT_AfRegister?relay
    214                break;
   \   000034   8039         SJMP    ??MT_AfCommandProcessing_8
    215          
    216              case MT_AF_DATA_REQUEST:
    217              case MT_AF_DATA_REQUEST_EXT:
    218                MT_AfDataRequest(pBuf);
   \                     ??MT_AfCommandProcessing_1:
   \   000036                ; Setup parameters for call to function MT_AfDataRequest
   \   000036   EE           MOV     A,R6
   \   000037   FA           MOV     R2,A
   \   000038   EF           MOV     A,R7
   \   000039   FB           MOV     R3,A
   \   00003A   12....       LCALL   ??MT_AfDataRequest?relay
    219                break;
   \   00003D   8030         SJMP    ??MT_AfCommandProcessing_8
    220          
    221          #if defined ( ZIGBEE_SOURCE_ROUTING )
    222              case MT_AF_DATA_REQUEST_SRCRTG:
    223                MT_AfDataRequestSrcRtg(pBuf);
   \                     ??MT_AfCommandProcessing_2:
   \   00003F                ; Setup parameters for call to function MT_AfDataRequestSrcRtg
   \   00003F   EE           MOV     A,R6
   \   000040   FA           MOV     R2,A
   \   000041   EF           MOV     A,R7
   \   000042   FB           MOV     R3,A
   \   000043   12....       LCALL   ??MT_AfDataRequestSrcRtg?relay
    224                break;
   \   000046   8027         SJMP    ??MT_AfCommandProcessing_8
    225          #endif
    226          
    227          #if defined INTER_PAN
    228              case MT_AF_INTER_PAN_CTL:
    229                MT_AfInterPanCtl(pBuf);
   \                     ??MT_AfCommandProcessing_3:
   \   000048                ; Setup parameters for call to function MT_AfInterPanCtl
   \   000048   EE           MOV     A,R6
   \   000049   FA           MOV     R2,A
   \   00004A   EF           MOV     A,R7
   \   00004B   FB           MOV     R3,A
   \   00004C   12....       LCALL   ??MT_AfInterPanCtl?relay
    230                break;
   \   00004F   801E         SJMP    ??MT_AfCommandProcessing_8
    231          #endif
    232          
    233              case MT_AF_DATA_RETRIEVE:
    234                MT_AfDataRetrieve(pBuf);
   \                     ??MT_AfCommandProcessing_5:
   \   000051                ; Setup parameters for call to function MT_AfDataRetrieve
   \   000051   EE           MOV     A,R6
   \   000052   FA           MOV     R2,A
   \   000053   EF           MOV     A,R7
   \   000054   FB           MOV     R3,A
   \   000055   12....       LCALL   ??MT_AfDataRetrieve?relay
    235                break;
   \   000058   8015         SJMP    ??MT_AfCommandProcessing_8
    236          
    237              case MT_AF_DATA_STORE:
    238                MT_AfDataStore(pBuf);
   \                     ??MT_AfCommandProcessing_4:
   \   00005A                ; Setup parameters for call to function MT_AfDataStore
   \   00005A   EE           MOV     A,R6
   \   00005B   FA           MOV     R2,A
   \   00005C   EF           MOV     A,R7
   \   00005D   FB           MOV     R3,A
   \   00005E   12....       LCALL   ??MT_AfDataStore?relay
    239                break;
   \   000061   800C         SJMP    ??MT_AfCommandProcessing_8
    240          
    241              case MT_AF_APSF_CONFIG_SET:
    242                MT_AfAPSF_ConfigSet(pBuf);
   \                     ??MT_AfCommandProcessing_6:
   \   000063                ; Setup parameters for call to function MT_AfAPSF_ConfigSet
   \   000063   EE           MOV     A,R6
   \   000064   FA           MOV     R2,A
   \   000065   EF           MOV     A,R7
   \   000066   FB           MOV     R3,A
   \   000067   12....       LCALL   ??MT_AfAPSF_ConfigSet?relay
    243                break;
   \   00006A   8003         SJMP    ??MT_AfCommandProcessing_8
    244          
    245              default:
    246                status = MT_RPC_ERR_COMMAND_ID;
   \                     ??MT_AfCommandProcessing_7:
   \   00006C   75..02       MOV     ?V0 + 0,#0x2
    247                break;
    248            }
    249          
    250            return status;
   \                     ??MT_AfCommandProcessing_8:
   \   00006F   A9..         MOV     R1,?V0 + 0
   \   000071   7F01         MOV     R7,#0x1
   \   000073   02....       LJMP    ?BANKED_LEAVE_XDATA
    251          }
    252          
    253          /***************************************************************************************************
    254           * @fn      MT_AfRegister
    255           *
    256           * @brief   Process AF Register command
    257           *
    258           * @param   pBuf - pointer to the received buffer
    259           *
    260           * @return  none
    261           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    262          void MT_AfRegister(uint8 *pBuf)
   \                     MT_AfRegister:
    263          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 0,R2
   \   00000C   8B..         MOV     ?V0 + 1,R3
    264            uint8 cmdId;
    265            uint8 retValue = ZMemError;
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   7410         MOV     A,#0x10
   \   000016   F0           MOVX    @DPTR,A
    266            endPointDesc_t *epDesc;
    267          
    268            /* parse header */
    269            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   000017   85..82       MOV     DPL,?V0 + 0
   \   00001A   85..83       MOV     DPH,?V0 + 1
   \   00001D   A3           INC     DPTR
   \   00001E   A3           INC     DPTR
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   F5..         MOV     ?V0 + 2,A
    270            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000022   E5..         MOV     A,?V0 + 0
   \   000024   2403         ADD     A,#0x3
   \   000026   F5..         MOV     ?V0 + 0,A
   \   000028   E5..         MOV     A,?V0 + 1
   \   00002A   3400         ADDC    A,#0x0
   \   00002C   F5..         MOV     ?V0 + 1,A
    271          
    272            epDesc = (endPointDesc_t *)osal_mem_alloc(sizeof(endPointDesc_t));
   \   00002E                ; Setup parameters for call to function osal_mem_alloc
   \   00002E   7A06         MOV     R2,#0x6
   \   000030   7B00         MOV     R3,#0x0
   \   000032   12....       LCALL   ??osal_mem_alloc?relay
   \   000035   8A..         MOV     ?V0 + 4,R2
   \   000037   8B..         MOV     ?V0 + 5,R3
   \   000039   AE..         MOV     R6,?V0 + 4
   \   00003B   AF..         MOV     R7,?V0 + 5
    273            if ( epDesc )
   \   00003D   EE           MOV     A,R6
   \   00003E   4F           ORL     A,R7
   \   00003F   6047         JZ      ??MT_AfRegister_0
    274            {
    275              epDesc->task_id = &MT_TaskID;
   \   000041   8E82         MOV     DPL,R6
   \   000043   8F83         MOV     DPH,R7
   \   000045   A3           INC     DPTR
   \   000046   74..         MOV     A,#MT_TaskID & 0xff
   \   000048   F0           MOVX    @DPTR,A
   \   000049   A3           INC     DPTR
   \   00004A   74..         MOV     A,#(MT_TaskID >> 8) & 0xff
   \   00004C   F0           MOVX    @DPTR,A
    276              retValue = MT_BuildEndpointDesc( pBuf, epDesc );
   \   00004D                ; Setup parameters for call to function MT_BuildEndpointDesc
   \   00004D   EE           MOV     A,R6
   \   00004E   FC           MOV     R4,A
   \   00004F   EF           MOV     A,R7
   \   000050   FD           MOV     R5,A
   \   000051   AA..         MOV     R2,?V0 + 0
   \   000053   AB..         MOV     R3,?V0 + 1
   \   000055   12....       LCALL   ??MT_BuildEndpointDesc?relay
   \   000058   E9           MOV     A,R1
   \   000059   85..82       MOV     DPL,?XSP + 0
   \   00005C   85..83       MOV     DPH,?XSP + 1
   \   00005F   F0           MOVX    @DPTR,A
    277              if ( retValue == ZSuccess )
   \   000060   85..82       MOV     DPL,?XSP + 0
   \   000063   85..83       MOV     DPH,?XSP + 1
   \   000066   E0           MOVX    A,@DPTR
   \   000067   700F         JNZ     ??MT_AfRegister_1
    278              {
    279                retValue = afRegister( epDesc );
   \   000069                ; Setup parameters for call to function afRegister
   \   000069   EE           MOV     A,R6
   \   00006A   FA           MOV     R2,A
   \   00006B   EF           MOV     A,R7
   \   00006C   FB           MOV     R3,A
   \   00006D   12....       LCALL   ??afRegister?relay
   \   000070   E9           MOV     A,R1
   \   000071   85..82       MOV     DPL,?XSP + 0
   \   000074   85..83       MOV     DPH,?XSP + 1
   \   000077   F0           MOVX    @DPTR,A
    280              }
    281          
    282              if ( retValue != ZSuccess )
   \                     ??MT_AfRegister_1:
   \   000078   85..82       MOV     DPL,?XSP + 0
   \   00007B   85..83       MOV     DPH,?XSP + 1
   \   00007E   E0           MOVX    A,@DPTR
   \   00007F   6007         JZ      ??MT_AfRegister_0
    283              {
    284                osal_mem_free( epDesc );
   \   000081                ; Setup parameters for call to function osal_mem_free
   \   000081   EE           MOV     A,R6
   \   000082   FA           MOV     R2,A
   \   000083   EF           MOV     A,R7
   \   000084   FB           MOV     R3,A
   \   000085   12....       LCALL   ??osal_mem_free?relay
    285              }
    286            }
    287          
    288            /* Build and send back the response */
    289            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
   \                     ??MT_AfRegister_0:
   \   000088                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000088   85..82       MOV     DPL,?XSP + 0
   \   00008B   85..83       MOV     DPH,?XSP + 1
   \   00008E   AC82         MOV     R4,DPL
   \   000090   AD83         MOV     R5,DPH
   \   000092   7B01         MOV     R3,#0x1
   \   000094   AA..         MOV     R2,?V0 + 2
   \   000096   7964         MOV     R1,#0x64
   \   000098   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    290          }
   \   00009B   7401         MOV     A,#0x1
   \   00009D   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000A0   7F06         MOV     R7,#0x6
   \   0000A2   02....       LJMP    ?BANKED_LEAVE_XDATA
    291          
    292          /***************************************************************************************************
    293           * @fn      MT_AfDataRequest
    294           *
    295           * @brief   Process AF Register command
    296           *
    297           * @param   pBuf - pointer to the received buffer
    298           *
    299           * @return  none
    300           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    301          void MT_AfDataRequest(uint8 *pBuf)
   \                     MT_AfDataRequest:
    302          {
   \   000000   74E9         MOV     A,#-0x17
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 23
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    303            #define MT_AF_REQ_MSG_LEN  10
    304            #define MT_AF_REQ_MSG_EXT  10
    305          
    306            endPointDesc_t *epDesc;
    307            afAddrType_t dstAddr;
    308            cId_t cId;
    309            uint8 transId, txOpts, radius;
    310            uint8 cmd0, cmd1;
    311            uint8 retValue = ZFailure;
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   7401         MOV     A,#0x1
   \   000016   F0           MOVX    @DPTR,A
    312            uint16 dataLen, tempLen;
    313          
    314            /* Parse header */
    315            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \   000017   8E82         MOV     DPL,R6
   \   000019   8F83         MOV     DPH,R7
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F5..         MOV     ?V0 + 14,A
    316            cmd1 = pBuf[MT_RPC_POS_CMD1];
   \   00001F   8E82         MOV     DPL,R6
   \   000021   8F83         MOV     DPH,R7
   \   000023   A3           INC     DPTR
   \   000024   A3           INC     DPTR
   \   000025   E0           MOVX    A,@DPTR
   \   000026   F5..         MOV     ?V0 + 7,A
    317            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000028   EE           MOV     A,R6
   \   000029   2403         ADD     A,#0x3
   \   00002B   FE           MOV     R6,A
   \   00002C   EF           MOV     A,R7
   \   00002D   3400         ADDC    A,#0x0
   \   00002F   FF           MOV     R7,A
    318          
    319            if (cmd1 == MT_AF_DATA_REQUEST_EXT)
   \   000030   7402         MOV     A,#0x2
   \   000032   65..         XRL     A,?V0 + 7
   \   000034   6003         JZ      $+5
   \   000036   02....       LJMP    ??MT_AfDataRequest_0 & 0xFFFF
    320            {
    321              dstAddr.addrMode = (afAddrMode_t)*pBuf++;
   \   000039   8E82         MOV     DPL,R6
   \   00003B   8F83         MOV     DPH,R7
   \   00003D   E0           MOVX    A,@DPTR
   \   00003E   C0E0         PUSH    A
   \   000040   740A         MOV     A,#0xa
   \   000042   12....       LCALL   ?XSTACK_DISP0_8
   \   000045   D0E0         POP     A
   \   000047   F0           MOVX    @DPTR,A
   \   000048   8E82         MOV     DPL,R6
   \   00004A   8F83         MOV     DPH,R7
   \   00004C   A3           INC     DPTR
   \   00004D   AE82         MOV     R6,DPL
   \   00004F   AF83         MOV     R7,DPH
    322          
    323              if (dstAddr.addrMode == afAddr64Bit)
   \   000051   740A         MOV     A,#0xa
   \   000053   12....       LCALL   ?XSTACK_DISP0_8
   \   000056   E0           MOVX    A,@DPTR
   \   000057   6403         XRL     A,#0x3
   \   000059   702D         JNZ     ??MT_AfDataRequest_1
    324              {
    325                (void)osal_memcpy(dstAddr.addr.extAddr, pBuf, Z_EXTADDR_LEN);
   \   00005B                ; Setup parameters for call to function osal_memcpy
   \   00005B   8E..         MOV     ?V0 + 4,R6
   \   00005D   8F..         MOV     ?V0 + 5,R7
   \   00005F   75..00       MOV     ?V0 + 6,#0x0
   \   000062   78..         MOV     R0,#?V0 + 4
   \   000064   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000067   7C08         MOV     R4,#0x8
   \   000069   7D00         MOV     R5,#0x0
   \   00006B   7405         MOV     A,#0x5
   \   00006D   12....       LCALL   ?XSTACK_DISP0_8
   \   000070   AA82         MOV     R2,DPL
   \   000072   AB83         MOV     R3,DPH
   \   000074   12....       LCALL   ??osal_memcpy?relay
   \   000077   7403         MOV     A,#0x3
   \   000079   12....       LCALL   ?DEALLOC_XSTACK8
   \   00007C   8A..         MOV     ?V0 + 4,R2
   \   00007E   8B..         MOV     ?V0 + 5,R3
   \   000080   85..82       MOV     DPL,?V0 + 4
   \   000083   85..83       MOV     DPH,?V0 + 5
   \   000086   8024         SJMP    ??MT_AfDataRequest_2
    326              }
    327              else
    328              {
    329                dstAddr.addr.shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??MT_AfDataRequest_1:
   \   000088   8E82         MOV     DPL,R6
   \   00008A   8F83         MOV     DPH,R7
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   FA           MOV     R2,A
   \   00008E   7B00         MOV     R3,#0x0
   \   000090   8E82         MOV     DPL,R6
   \   000092   8F83         MOV     DPH,R7
   \   000094   A3           INC     DPTR
   \   000095   E0           MOVX    A,@DPTR
   \   000096   F8           MOV     R0,A
   \   000097   7900         MOV     R1,#0x0
   \   000099   E4           CLR     A
   \   00009A   C8           XCH     A,R0
   \   00009B   F9           MOV     R1,A
   \   00009C   EA           MOV     A,R2
   \   00009D   28           ADD     A,R0
   \   00009E   F8           MOV     R0,A
   \   00009F   EB           MOV     A,R3
   \   0000A0   39           ADDC    A,R1
   \   0000A1   F9           MOV     R1,A
   \   0000A2   7402         MOV     A,#0x2
   \   0000A4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A7   E8           MOV     A,R0
   \   0000A8   F0           MOVX    @DPTR,A
   \   0000A9   A3           INC     DPTR
   \   0000AA   E9           MOV     A,R1
   \   0000AB   F0           MOVX    @DPTR,A
    330              }
    331              pBuf += Z_EXTADDR_LEN;
   \                     ??MT_AfDataRequest_2:
   \   0000AC   EE           MOV     A,R6
   \   0000AD   2408         ADD     A,#0x8
   \   0000AF   FE           MOV     R6,A
   \   0000B0   EF           MOV     A,R7
   \   0000B1   3400         ADDC    A,#0x0
   \   0000B3   FF           MOV     R7,A
    332          
    333              dstAddr.endPoint = *pBuf++;
   \   0000B4   8E82         MOV     DPL,R6
   \   0000B6   8F83         MOV     DPH,R7
   \   0000B8   E0           MOVX    A,@DPTR
   \   0000B9   C0E0         PUSH    A
   \   0000BB   740B         MOV     A,#0xb
   \   0000BD   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C0   D0E0         POP     A
   \   0000C2   F0           MOVX    @DPTR,A
   \   0000C3   8E82         MOV     DPL,R6
   \   0000C5   8F83         MOV     DPH,R7
   \   0000C7   A3           INC     DPTR
   \   0000C8   AE82         MOV     R6,DPL
   \   0000CA   AF83         MOV     R7,DPH
    334              dstAddr.panId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   0000CC   8E82         MOV     DPL,R6
   \   0000CE   8F83         MOV     DPH,R7
   \   0000D0   E0           MOVX    A,@DPTR
   \   0000D1   FA           MOV     R2,A
   \   0000D2   7B00         MOV     R3,#0x0
   \   0000D4   8E82         MOV     DPL,R6
   \   0000D6   8F83         MOV     DPH,R7
   \   0000D8   A3           INC     DPTR
   \   0000D9   E0           MOVX    A,@DPTR
   \   0000DA   F8           MOV     R0,A
   \   0000DB   7900         MOV     R1,#0x0
   \   0000DD   E4           CLR     A
   \   0000DE   C8           XCH     A,R0
   \   0000DF   F9           MOV     R1,A
   \   0000E0   EA           MOV     A,R2
   \   0000E1   28           ADD     A,R0
   \   0000E2   F8           MOV     R0,A
   \   0000E3   EB           MOV     A,R3
   \   0000E4   39           ADDC    A,R1
   \   0000E5   F9           MOV     R1,A
   \   0000E6   740C         MOV     A,#0xc
   \   0000E8   12....       LCALL   ?XSTACK_DISP0_8
   \   0000EB   E8           MOV     A,R0
   \   0000EC   F0           MOVX    @DPTR,A
   \   0000ED   A3           INC     DPTR
   \   0000EE   E9           MOV     A,R1
   \   0000EF   F0           MOVX    @DPTR,A
    335              pBuf += 2;
   \   0000F0   EE           MOV     A,R6
   \   0000F1   2402         ADD     A,#0x2
   \   0000F3   FE           MOV     R6,A
   \   0000F4   EF           MOV     A,R7
   \   0000F5   3400         ADDC    A,#0x0
   \   0000F7   FF           MOV     R7,A
   \   0000F8   8058         SJMP    ??MT_AfDataRequest_3
    336            }
    337            else
    338            {
    339              /* Destination address */
    340              dstAddr.addrMode = afAddr16Bit;
   \                     ??MT_AfDataRequest_0:
   \   0000FA   740A         MOV     A,#0xa
   \   0000FC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000FF   7402         MOV     A,#0x2
   \   000101   F0           MOVX    @DPTR,A
    341              dstAddr.addr.shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   000102   8E82         MOV     DPL,R6
   \   000104   8F83         MOV     DPH,R7
   \   000106   E0           MOVX    A,@DPTR
   \   000107   FA           MOV     R2,A
   \   000108   7B00         MOV     R3,#0x0
   \   00010A   8E82         MOV     DPL,R6
   \   00010C   8F83         MOV     DPH,R7
   \   00010E   A3           INC     DPTR
   \   00010F   E0           MOVX    A,@DPTR
   \   000110   F8           MOV     R0,A
   \   000111   7900         MOV     R1,#0x0
   \   000113   E4           CLR     A
   \   000114   C8           XCH     A,R0
   \   000115   F9           MOV     R1,A
   \   000116   EA           MOV     A,R2
   \   000117   28           ADD     A,R0
   \   000118   F8           MOV     R0,A
   \   000119   EB           MOV     A,R3
   \   00011A   39           ADDC    A,R1
   \   00011B   F9           MOV     R1,A
   \   00011C   7402         MOV     A,#0x2
   \   00011E   12....       LCALL   ?XSTACK_DISP0_8
   \   000121   E8           MOV     A,R0
   \   000122   F0           MOVX    @DPTR,A
   \   000123   A3           INC     DPTR
   \   000124   E9           MOV     A,R1
   \   000125   F0           MOVX    @DPTR,A
    342              pBuf += 2;
   \   000126   EE           MOV     A,R6
   \   000127   2402         ADD     A,#0x2
   \   000129   FE           MOV     R6,A
   \   00012A   EF           MOV     A,R7
   \   00012B   3400         ADDC    A,#0x0
   \   00012D   FF           MOV     R7,A
    343          
    344              /* Destination endpoint */
    345              dstAddr.endPoint = *pBuf++;
   \   00012E   8E82         MOV     DPL,R6
   \   000130   8F83         MOV     DPH,R7
   \   000132   E0           MOVX    A,@DPTR
   \   000133   C0E0         PUSH    A
   \   000135   740B         MOV     A,#0xb
   \   000137   12....       LCALL   ?XSTACK_DISP0_8
   \   00013A   D0E0         POP     A
   \   00013C   F0           MOVX    @DPTR,A
   \   00013D   8E82         MOV     DPL,R6
   \   00013F   8F83         MOV     DPH,R7
   \   000141   A3           INC     DPTR
   \   000142   AE82         MOV     R6,DPL
   \   000144   AF83         MOV     R7,DPH
    346              dstAddr.panId = 0;
   \   000146   740C         MOV     A,#0xc
   \   000148   12....       LCALL   ?XSTACK_DISP0_8
   \   00014B   7400         MOV     A,#0x0
   \   00014D   F0           MOVX    @DPTR,A
   \   00014E   A3           INC     DPTR
   \   00014F   7400         MOV     A,#0x0
   \   000151   F0           MOVX    @DPTR,A
    347            }
    348          
    349            /* Source endpoint */
    350            epDesc = afFindEndPointDesc(*pBuf++);
   \                     ??MT_AfDataRequest_3:
   \   000152                ; Setup parameters for call to function afFindEndPointDesc
   \   000152   8E82         MOV     DPL,R6
   \   000154   8F83         MOV     DPH,R7
   \   000156   E0           MOVX    A,@DPTR
   \   000157   F9           MOV     R1,A
   \   000158   12....       LCALL   ??afFindEndPointDesc?relay
   \   00015B   8A..         MOV     ?V0 + 4,R2
   \   00015D   8B..         MOV     ?V0 + 5,R3
   \   00015F   85....       MOV     ?V0 + 12,?V0 + 4
   \   000162   85....       MOV     ?V0 + 13,?V0 + 5
   \   000165   8E82         MOV     DPL,R6
   \   000167   8F83         MOV     DPH,R7
   \   000169   A3           INC     DPTR
   \   00016A   AE82         MOV     R6,DPL
   \   00016C   AF83         MOV     R7,DPH
    351          
    352            /* ClusterId */
    353            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00016E   8E82         MOV     DPL,R6
   \   000170   8F83         MOV     DPH,R7
   \   000172   E0           MOVX    A,@DPTR
   \   000173   FA           MOV     R2,A
   \   000174   7B00         MOV     R3,#0x0
   \   000176   8E82         MOV     DPL,R6
   \   000178   8F83         MOV     DPH,R7
   \   00017A   A3           INC     DPTR
   \   00017B   E0           MOVX    A,@DPTR
   \   00017C   F8           MOV     R0,A
   \   00017D   7900         MOV     R1,#0x0
   \   00017F   E4           CLR     A
   \   000180   C8           XCH     A,R0
   \   000181   F9           MOV     R1,A
   \   000182   EA           MOV     A,R2
   \   000183   28           ADD     A,R0
   \   000184   F8           MOV     R0,A
   \   000185   EB           MOV     A,R3
   \   000186   39           ADDC    A,R1
   \   000187   F9           MOV     R1,A
   \   000188   88..         MOV     ?V0 + 2,R0
   \   00018A   89..         MOV     ?V0 + 3,R1
    354            pBuf +=2;
   \   00018C   EE           MOV     A,R6
   \   00018D   2402         ADD     A,#0x2
   \   00018F   FE           MOV     R6,A
   \   000190   EF           MOV     A,R7
   \   000191   3400         ADDC    A,#0x0
   \   000193   FF           MOV     R7,A
    355          
    356            /* TransId */
    357            transId = *pBuf++;
   \   000194   8E82         MOV     DPL,R6
   \   000196   8F83         MOV     DPH,R7
   \   000198   E0           MOVX    A,@DPTR
   \   000199   C0E0         PUSH    A
   \   00019B   7401         MOV     A,#0x1
   \   00019D   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A0   D0E0         POP     A
   \   0001A2   F0           MOVX    @DPTR,A
   \   0001A3   8E82         MOV     DPL,R6
   \   0001A5   8F83         MOV     DPH,R7
   \   0001A7   A3           INC     DPTR
   \   0001A8   AE82         MOV     R6,DPL
   \   0001AA   AF83         MOV     R7,DPH
    358          
    359            /* TxOption */
    360            txOpts = *pBuf++;
   \   0001AC   8E82         MOV     DPL,R6
   \   0001AE   8F83         MOV     DPH,R7
   \   0001B0   E0           MOVX    A,@DPTR
   \   0001B1   F5..         MOV     ?V0 + 9,A
   \   0001B3   8E82         MOV     DPL,R6
   \   0001B5   8F83         MOV     DPH,R7
   \   0001B7   A3           INC     DPTR
   \   0001B8   AE82         MOV     R6,DPL
   \   0001BA   AF83         MOV     R7,DPH
    361          
    362            /* Radius */
    363            radius = *pBuf++;
   \   0001BC   8E82         MOV     DPL,R6
   \   0001BE   8F83         MOV     DPH,R7
   \   0001C0   E0           MOVX    A,@DPTR
   \   0001C1   F5..         MOV     ?V0 + 8,A
   \   0001C3   8E82         MOV     DPL,R6
   \   0001C5   8F83         MOV     DPH,R7
   \   0001C7   A3           INC     DPTR
   \   0001C8   AE82         MOV     R6,DPL
   \   0001CA   AF83         MOV     R7,DPH
    364          
    365            /* Length */
    366            if (cmd1 == MT_AF_DATA_REQUEST_EXT)
   \   0001CC   7402         MOV     A,#0x2
   \   0001CE   65..         XRL     A,?V0 + 7
   \   0001D0   7036         JNZ     ??MT_AfDataRequest_4
    367            {
    368              dataLen = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   0001D2   8E82         MOV     DPL,R6
   \   0001D4   8F83         MOV     DPH,R7
   \   0001D6   E0           MOVX    A,@DPTR
   \   0001D7   FA           MOV     R2,A
   \   0001D8   7B00         MOV     R3,#0x0
   \   0001DA   8E82         MOV     DPL,R6
   \   0001DC   8F83         MOV     DPH,R7
   \   0001DE   A3           INC     DPTR
   \   0001DF   E0           MOVX    A,@DPTR
   \   0001E0   F8           MOV     R0,A
   \   0001E1   7900         MOV     R1,#0x0
   \   0001E3   E4           CLR     A
   \   0001E4   C8           XCH     A,R0
   \   0001E5   F9           MOV     R1,A
   \   0001E6   EA           MOV     A,R2
   \   0001E7   28           ADD     A,R0
   \   0001E8   F8           MOV     R0,A
   \   0001E9   EB           MOV     A,R3
   \   0001EA   39           ADDC    A,R1
   \   0001EB   F9           MOV     R1,A
   \   0001EC   88..         MOV     ?V0 + 0,R0
   \   0001EE   89..         MOV     ?V0 + 1,R1
    369              tempLen = dataLen + MT_AF_REQ_MSG_LEN + MT_AF_REQ_MSG_EXT;
   \   0001F0   E5..         MOV     A,?V0 + 0
   \   0001F2   2414         ADD     A,#0x14
   \   0001F4   F8           MOV     R0,A
   \   0001F5   E5..         MOV     A,?V0 + 1
   \   0001F7   3400         ADDC    A,#0x0
   \   0001F9   F9           MOV     R1,A
   \   0001FA   88..         MOV     ?V0 + 10,R0
   \   0001FC   89..         MOV     ?V0 + 11,R1
    370              pBuf += 2;
   \   0001FE   EE           MOV     A,R6
   \   0001FF   2402         ADD     A,#0x2
   \   000201   FE           MOV     R6,A
   \   000202   EF           MOV     A,R7
   \   000203   3400         ADDC    A,#0x0
   \   000205   FF           MOV     R7,A
   \   000206   8023         SJMP    ??MT_AfDataRequest_5
    371            }
    372            else
    373            {
    374              dataLen = *pBuf++;
   \                     ??MT_AfDataRequest_4:
   \   000208   8E82         MOV     DPL,R6
   \   00020A   8F83         MOV     DPH,R7
   \   00020C   E0           MOVX    A,@DPTR
   \   00020D   F8           MOV     R0,A
   \   00020E   7900         MOV     R1,#0x0
   \   000210   88..         MOV     ?V0 + 0,R0
   \   000212   89..         MOV     ?V0 + 1,R1
   \   000214   8E82         MOV     DPL,R6
   \   000216   8F83         MOV     DPH,R7
   \   000218   A3           INC     DPTR
   \   000219   AE82         MOV     R6,DPL
   \   00021B   AF83         MOV     R7,DPH
    375              tempLen = dataLen + MT_AF_REQ_MSG_LEN;
   \   00021D   E5..         MOV     A,?V0 + 0
   \   00021F   240A         ADD     A,#0xa
   \   000221   F8           MOV     R0,A
   \   000222   E5..         MOV     A,?V0 + 1
   \   000224   3400         ADDC    A,#0x0
   \   000226   F9           MOV     R1,A
   \   000227   88..         MOV     ?V0 + 10,R0
   \   000229   89..         MOV     ?V0 + 11,R1
    376            }
    377          
    378            if ( epDesc == NULL )
   \                     ??MT_AfDataRequest_5:
   \   00022B   E5..         MOV     A,?V0 + 12
   \   00022D   45..         ORL     A,?V0 + 13
   \   00022F   700C         JNZ     ??MT_AfDataRequest_6
    379            {
    380              retValue = afStatus_INVALID_PARAMETER;
   \   000231   85..82       MOV     DPL,?XSP + 0
   \   000234   85..83       MOV     DPH,?XSP + 1
   \   000237   7402         MOV     A,#0x2
   \   000239   F0           MOVX    @DPTR,A
   \   00023A   02....       LJMP    ??MT_AfDataRequest_7 & 0xFFFF
    381            }
    382            else if (tempLen > (uint16)MT_RPC_DATA_MAX)
   \                     ??MT_AfDataRequest_6:
   \   00023D   C3           CLR     C
   \   00023E   E5..         MOV     A,?V0 + 10
   \   000240   94FB         SUBB    A,#-0x5
   \   000242   E5..         MOV     A,?V0 + 11
   \   000244   9400         SUBB    A,#0x0
   \   000246   5003         JNC     $+5
   \   000248   02....       LJMP    ??MT_AfDataRequest_8 & 0xFFFF
    383            {
    384              if (pMtAfDataReq != NULL)
   \   00024B   90....       MOV     DPTR,#pMtAfDataReq
   \   00024E   E0           MOVX    A,@DPTR
   \   00024F   F8           MOV     R0,A
   \   000250   A3           INC     DPTR
   \   000251   E0           MOVX    A,@DPTR
   \   000252   F9           MOV     R1,A
   \   000253   E8           MOV     A,R0
   \   000254   49           ORL     A,R1
   \   000255   600C         JZ      ??MT_AfDataRequest_9
    385              {
    386                retValue = afStatus_INVALID_PARAMETER;
   \   000257   85..82       MOV     DPL,?XSP + 0
   \   00025A   85..83       MOV     DPH,?XSP + 1
   \   00025D   7402         MOV     A,#0x2
   \   00025F   F0           MOVX    @DPTR,A
   \   000260   02....       LJMP    ??MT_AfDataRequest_7 & 0xFFFF
    387              }
    388              else if ((pMtAfDataReq = osal_mem_alloc(sizeof(mtAfDataReq_t) + dataLen)) == NULL)
   \                     ??MT_AfDataRequest_9:
   \   000263                ; Setup parameters for call to function osal_mem_alloc
   \   000263   E5..         MOV     A,?V0 + 0
   \   000265   2418         ADD     A,#0x18
   \   000267   FA           MOV     R2,A
   \   000268   E5..         MOV     A,?V0 + 1
   \   00026A   3400         ADDC    A,#0x0
   \   00026C   FB           MOV     R3,A
   \   00026D   12....       LCALL   ??osal_mem_alloc?relay
   \   000270   8A..         MOV     ?V0 + 4,R2
   \   000272   8B..         MOV     ?V0 + 5,R3
   \   000274   A8..         MOV     R0,?V0 + 4
   \   000276   A9..         MOV     R1,?V0 + 5
   \   000278   90....       MOV     DPTR,#pMtAfDataReq
   \   00027B   E8           MOV     A,R0
   \   00027C   F0           MOVX    @DPTR,A
   \   00027D   A3           INC     DPTR
   \   00027E   E9           MOV     A,R1
   \   00027F   F0           MOVX    @DPTR,A
   \   000280   E8           MOV     A,R0
   \   000281   49           ORL     A,R1
   \   000282   700C         JNZ     ??MT_AfDataRequest_10
    389              {
    390                retValue = afStatus_MEM_FAIL;
   \   000284   85..82       MOV     DPL,?XSP + 0
   \   000287   85..83       MOV     DPH,?XSP + 1
   \   00028A   7410         MOV     A,#0x10
   \   00028C   F0           MOVX    @DPTR,A
   \   00028D   02....       LJMP    ??MT_AfDataRequest_7 & 0xFFFF
    391              }
    392              else
    393              {
    394                retValue = afStatus_SUCCESS;
   \                     ??MT_AfDataRequest_10:
   \   000290   85..82       MOV     DPL,?XSP + 0
   \   000293   85..83       MOV     DPH,?XSP + 1
   \   000296   7400         MOV     A,#0x0
   \   000298   F0           MOVX    @DPTR,A
    395          
    396                pMtAfDataReq->data = (uint8 *)(pMtAfDataReq+1);
   \   000299   90....       MOV     DPTR,#pMtAfDataReq
   \   00029C   E0           MOVX    A,@DPTR
   \   00029D   2418         ADD     A,#0x18
   \   00029F   FA           MOV     R2,A
   \   0002A0   A3           INC     DPTR
   \   0002A1   E0           MOVX    A,@DPTR
   \   0002A2   3400         ADDC    A,#0x0
   \   0002A4   FB           MOV     R3,A
   \   0002A5   90....       MOV     DPTR,#pMtAfDataReq
   \   0002A8   E0           MOVX    A,@DPTR
   \   0002A9   F8           MOV     R0,A
   \   0002AA   A3           INC     DPTR
   \   0002AB   E0           MOVX    A,@DPTR
   \   0002AC   F583         MOV     DPH,A
   \   0002AE   8882         MOV     DPL,R0
   \   0002B0   EA           MOV     A,R2
   \   0002B1   F0           MOVX    @DPTR,A
   \   0002B2   A3           INC     DPTR
   \   0002B3   EB           MOV     A,R3
   \   0002B4   F0           MOVX    @DPTR,A
    397                (void)osal_memcpy(&(pMtAfDataReq->dstAddr), &dstAddr, sizeof(afAddrType_t));
   \   0002B5                ; Setup parameters for call to function osal_memcpy
   \   0002B5   7402         MOV     A,#0x2
   \   0002B7   12....       LCALL   ?XSTACK_DISP0_8
   \   0002BA   A982         MOV     R1,DPL
   \   0002BC   AA83         MOV     R2,DPH
   \   0002BE   7B00         MOV     R3,#0x0
   \   0002C0   89..         MOV     ?V0 + 4,R1
   \   0002C2   8A..         MOV     ?V0 + 5,R2
   \   0002C4   8B..         MOV     ?V0 + 6,R3
   \   0002C6   78..         MOV     R0,#?V0 + 4
   \   0002C8   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0002CB   7C0C         MOV     R4,#0xc
   \   0002CD   7D00         MOV     R5,#0x0
   \   0002CF   90....       MOV     DPTR,#pMtAfDataReq
   \   0002D2   E0           MOVX    A,@DPTR
   \   0002D3   2402         ADD     A,#0x2
   \   0002D5   FA           MOV     R2,A
   \   0002D6   A3           INC     DPTR
   \   0002D7   E0           MOVX    A,@DPTR
   \   0002D8   3400         ADDC    A,#0x0
   \   0002DA   FB           MOV     R3,A
   \   0002DB   12....       LCALL   ??osal_memcpy?relay
   \   0002DE   7403         MOV     A,#0x3
   \   0002E0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002E3   740E         MOV     A,#0xe
   \   0002E5   12....       LCALL   ?XSTACK_DISP0_8
   \   0002E8   EA           MOV     A,R2
   \   0002E9   F0           MOVX    @DPTR,A
   \   0002EA   A3           INC     DPTR
   \   0002EB   EB           MOV     A,R3
   \   0002EC   F0           MOVX    @DPTR,A
    398                pMtAfDataReq->epDesc = epDesc;
   \   0002ED   90....       MOV     DPTR,#pMtAfDataReq
   \   0002F0   E0           MOVX    A,@DPTR
   \   0002F1   F8           MOV     R0,A
   \   0002F2   A3           INC     DPTR
   \   0002F3   E0           MOVX    A,@DPTR
   \   0002F4   C8           XCH     A,R0
   \   0002F5   240E         ADD     A,#0xe
   \   0002F7   F582         MOV     DPL,A
   \   0002F9   E8           MOV     A,R0
   \   0002FA   3400         ADDC    A,#0x0
   \   0002FC   F583         MOV     DPH,A
   \   0002FE   E5..         MOV     A,?V0 + 12
   \   000300   F0           MOVX    @DPTR,A
   \   000301   A3           INC     DPTR
   \   000302   E5..         MOV     A,?V0 + 13
   \   000304   F0           MOVX    @DPTR,A
    399                pMtAfDataReq->cId = cId;
   \   000305   90....       MOV     DPTR,#pMtAfDataReq
   \   000308   E0           MOVX    A,@DPTR
   \   000309   F8           MOV     R0,A
   \   00030A   A3           INC     DPTR
   \   00030B   E0           MOVX    A,@DPTR
   \   00030C   C8           XCH     A,R0
   \   00030D   2410         ADD     A,#0x10
   \   00030F   F582         MOV     DPL,A
   \   000311   E8           MOV     A,R0
   \   000312   3400         ADDC    A,#0x0
   \   000314   F583         MOV     DPH,A
   \   000316   E5..         MOV     A,?V0 + 2
   \   000318   F0           MOVX    @DPTR,A
   \   000319   A3           INC     DPTR
   \   00031A   E5..         MOV     A,?V0 + 3
   \   00031C   F0           MOVX    @DPTR,A
    400                pMtAfDataReq->dataLen = dataLen;
   \   00031D   90....       MOV     DPTR,#pMtAfDataReq
   \   000320   E0           MOVX    A,@DPTR
   \   000321   F8           MOV     R0,A
   \   000322   A3           INC     DPTR
   \   000323   E0           MOVX    A,@DPTR
   \   000324   C8           XCH     A,R0
   \   000325   2412         ADD     A,#0x12
   \   000327   F582         MOV     DPL,A
   \   000329   E8           MOV     A,R0
   \   00032A   3400         ADDC    A,#0x0
   \   00032C   F583         MOV     DPH,A
   \   00032E   E5..         MOV     A,?V0 + 0
   \   000330   F0           MOVX    @DPTR,A
   \   000331   A3           INC     DPTR
   \   000332   E5..         MOV     A,?V0 + 1
   \   000334   F0           MOVX    @DPTR,A
    401                pMtAfDataReq->transId = transId;
   \   000335   7401         MOV     A,#0x1
   \   000337   12....       LCALL   ?XSTACK_DISP0_8
   \   00033A   E0           MOVX    A,@DPTR
   \   00033B   C0E0         PUSH    A
   \   00033D   90....       MOV     DPTR,#pMtAfDataReq
   \   000340   E0           MOVX    A,@DPTR
   \   000341   F8           MOV     R0,A
   \   000342   A3           INC     DPTR
   \   000343   E0           MOVX    A,@DPTR
   \   000344   C8           XCH     A,R0
   \   000345   2414         ADD     A,#0x14
   \   000347   F582         MOV     DPL,A
   \   000349   E8           MOV     A,R0
   \   00034A   3400         ADDC    A,#0x0
   \   00034C   F583         MOV     DPH,A
   \   00034E   D0E0         POP     A
   \   000350   F0           MOVX    @DPTR,A
    402                pMtAfDataReq->txOpts = txOpts;
   \   000351   E5..         MOV     A,?V0 + 9
   \   000353   90....       MOV     DPTR,#pMtAfDataReq
   \   000356   E0           MOVX    A,@DPTR
   \   000357   F8           MOV     R0,A
   \   000358   A3           INC     DPTR
   \   000359   E0           MOVX    A,@DPTR
   \   00035A   C8           XCH     A,R0
   \   00035B   2415         ADD     A,#0x15
   \   00035D   F582         MOV     DPL,A
   \   00035F   E8           MOV     A,R0
   \   000360   3400         ADDC    A,#0x0
   \   000362   F583         MOV     DPH,A
   \   000364   E5..         MOV     A,?V0 + 9
   \   000366   F0           MOVX    @DPTR,A
    403                pMtAfDataReq->radius = radius;
   \   000367   E5..         MOV     A,?V0 + 8
   \   000369   90....       MOV     DPTR,#pMtAfDataReq
   \   00036C   E0           MOVX    A,@DPTR
   \   00036D   F8           MOV     R0,A
   \   00036E   A3           INC     DPTR
   \   00036F   E0           MOVX    A,@DPTR
   \   000370   C8           XCH     A,R0
   \   000371   2416         ADD     A,#0x16
   \   000373   F582         MOV     DPL,A
   \   000375   E8           MOV     A,R0
   \   000376   3400         ADDC    A,#0x0
   \   000378   F583         MOV     DPH,A
   \   00037A   E5..         MOV     A,?V0 + 8
   \   00037C   F0           MOVX    @DPTR,A
    404          
    405                // Setup to time-out the huge outgoing item if host does not MT_AF_DATA_STORE it.
    406                pMtAfDataReq->tick = MT_AF_EXEC_CNT;
   \   00037D   90....       MOV     DPTR,#pMtAfDataReq
   \   000380   E0           MOVX    A,@DPTR
   \   000381   F8           MOV     R0,A
   \   000382   A3           INC     DPTR
   \   000383   E0           MOVX    A,@DPTR
   \   000384   C8           XCH     A,R0
   \   000385   2417         ADD     A,#0x17
   \   000387   F582         MOV     DPL,A
   \   000389   E8           MOV     A,R0
   \   00038A   3400         ADDC    A,#0x0
   \   00038C   F583         MOV     DPH,A
   \   00038E   740F         MOV     A,#0xf
   \   000390   F0           MOVX    @DPTR,A
    407                if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \   000391                ; Setup parameters for call to function osal_start_timerEx
   \   000391   7CE8         MOV     R4,#-0x18
   \   000393   7D03         MOV     R5,#0x3
   \   000395   7A08         MOV     R2,#0x8
   \   000397   7B00         MOV     R3,#0x0
   \   000399   90....       MOV     DPTR,#MT_TaskID
   \   00039C   E0           MOVX    A,@DPTR
   \   00039D   F9           MOV     R1,A
   \   00039E   12....       LCALL   ??osal_start_timerEx?relay
   \   0003A1   E9           MOV     A,R1
   \   0003A2   605A         JZ      ??MT_AfDataRequest_7
    408                {
    409                  (void)osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   0003A4                ; Setup parameters for call to function osal_set_event
   \   0003A4   7A08         MOV     R2,#0x8
   \   0003A6   7B00         MOV     R3,#0x0
   \   0003A8   90....       MOV     DPTR,#MT_TaskID
   \   0003AB   E0           MOVX    A,@DPTR
   \   0003AC   F9           MOV     R1,A
   \   0003AD   12....       LCALL   ??osal_set_event?relay
   \   0003B0   E9           MOV     A,R1
   \   0003B1   804B         SJMP    ??MT_AfDataRequest_7
    410                }
    411              }
    412            }
    413            else
    414            {
    415              retValue = AF_DataRequest(&dstAddr, epDesc, cId, dataLen, pBuf, &transId, txOpts, radius);
   \                     ??MT_AfDataRequest_8:
   \   0003B3                ; Setup parameters for call to function AF_DataRequest
   \   0003B3   E5..         MOV     A,?V0 + 8
   \   0003B5   F5..         MOV     ?V0 + 4,A
   \   0003B7   78..         MOV     R0,#?V0 + 4
   \   0003B9   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0003BC   7402         MOV     A,#0x2
   \   0003BE   12....       LCALL   ?XSTACK_DISP0_8
   \   0003C1   8582..       MOV     ?V0 + 4,DPL
   \   0003C4   8583..       MOV     ?V0 + 5,DPH
   \   0003C7   78..         MOV     R0,#?V0 + 4
   \   0003C9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003CC   8E..         MOV     ?V0 + 4,R6
   \   0003CE   8F..         MOV     ?V0 + 5,R7
   \   0003D0   78..         MOV     R0,#?V0 + 4
   \   0003D2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003D5   78..         MOV     R0,#?V0 + 0
   \   0003D7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003DA   78..         MOV     R0,#?V0 + 2
   \   0003DC   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0003DF   A9..         MOV     R1,?V0 + 9
   \   0003E1   AC..         MOV     R4,?V0 + 12
   \   0003E3   AD..         MOV     R5,?V0 + 13
   \   0003E5   740B         MOV     A,#0xb
   \   0003E7   12....       LCALL   ?XSTACK_DISP0_8
   \   0003EA   AA82         MOV     R2,DPL
   \   0003EC   AB83         MOV     R3,DPH
   \   0003EE   12....       LCALL   ??AF_DataRequest?relay
   \   0003F1   7409         MOV     A,#0x9
   \   0003F3   12....       LCALL   ?DEALLOC_XSTACK8
   \   0003F6   E9           MOV     A,R1
   \   0003F7   85..82       MOV     DPL,?XSP + 0
   \   0003FA   85..83       MOV     DPH,?XSP + 1
   \   0003FD   F0           MOVX    @DPTR,A
    416            }
    417          
    418            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??MT_AfDataRequest_7:
   \   0003FE   74E0         MOV     A,#-0x20
   \   000400   55..         ANL     A,?V0 + 14
   \   000402   6420         XRL     A,#0x20
   \   000404   7013         JNZ     ??MT_AfDataRequest_11
    419            {
    420              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_AF), cmd1, 1, &retValue);
   \   000406                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000406   85..82       MOV     DPL,?XSP + 0
   \   000409   85..83       MOV     DPH,?XSP + 1
   \   00040C   AC82         MOV     R4,DPL
   \   00040E   AD83         MOV     R5,DPH
   \   000410   7B01         MOV     R3,#0x1
   \   000412   AA..         MOV     R2,?V0 + 7
   \   000414   7964         MOV     R1,#0x64
   \   000416   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    421            }
    422          }
   \                     ??MT_AfDataRequest_11:
   \   000419   7410         MOV     A,#0x10
   \   00041B   12....       LCALL   ?DEALLOC_XSTACK8
   \   00041E   7F0F         MOV     R7,#0xf
   \   000420   02....       LJMP    ?BANKED_LEAVE_XDATA
    423          
    424          #if defined ( ZIGBEE_SOURCE_ROUTING )
    425          
    426          /***************************************************************************************************
    427           * @fn      MT_AfDataRequestSrcRtg
    428           *
    429           * @brief   Process AF Register command
    430           *
    431           * @param   pBuf - pointer to the received buffer
    432           *
    433           * @return  none
    434           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    435          void MT_AfDataRequestSrcRtg(uint8 *pBuf)
   \                     MT_AfDataRequestSrcRtg:
    436          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 14
   \   000005   74F2         MOV     A,#-0xe
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    437            uint8 cmdId, dataLen = 0;
   \   00000E   75..00       MOV     ?V0 + 3,#0x0
    438            uint8 retValue = ZFailure;
   \   000011   85..82       MOV     DPL,?XSP + 0
   \   000014   85..83       MOV     DPH,?XSP + 1
   \   000017   7401         MOV     A,#0x1
   \   000019   F0           MOVX    @DPTR,A
    439            endPointDesc_t *epDesc;
    440            byte transId;
    441            afAddrType_t dstAddr;
    442            cId_t cId;
    443            byte txOpts, radius, srcEP, relayCnt;
    444            uint16 *pRelayList;
    445            uint8 i;
    446          
    447            /* parse header */
    448            cmdId = pBuf[MT_RPC_POS_CMD1];
   \   00001A   8E82         MOV     DPL,R6
   \   00001C   8F83         MOV     DPH,R7
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   E0           MOVX    A,@DPTR
   \   000021   F5..         MOV     ?V0 + 5,A
    449            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000023   EE           MOV     A,R6
   \   000024   2403         ADD     A,#0x3
   \   000026   FE           MOV     R6,A
   \   000027   EF           MOV     A,R7
   \   000028   3400         ADDC    A,#0x0
   \   00002A   FF           MOV     R7,A
    450          
    451            /* Destination address */
    452            /* Initialize the panID field to zero to avoid inter-pan */
    453            osal_memset( &dstAddr, 0, sizeof(afAddrType_t) );
   \   00002B                ; Setup parameters for call to function osal_memset
   \   00002B   7C0C         MOV     R4,#0xc
   \   00002D   7D00         MOV     R5,#0x0
   \   00002F   7900         MOV     R1,#0x0
   \   000031   7402         MOV     A,#0x2
   \   000033   12....       LCALL   ?XSTACK_DISP0_8
   \   000036   AA82         MOV     R2,DPL
   \   000038   AB83         MOV     R3,DPH
   \   00003A   12....       LCALL   ??osal_memset?relay
    454            dstAddr.addrMode = afAddr16Bit;
   \   00003D   740A         MOV     A,#0xa
   \   00003F   12....       LCALL   ?XSTACK_DISP0_8
   \   000042   7402         MOV     A,#0x2
   \   000044   F0           MOVX    @DPTR,A
    455            dstAddr.addr.shortAddr = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   000045   8E82         MOV     DPL,R6
   \   000047   8F83         MOV     DPH,R7
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   F8           MOV     R0,A
   \   00004B   7900         MOV     R1,#0x0
   \   00004D   8E82         MOV     DPL,R6
   \   00004F   8F83         MOV     DPH,R7
   \   000051   A3           INC     DPTR
   \   000052   E0           MOVX    A,@DPTR
   \   000053   FA           MOV     R2,A
   \   000054   7B00         MOV     R3,#0x0
   \   000056   E4           CLR     A
   \   000057   CA           XCH     A,R2
   \   000058   FB           MOV     R3,A
   \   000059   E8           MOV     A,R0
   \   00005A   2A           ADD     A,R2
   \   00005B   F8           MOV     R0,A
   \   00005C   E9           MOV     A,R1
   \   00005D   3B           ADDC    A,R3
   \   00005E   F9           MOV     R1,A
   \   00005F   7402         MOV     A,#0x2
   \   000061   12....       LCALL   ?XSTACK_DISP0_8
   \   000064   E8           MOV     A,R0
   \   000065   F0           MOVX    @DPTR,A
   \   000066   A3           INC     DPTR
   \   000067   E9           MOV     A,R1
   \   000068   F0           MOVX    @DPTR,A
    456            pBuf += 2;
   \   000069   EE           MOV     A,R6
   \   00006A   2402         ADD     A,#0x2
   \   00006C   FE           MOV     R6,A
   \   00006D   EF           MOV     A,R7
   \   00006E   3400         ADDC    A,#0x0
   \   000070   FF           MOV     R7,A
    457          
    458            /* Destination endpoint */
    459            dstAddr.endPoint = *pBuf++;
   \   000071   8E82         MOV     DPL,R6
   \   000073   8F83         MOV     DPH,R7
   \   000075   E0           MOVX    A,@DPTR
   \   000076   C0E0         PUSH    A
   \   000078   740B         MOV     A,#0xb
   \   00007A   12....       LCALL   ?XSTACK_DISP0_8
   \   00007D   D0E0         POP     A
   \   00007F   F0           MOVX    @DPTR,A
   \   000080   8E82         MOV     DPL,R6
   \   000082   8F83         MOV     DPH,R7
   \   000084   A3           INC     DPTR
   \   000085   AE82         MOV     R6,DPL
   \   000087   AF83         MOV     R7,DPH
    460          
    461            /* Source endpoint */
    462            srcEP = *pBuf++;
   \   000089   8E82         MOV     DPL,R6
   \   00008B   8F83         MOV     DPH,R7
   \   00008D   E0           MOVX    A,@DPTR
   \   00008E   F5..         MOV     ?V0 + 10,A
   \   000090   8E82         MOV     DPL,R6
   \   000092   8F83         MOV     DPH,R7
   \   000094   A3           INC     DPTR
   \   000095   AE82         MOV     R6,DPL
   \   000097   AF83         MOV     R7,DPH
    463            epDesc = afFindEndPointDesc( srcEP );
   \   000099                ; Setup parameters for call to function afFindEndPointDesc
   \   000099   A9..         MOV     R1,?V0 + 10
   \   00009B   12....       LCALL   ??afFindEndPointDesc?relay
   \   00009E   8A..         MOV     ?V0 + 8,R2
   \   0000A0   8B..         MOV     ?V0 + 9,R3
   \   0000A2   85....       MOV     ?V0 + 14,?V0 + 8
   \   0000A5   85....       MOV     ?V0 + 15,?V0 + 9
    464          
    465            /* ClusterId */
    466            cId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   0000A8   8E82         MOV     DPL,R6
   \   0000AA   8F83         MOV     DPH,R7
   \   0000AC   E0           MOVX    A,@DPTR
   \   0000AD   F8           MOV     R0,A
   \   0000AE   7900         MOV     R1,#0x0
   \   0000B0   8E82         MOV     DPL,R6
   \   0000B2   8F83         MOV     DPH,R7
   \   0000B4   A3           INC     DPTR
   \   0000B5   E0           MOVX    A,@DPTR
   \   0000B6   FA           MOV     R2,A
   \   0000B7   7B00         MOV     R3,#0x0
   \   0000B9   E4           CLR     A
   \   0000BA   CA           XCH     A,R2
   \   0000BB   FB           MOV     R3,A
   \   0000BC   E8           MOV     A,R0
   \   0000BD   2A           ADD     A,R2
   \   0000BE   F8           MOV     R0,A
   \   0000BF   E9           MOV     A,R1
   \   0000C0   3B           ADDC    A,R3
   \   0000C1   F9           MOV     R1,A
   \   0000C2   88..         MOV     ?V0 + 0,R0
   \   0000C4   89..         MOV     ?V0 + 1,R1
    467            pBuf +=2;
   \   0000C6   EE           MOV     A,R6
   \   0000C7   2402         ADD     A,#0x2
   \   0000C9   FE           MOV     R6,A
   \   0000CA   EF           MOV     A,R7
   \   0000CB   3400         ADDC    A,#0x0
   \   0000CD   FF           MOV     R7,A
    468          
    469            /* TransId */
    470            transId = *pBuf++;
   \   0000CE   8E82         MOV     DPL,R6
   \   0000D0   8F83         MOV     DPH,R7
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   C0E0         PUSH    A
   \   0000D5   7401         MOV     A,#0x1
   \   0000D7   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DA   D0E0         POP     A
   \   0000DC   F0           MOVX    @DPTR,A
   \   0000DD   8E82         MOV     DPL,R6
   \   0000DF   8F83         MOV     DPH,R7
   \   0000E1   A3           INC     DPTR
   \   0000E2   AE82         MOV     R6,DPL
   \   0000E4   AF83         MOV     R7,DPH
    471          
    472            /* TxOption */
    473            txOpts = *pBuf++;
   \   0000E6   8E82         MOV     DPL,R6
   \   0000E8   8F83         MOV     DPH,R7
   \   0000EA   E0           MOVX    A,@DPTR
   \   0000EB   F5..         MOV     ?V0 + 12,A
   \   0000ED   8E82         MOV     DPL,R6
   \   0000EF   8F83         MOV     DPH,R7
   \   0000F1   A3           INC     DPTR
   \   0000F2   AE82         MOV     R6,DPL
   \   0000F4   AF83         MOV     R7,DPH
    474          
    475            /* Radius */
    476            radius = *pBuf++;
   \   0000F6   8E82         MOV     DPL,R6
   \   0000F8   8F83         MOV     DPH,R7
   \   0000FA   E0           MOVX    A,@DPTR
   \   0000FB   F5..         MOV     ?V0 + 11,A
   \   0000FD   8E82         MOV     DPL,R6
   \   0000FF   8F83         MOV     DPH,R7
   \   000101   A3           INC     DPTR
   \   000102   AE82         MOV     R6,DPL
   \   000104   AF83         MOV     R7,DPH
    477          
    478            /* Source route relay count */
    479            relayCnt = *pBuf++;
   \   000106   8E82         MOV     DPL,R6
   \   000108   8F83         MOV     DPH,R7
   \   00010A   E0           MOVX    A,@DPTR
   \   00010B   F5..         MOV     ?V0 + 4,A
   \   00010D   8E82         MOV     DPL,R6
   \   00010F   8F83         MOV     DPH,R7
   \   000111   A3           INC     DPTR
   \   000112   AE82         MOV     R6,DPL
   \   000114   AF83         MOV     R7,DPH
    480          
    481            /* Convert the source route relay list */
    482            if( (pRelayList = osal_mem_alloc( relayCnt * sizeof( uint16 ))) != NULL )
   \   000116                ; Setup parameters for call to function osal_mem_alloc
   \   000116   E5..         MOV     A,?V0 + 4
   \   000118   AA..         MOV     R2,?V0 + 4
   \   00011A   7B00         MOV     R3,#0x0
   \   00011C   EA           MOV     A,R2
   \   00011D   75F002       MOV     B,#0x2
   \   000120   A4           MUL     AB
   \   000121   CA           XCH     A,R2
   \   000122   A8F0         MOV     R0,B
   \   000124   75F000       MOV     B,#0x0
   \   000127   A4           MUL     AB
   \   000128   28           ADD     A,R0
   \   000129   F8           MOV     R0,A
   \   00012A   75F002       MOV     B,#0x2
   \   00012D   EB           MOV     A,R3
   \   00012E   A4           MUL     AB
   \   00012F   28           ADD     A,R0
   \   000130   FB           MOV     R3,A
   \   000131   12....       LCALL   ??osal_mem_alloc?relay
   \   000134   8A..         MOV     ?V0 + 8,R2
   \   000136   8B..         MOV     ?V0 + 9,R3
   \   000138   A8..         MOV     R0,?V0 + 8
   \   00013A   A9..         MOV     R1,?V0 + 9
   \   00013C   88..         MOV     ?V0 + 6,R0
   \   00013E   89..         MOV     ?V0 + 7,R1
   \   000140   E8           MOV     A,R0
   \   000141   49           ORL     A,R1
   \   000142   7003         JNZ     $+5
   \   000144   02....       LJMP    ??MT_AfDataRequestSrcRtg_0 & 0xFFFF
    483            {
    484              for( i = 0; i < relayCnt; i++ )
   \   000147   75..00       MOV     ?V0 + 2,#0x0
   \                     ??MT_AfDataRequestSrcRtg_1:
   \   00014A   E5..         MOV     A,?V0 + 2
   \   00014C   C3           CLR     C
   \   00014D   95..         SUBB    A,?V0 + 4
   \   00014F   5050         JNC     ??MT_AfDataRequestSrcRtg_2
    485              {
    486                pRelayList[i]  = BUILD_UINT16( pBuf[0], pBuf[1] );
   \   000151   8E82         MOV     DPL,R6
   \   000153   8F83         MOV     DPH,R7
   \   000155   E0           MOVX    A,@DPTR
   \   000156   F8           MOV     R0,A
   \   000157   7900         MOV     R1,#0x0
   \   000159   8E82         MOV     DPL,R6
   \   00015B   8F83         MOV     DPH,R7
   \   00015D   A3           INC     DPTR
   \   00015E   E0           MOVX    A,@DPTR
   \   00015F   FA           MOV     R2,A
   \   000160   7B00         MOV     R3,#0x0
   \   000162   E4           CLR     A
   \   000163   CA           XCH     A,R2
   \   000164   FB           MOV     R3,A
   \   000165   E8           MOV     A,R0
   \   000166   2A           ADD     A,R2
   \   000167   F8           MOV     R0,A
   \   000168   E9           MOV     A,R1
   \   000169   3B           ADDC    A,R3
   \   00016A   F9           MOV     R1,A
   \   00016B   E5..         MOV     A,?V0 + 2
   \   00016D   AA..         MOV     R2,?V0 + 2
   \   00016F   7B00         MOV     R3,#0x0
   \   000171   EA           MOV     A,R2
   \   000172   75F002       MOV     B,#0x2
   \   000175   A4           MUL     AB
   \   000176   CA           XCH     A,R2
   \   000177   ACF0         MOV     R4,B
   \   000179   75F000       MOV     B,#0x0
   \   00017C   A4           MUL     AB
   \   00017D   2C           ADD     A,R4
   \   00017E   FC           MOV     R4,A
   \   00017F   75F002       MOV     B,#0x2
   \   000182   EB           MOV     A,R3
   \   000183   A4           MUL     AB
   \   000184   2C           ADD     A,R4
   \   000185   FB           MOV     R3,A
   \   000186   E5..         MOV     A,?V0 + 6
   \   000188   2A           ADD     A,R2
   \   000189   F582         MOV     DPL,A
   \   00018B   E5..         MOV     A,?V0 + 7
   \   00018D   3B           ADDC    A,R3
   \   00018E   F583         MOV     DPH,A
   \   000190   E8           MOV     A,R0
   \   000191   F0           MOVX    @DPTR,A
   \   000192   A3           INC     DPTR
   \   000193   E9           MOV     A,R1
   \   000194   F0           MOVX    @DPTR,A
    487                pBuf += 2;
   \   000195   EE           MOV     A,R6
   \   000196   2402         ADD     A,#0x2
   \   000198   FE           MOV     R6,A
   \   000199   EF           MOV     A,R7
   \   00019A   3400         ADDC    A,#0x0
   \   00019C   FF           MOV     R7,A
    488              }
   \   00019D   05..         INC     ?V0 + 2
   \   00019F   80A9         SJMP    ??MT_AfDataRequestSrcRtg_1
    489          
    490              /* Data payload Length */
    491              dataLen = *pBuf++;
   \                     ??MT_AfDataRequestSrcRtg_2:
   \   0001A1   8E82         MOV     DPL,R6
   \   0001A3   8F83         MOV     DPH,R7
   \   0001A5   E0           MOVX    A,@DPTR
   \   0001A6   F5..         MOV     ?V0 + 3,A
   \   0001A8   8E82         MOV     DPL,R6
   \   0001AA   8F83         MOV     DPH,R7
   \   0001AC   A3           INC     DPTR
   \   0001AD   AE82         MOV     R6,DPL
   \   0001AF   AF83         MOV     R7,DPH
    492          
    493              if ( epDesc == NULL )
   \   0001B1   E5..         MOV     A,?V0 + 14
   \   0001B3   45..         ORL     A,?V0 + 15
   \   0001B5   700B         JNZ     ??MT_AfDataRequestSrcRtg_3
    494              {
    495                retValue = afStatus_INVALID_PARAMETER;
   \   0001B7   85..82       MOV     DPL,?XSP + 0
   \   0001BA   85..83       MOV     DPH,?XSP + 1
   \   0001BD   7402         MOV     A,#0x2
   \   0001BF   F0           MOVX    @DPTR,A
   \   0001C0   805F         SJMP    ??MT_AfDataRequestSrcRtg_4
    496              }
    497              else
    498              {
    499                retValue = AF_DataRequestSrcRtg( &dstAddr, epDesc, cId, dataLen, pBuf,
    500                                               &transId, txOpts, radius, relayCnt, pRelayList );
   \                     ??MT_AfDataRequestSrcRtg_3:
   \   0001C2                ; Setup parameters for call to function AF_DataRequestSrcRtg
   \   0001C2   78..         MOV     R0,#?V0 + 6
   \   0001C4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C7   E5..         MOV     A,?V0 + 4
   \   0001C9   F5..         MOV     ?V0 + 8,A
   \   0001CB   78..         MOV     R0,#?V0 + 8
   \   0001CD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001D0   E5..         MOV     A,?V0 + 11
   \   0001D2   F5..         MOV     ?V0 + 8,A
   \   0001D4   78..         MOV     R0,#?V0 + 8
   \   0001D6   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001D9   7405         MOV     A,#0x5
   \   0001DB   12....       LCALL   ?XSTACK_DISP0_8
   \   0001DE   8582..       MOV     ?V0 + 8,DPL
   \   0001E1   8583..       MOV     ?V0 + 9,DPH
   \   0001E4   78..         MOV     R0,#?V0 + 8
   \   0001E6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001E9   8E..         MOV     ?V0 + 8,R6
   \   0001EB   8F..         MOV     ?V0 + 9,R7
   \   0001ED   78..         MOV     R0,#?V0 + 8
   \   0001EF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001F2   85....       MOV     ?V0 + 8,?V0 + 3
   \   0001F5   75..00       MOV     ?V0 + 9,#0x0
   \   0001F8   78..         MOV     R0,#?V0 + 8
   \   0001FA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001FD   78..         MOV     R0,#?V0 + 0
   \   0001FF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000202   A9..         MOV     R1,?V0 + 12
   \   000204   AC..         MOV     R4,?V0 + 14
   \   000206   AD..         MOV     R5,?V0 + 15
   \   000208   740E         MOV     A,#0xe
   \   00020A   12....       LCALL   ?XSTACK_DISP0_8
   \   00020D   AA82         MOV     R2,DPL
   \   00020F   AB83         MOV     R3,DPH
   \   000211   12....       LCALL   ??AF_DataRequestSrcRtg?relay
   \   000214   740C         MOV     A,#0xc
   \   000216   12....       LCALL   ?DEALLOC_XSTACK8
   \   000219   E9           MOV     A,R1
   \   00021A   85..82       MOV     DPL,?XSP + 0
   \   00021D   85..83       MOV     DPH,?XSP + 1
   \   000220   F0           MOVX    @DPTR,A
    501              }
    502          
    503              /* Free the memory allocated */
    504              osal_mem_free( pRelayList );
   \                     ??MT_AfDataRequestSrcRtg_4:
   \   000221                ; Setup parameters for call to function osal_mem_free
   \   000221   AA..         MOV     R2,?V0 + 6
   \   000223   AB..         MOV     R3,?V0 + 7
   \   000225   12....       LCALL   ??osal_mem_free?relay
   \   000228   8009         SJMP    ??MT_AfDataRequestSrcRtg_5
    505            }
    506            else
    507            {
    508              retValue = afStatus_MEM_FAIL;
   \                     ??MT_AfDataRequestSrcRtg_0:
   \   00022A   85..82       MOV     DPL,?XSP + 0
   \   00022D   85..83       MOV     DPH,?XSP + 1
   \   000230   7410         MOV     A,#0x10
   \   000232   F0           MOVX    @DPTR,A
    509            }
    510          
    511          
    512            /* Build and send back the response */
    513            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
   \                     ??MT_AfDataRequestSrcRtg_5:
   \   000233                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000233   85..82       MOV     DPL,?XSP + 0
   \   000236   85..83       MOV     DPH,?XSP + 1
   \   000239   AC82         MOV     R4,DPL
   \   00023B   AD83         MOV     R5,DPH
   \   00023D   7B01         MOV     R3,#0x1
   \   00023F   AA..         MOV     R2,?V0 + 5
   \   000241   7964         MOV     R1,#0x64
   \   000243   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    514          }
   \   000246   740E         MOV     A,#0xe
   \   000248   12....       LCALL   ?DEALLOC_XSTACK8
   \   00024B   7F10         MOV     R7,#0x10
   \   00024D   02....       LJMP    ?BANKED_LEAVE_XDATA
    515          #endif
    516          
    517          #if defined INTER_PAN
    518          /***************************************************************************************************
    519           * @fn      MT_AfInterPanCtl
    520           *
    521           * @brief   Process the AF Inter Pan control command.
    522           *
    523           * @param   pBuf - pointer to the received buffer
    524           *
    525           * @return  none
    526           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    527          static void MT_AfInterPanCtl(uint8 *pBuf)
   \                     MT_AfInterPanCtl:
    528          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    529            uint8 cmd, rtrn;
    530            uint16 panId;
    531            endPointDesc_t *pEP;
    532          
    533            cmd = pBuf[MT_RPC_POS_CMD1];
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   E0           MOVX    A,@DPTR
   \   000015   F5..         MOV     ?V0 + 2,A
    534            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000017   EE           MOV     A,R6
   \   000018   2403         ADD     A,#0x3
   \   00001A   FE           MOV     R6,A
   \   00001B   EF           MOV     A,R7
   \   00001C   3400         ADDC    A,#0x0
   \   00001E   FF           MOV     R7,A
    535          
    536            switch (*pBuf++)  // Inter-pan request parameter.
   \   00001F   EE           MOV     A,R6
   \   000020   F8           MOV     R0,A
   \   000021   EF           MOV     A,R7
   \   000022   F9           MOV     R1,A
   \   000023   8882         MOV     DPL,R0
   \   000025   8983         MOV     DPH,R1
   \   000027   A3           INC     DPTR
   \   000028   AE82         MOV     R6,DPL
   \   00002A   AF83         MOV     R7,DPH
   \   00002C   8882         MOV     DPL,R0
   \   00002E   8983         MOV     DPH,R1
   \   000030   E0           MOVX    A,@DPTR
   \   000031   600C         JZ      ??MT_AfInterPanCtl_0
   \   000033   14           DEC     A
   \   000034   6017         JZ      ??MT_AfInterPanCtl_1
   \   000036   14           DEC     A
   \   000037   6028         JZ      ??MT_AfInterPanCtl_2
   \   000039   14           DEC     A
   \   00003A   605B         JZ      ??MT_AfInterPanCtl_3
   \   00003C   02....       LJMP    ??MT_AfInterPanCtl_4 & 0xFFFF
    537            {
    538            case InterPanClr:
    539              rtrn = StubAPS_SetIntraPanChannel();           // Switch channel back to the NIB channel.
   \                     ??MT_AfInterPanCtl_0:
   \   00003F                ; Setup parameters for call to function StubAPS_SetIntraPanChannel
   \   00003F   12....       LCALL   ??StubAPS_SetIntraPanChannel?relay
   \   000042   E9           MOV     A,R1
   \   000043   85..82       MOV     DPL,?XSP + 0
   \   000046   85..83       MOV     DPH,?XSP + 1
   \   000049   F0           MOVX    @DPTR,A
    540              break;
   \   00004A   02....       LJMP    ??MT_AfInterPanCtl_5 & 0xFFFF
    541          
    542            case InterPanSet:
    543              rtrn = StubAPS_SetInterPanChannel(*pBuf);      // Set channel for inter-pan communication.
   \                     ??MT_AfInterPanCtl_1:
   \   00004D                ; Setup parameters for call to function StubAPS_SetInterPanChannel
   \   00004D   8E82         MOV     DPL,R6
   \   00004F   8F83         MOV     DPH,R7
   \   000051   E0           MOVX    A,@DPTR
   \   000052   F9           MOV     R1,A
   \   000053   12....       LCALL   ??StubAPS_SetInterPanChannel?relay
   \   000056   E9           MOV     A,R1
   \   000057   85..82       MOV     DPL,?XSP + 0
   \   00005A   85..83       MOV     DPH,?XSP + 1
   \   00005D   F0           MOVX    @DPTR,A
    544              break;
   \   00005E   02....       LJMP    ??MT_AfInterPanCtl_5 & 0xFFFF
    545          
    546            case InterPanReg:
    547              if ((pEP = afFindEndPointDesc(*pBuf)))
   \                     ??MT_AfInterPanCtl_2:
   \   000061                ; Setup parameters for call to function afFindEndPointDesc
   \   000061   8E82         MOV     DPL,R6
   \   000063   8F83         MOV     DPH,R7
   \   000065   E0           MOVX    A,@DPTR
   \   000066   F9           MOV     R1,A
   \   000067   12....       LCALL   ??afFindEndPointDesc?relay
   \   00006A   8A..         MOV     ?V0 + 6,R2
   \   00006C   8B..         MOV     ?V0 + 7,R3
   \   00006E   A8..         MOV     R0,?V0 + 6
   \   000070   A9..         MOV     R1,?V0 + 7
   \   000072   88..         MOV     ?V0 + 4,R0
   \   000074   89..         MOV     ?V0 + 5,R1
   \   000076   E8           MOV     A,R0
   \   000077   49           ORL     A,R1
   \   000078   6012         JZ      ??MT_AfInterPanCtl_6
    548              {
    549                StubAPS_RegisterApp(pEP);
   \   00007A                ; Setup parameters for call to function StubAPS_RegisterApp
   \   00007A   AA..         MOV     R2,?V0 + 4
   \   00007C   AB..         MOV     R3,?V0 + 5
   \   00007E   12....       LCALL   ??StubAPS_RegisterApp?relay
    550                rtrn = SUCCESS;
   \   000081   85..82       MOV     DPL,?XSP + 0
   \   000084   85..83       MOV     DPH,?XSP + 1
   \   000087   7400         MOV     A,#0x0
   \   000089   F0           MOVX    @DPTR,A
   \   00008A   8065         SJMP    ??MT_AfInterPanCtl_5
    551              }
    552              else
    553              {
    554                rtrn = FAILURE;
   \                     ??MT_AfInterPanCtl_6:
   \   00008C   85..82       MOV     DPL,?XSP + 0
   \   00008F   85..83       MOV     DPH,?XSP + 1
   \   000092   7401         MOV     A,#0x1
   \   000094   F0           MOVX    @DPTR,A
    555              }
    556              break;
   \   000095   805A         SJMP    ??MT_AfInterPanCtl_5
    557          
    558            case InterPanChk:
    559              panId = BUILD_UINT16(pBuf[0], pBuf[1]);
   \                     ??MT_AfInterPanCtl_3:
   \   000097   8E82         MOV     DPL,R6
   \   000099   8F83         MOV     DPH,R7
   \   00009B   E0           MOVX    A,@DPTR
   \   00009C   FA           MOV     R2,A
   \   00009D   7B00         MOV     R3,#0x0
   \   00009F   8E82         MOV     DPL,R6
   \   0000A1   8F83         MOV     DPH,R7
   \   0000A3   A3           INC     DPTR
   \   0000A4   E0           MOVX    A,@DPTR
   \   0000A5   F8           MOV     R0,A
   \   0000A6   7900         MOV     R1,#0x0
   \   0000A8   E4           CLR     A
   \   0000A9   C8           XCH     A,R0
   \   0000AA   F9           MOV     R1,A
   \   0000AB   EA           MOV     A,R2
   \   0000AC   28           ADD     A,R0
   \   0000AD   F8           MOV     R0,A
   \   0000AE   EB           MOV     A,R3
   \   0000AF   39           ADDC    A,R1
   \   0000B0   F9           MOV     R1,A
   \   0000B1   88..         MOV     ?V0 + 0,R0
   \   0000B3   89..         MOV     ?V0 + 1,R1
    560              rtrn = (StubAPS_InterPan(panId, pBuf[2])) ? ZSuccess : ZFailure;
   \   0000B5                ; Setup parameters for call to function StubAPS_InterPan
   \   0000B5   8E82         MOV     DPL,R6
   \   0000B7   8F83         MOV     DPH,R7
   \   0000B9   A3           INC     DPTR
   \   0000BA   A3           INC     DPTR
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F9           MOV     R1,A
   \   0000BD   AA..         MOV     R2,?V0 + 0
   \   0000BF   AB..         MOV     R3,?V0 + 1
   \   0000C1   12....       LCALL   ??StubAPS_InterPan?relay
   \   0000C4   E9           MOV     A,R1
   \   0000C5   600A         JZ      ??MT_AfInterPanCtl_7
   \   0000C7   7401         MOV     A,#0x1
   \   0000C9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CC   7400         MOV     A,#0x0
   \   0000CE   F0           MOVX    @DPTR,A
   \   0000CF   8008         SJMP    ??MT_AfInterPanCtl_8
   \                     ??MT_AfInterPanCtl_7:
   \   0000D1   7401         MOV     A,#0x1
   \   0000D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D6   7401         MOV     A,#0x1
   \   0000D8   F0           MOVX    @DPTR,A
   \                     ??MT_AfInterPanCtl_8:
   \   0000D9   7401         MOV     A,#0x1
   \   0000DB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DE   E0           MOVX    A,@DPTR
   \   0000DF   85..82       MOV     DPL,?XSP + 0
   \   0000E2   85..83       MOV     DPH,?XSP + 1
   \   0000E5   F0           MOVX    @DPTR,A
    561              break;
   \   0000E6   8009         SJMP    ??MT_AfInterPanCtl_5
    562          
    563            default:
    564              rtrn = afStatus_INVALID_PARAMETER;
   \                     ??MT_AfInterPanCtl_4:
   \   0000E8   85..82       MOV     DPL,?XSP + 0
   \   0000EB   85..83       MOV     DPH,?XSP + 1
   \   0000EE   7402         MOV     A,#0x2
   \   0000F0   F0           MOVX    @DPTR,A
    565              break;
    566            }
    567          
    568            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmd, 1, &rtrn);
   \                     ??MT_AfInterPanCtl_5:
   \   0000F1                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000F1   85..82       MOV     DPL,?XSP + 0
   \   0000F4   85..83       MOV     DPH,?XSP + 1
   \   0000F7   AC82         MOV     R4,DPL
   \   0000F9   AD83         MOV     R5,DPH
   \   0000FB   7B01         MOV     R3,#0x1
   \   0000FD   AA..         MOV     R2,?V0 + 2
   \   0000FF   7964         MOV     R1,#0x64
   \   000101   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    569          }
   \   000104   7402         MOV     A,#0x2
   \   000106   12....       LCALL   ?DEALLOC_XSTACK8
   \   000109   7F08         MOV     R7,#0x8
   \   00010B   02....       LJMP    ?BANKED_LEAVE_XDATA
    570          #endif
    571          
    572          /***************************************************************************************************
    573           * @fn      MT_AfDataConfirm
    574           *
    575           * @brief   Process
    576           *
    577           * @param   pBuf - pointer to the received buffer
    578           *
    579           * @return  none
    580           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    581          void MT_AfDataConfirm(afDataConfirm_t *pMsg)
   \                     MT_AfDataConfirm:
    582          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    583            uint8 retArray[3];
    584          
    585            retArray[0] = pMsg->hdr.status;
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   E0           MOVX    A,@DPTR
   \   000014   85..82       MOV     DPL,?XSP + 0
   \   000017   85..83       MOV     DPH,?XSP + 1
   \   00001A   F0           MOVX    @DPTR,A
    586            retArray[1] = pMsg->endpoint;
   \   00001B   8E82         MOV     DPL,R6
   \   00001D   8F83         MOV     DPH,R7
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   E0           MOVX    A,@DPTR
   \   000022   C0E0         PUSH    A
   \   000024   7401         MOV     A,#0x1
   \   000026   12....       LCALL   ?XSTACK_DISP0_8
   \   000029   D0E0         POP     A
   \   00002B   F0           MOVX    @DPTR,A
    587            retArray[2] = pMsg->transID;
   \   00002C   8E82         MOV     DPL,R6
   \   00002E   8F83         MOV     DPH,R7
   \   000030   A3           INC     DPTR
   \   000031   A3           INC     DPTR
   \   000032   A3           INC     DPTR
   \   000033   E0           MOVX    A,@DPTR
   \   000034   C0E0         PUSH    A
   \   000036   7402         MOV     A,#0x2
   \   000038   12....       LCALL   ?XSTACK_DISP0_8
   \   00003B   D0E0         POP     A
   \   00003D   F0           MOVX    @DPTR,A
    588          
    589            /* Build and send back the response */
    590            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_AF), MT_AF_DATA_CONFIRM, 3, retArray);
   \   00003E                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00003E   85..82       MOV     DPL,?XSP + 0
   \   000041   85..83       MOV     DPH,?XSP + 1
   \   000044   AC82         MOV     R4,DPL
   \   000046   AD83         MOV     R5,DPH
   \   000048   7B03         MOV     R3,#0x3
   \   00004A   7A80         MOV     R2,#-0x80
   \   00004C   7944         MOV     R1,#0x44
   \   00004E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    591          }
   \   000051   7403         MOV     A,#0x3
   \   000053   12....       LCALL   ?DEALLOC_XSTACK8
   \   000056   7F01         MOV     R7,#0x1
   \   000058   02....       LJMP    ?BANKED_LEAVE_XDATA
    592          
    593          /***************************************************************************************************
    594           * @fn          MT_AfIncomingMsg
    595           *
    596           * @brief       Process the callback subscription for AF Incoming data.
    597           *
    598           * @param       pkt - Incoming AF data.
    599           *
    600           * @return      none
    601           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    602          void MT_AfIncomingMsg(afIncomingMSGPacket_t *pMsg)
   \                     MT_AfIncomingMsg:
    603          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 8,R2
   \   00000C   8B..         MOV     ?V0 + 9,R3
    604            #define MT_AF_INC_MSG_LEN  17
    605            #define MT_AF_INC_MSG_EXT  10
    606          
    607            uint16 dataLen = pMsg->cmd.DataLength;  // Length of the data section in the response packet.
   \   00000E   E5..         MOV     A,?V0 + 8
   \   000010   2420         ADD     A,#0x20
   \   000012   F582         MOV     DPL,A
   \   000014   E5..         MOV     A,?V0 + 9
   \   000016   3400         ADDC    A,#0x0
   \   000018   F583         MOV     DPH,A
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   F5..         MOV     ?V0 + 2,A
   \   00001D   A3           INC     DPTR
   \   00001E   E0           MOVX    A,@DPTR
   \   00001F   F5..         MOV     ?V0 + 3,A
    608            uint16 respLen = MT_AF_INC_MSG_LEN + dataLen;
   \   000021   E5..         MOV     A,?V0 + 2
   \   000023   2411         ADD     A,#0x11
   \   000025   F5..         MOV     ?V0 + 0,A
   \   000027   E5..         MOV     A,?V0 + 3
   \   000029   3400         ADDC    A,#0x0
   \   00002B   F5..         MOV     ?V0 + 1,A
    609            uint8 cmd = MT_AF_INCOMING_MSG;
   \   00002D   75..81       MOV     ?V0 + 12,#-0x7f
    610            uint8 *pRsp, *pTmp;
    611            mtAfInMsgList_t *pItem = NULL;
   \   000030   75..00       MOV     ?V0 + 10,#0x0
   \   000033   75..00       MOV     ?V0 + 11,#0x0
    612          
    613          #if defined INTER_PAN
    614            if (StubAPS_InterPan(pMsg->srcAddr.panId, pMsg->srcAddr.endPoint))
   \   000036                ; Setup parameters for call to function StubAPS_InterPan
   \   000036   E5..         MOV     A,?V0 + 8
   \   000038   240F         ADD     A,#0xf
   \   00003A   F582         MOV     DPL,A
   \   00003C   E5..         MOV     A,?V0 + 9
   \   00003E   3400         ADDC    A,#0x0
   \   000040   F583         MOV     DPH,A
   \   000042   E0           MOVX    A,@DPTR
   \   000043   F9           MOV     R1,A
   \   000044   E5..         MOV     A,?V0 + 8
   \   000046   2410         ADD     A,#0x10
   \   000048   F582         MOV     DPL,A
   \   00004A   E5..         MOV     A,?V0 + 9
   \   00004C   3400         ADDC    A,#0x0
   \   00004E   F583         MOV     DPH,A
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FA           MOV     R2,A
   \   000052   A3           INC     DPTR
   \   000053   E0           MOVX    A,@DPTR
   \   000054   FB           MOV     R3,A
   \   000055   12....       LCALL   ??StubAPS_InterPan?relay
   \   000058   E9           MOV     A,R1
   \   000059   6005         JZ      ??MT_AfIncomingMsg_0
    615            {
    616              cmd = MT_AF_INCOMING_MSG_EXT;
   \   00005B   75..82       MOV     ?V0 + 12,#-0x7e
   \   00005E   801F         SJMP    ??MT_AfIncomingMsg_1
    617            }
    618            else
    619          #endif
    620            if ((pMsg->srcAddr.addrMode == afAddr64Bit) ||
    621                (respLen > (uint16)(MT_RPC_DATA_MAX - MT_AF_INC_MSG_EXT)))
   \                     ??MT_AfIncomingMsg_0:
   \   000060   E5..         MOV     A,?V0 + 8
   \   000062   240E         ADD     A,#0xe
   \   000064   F582         MOV     DPL,A
   \   000066   E5..         MOV     A,?V0 + 9
   \   000068   3400         ADDC    A,#0x0
   \   00006A   F583         MOV     DPH,A
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   6403         XRL     A,#0x3
   \   00006F   600B         JZ      ??MT_AfIncomingMsg_2
   \   000071   C3           CLR     C
   \   000072   E5..         MOV     A,?V0 + 0
   \   000074   94F1         SUBB    A,#-0xf
   \   000076   E5..         MOV     A,?V0 + 1
   \   000078   9400         SUBB    A,#0x0
   \   00007A   4003         JC      ??MT_AfIncomingMsg_1
    622            {
    623              cmd = MT_AF_INCOMING_MSG_EXT;
   \                     ??MT_AfIncomingMsg_2:
   \   00007C   75..82       MOV     ?V0 + 12,#-0x7e
    624            }
    625          
    626            if (cmd == MT_AF_INCOMING_MSG_EXT)
   \                     ??MT_AfIncomingMsg_1:
   \   00007F   7482         MOV     A,#-0x7e
   \   000081   65..         XRL     A,?V0 + 12
   \   000083   700C         JNZ     ??MT_AfIncomingMsg_3
    627            {
    628              respLen += MT_AF_INC_MSG_EXT;
   \   000085   E5..         MOV     A,?V0 + 0
   \   000087   240A         ADD     A,#0xa
   \   000089   F5..         MOV     ?V0 + 0,A
   \   00008B   E5..         MOV     A,?V0 + 1
   \   00008D   3400         ADDC    A,#0x0
   \   00008F   F5..         MOV     ?V0 + 1,A
    629            }
    630          
    631            if (respLen > (uint16)MT_RPC_DATA_MAX)
   \                     ??MT_AfIncomingMsg_3:
   \   000091   C3           CLR     C
   \   000092   E5..         MOV     A,?V0 + 0
   \   000094   94FB         SUBB    A,#-0x5
   \   000096   E5..         MOV     A,?V0 + 1
   \   000098   9400         SUBB    A,#0x0
   \   00009A   4044         JC      ??MT_AfIncomingMsg_4
    632            {
    633              if ((pItem = (mtAfInMsgList_t *)osal_mem_alloc(sizeof(mtAfInMsgList_t) + dataLen)) == NULL)
   \   00009C                ; Setup parameters for call to function osal_mem_alloc
   \   00009C   E5..         MOV     A,?V0 + 2
   \   00009E   2409         ADD     A,#0x9
   \   0000A0   FA           MOV     R2,A
   \   0000A1   E5..         MOV     A,?V0 + 3
   \   0000A3   3400         ADDC    A,#0x0
   \   0000A5   FB           MOV     R3,A
   \   0000A6   12....       LCALL   ??osal_mem_alloc?relay
   \   0000A9   8A..         MOV     ?V0 + 4,R2
   \   0000AB   8B..         MOV     ?V0 + 5,R3
   \   0000AD   A8..         MOV     R0,?V0 + 4
   \   0000AF   A9..         MOV     R1,?V0 + 5
   \   0000B1   88..         MOV     ?V0 + 10,R0
   \   0000B3   89..         MOV     ?V0 + 11,R1
   \   0000B5   E8           MOV     A,R0
   \   0000B6   49           ORL     A,R1
   \   0000B7   7003         JNZ     $+5
   \   0000B9   02....       LJMP    ??MT_AfIncomingMsg_5 & 0xFFFF
    634              {
    635                return;  // If cannot hold a huge message, cannot give indication at all.
    636              }
    637          
    638              pItem->data = (uint8 *)(pItem+1);
   \   0000BC   E5..         MOV     A,?V0 + 10
   \   0000BE   2409         ADD     A,#0x9
   \   0000C0   F8           MOV     R0,A
   \   0000C1   E5..         MOV     A,?V0 + 11
   \   0000C3   3400         ADDC    A,#0x0
   \   0000C5   F9           MOV     R1,A
   \   0000C6   85..82       MOV     DPL,?V0 + 10
   \   0000C9   85..83       MOV     DPH,?V0 + 11
   \   0000CC   A3           INC     DPTR
   \   0000CD   A3           INC     DPTR
   \   0000CE   E8           MOV     A,R0
   \   0000CF   F0           MOVX    @DPTR,A
   \   0000D0   A3           INC     DPTR
   \   0000D1   E9           MOV     A,R1
   \   0000D2   F0           MOVX    @DPTR,A
    639              respLen -= dataLen;  // Zero data bytes are sent with an over-sized incoming indication.
   \   0000D3   C3           CLR     C
   \   0000D4   E5..         MOV     A,?V0 + 0
   \   0000D6   95..         SUBB    A,?V0 + 2
   \   0000D8   F5..         MOV     ?V0 + 0,A
   \   0000DA   E5..         MOV     A,?V0 + 1
   \   0000DC   95..         SUBB    A,?V0 + 3
   \   0000DE   F5..         MOV     ?V0 + 1,A
    640            }
    641          
    642            // Attempt to allocate memory for the response packet.
    643            if ((pRsp = osal_mem_alloc(respLen)) == NULL)
   \                     ??MT_AfIncomingMsg_4:
   \   0000E0                ; Setup parameters for call to function osal_mem_alloc
   \   0000E0   AA..         MOV     R2,?V0 + 0
   \   0000E2   AB..         MOV     R3,?V0 + 1
   \   0000E4   12....       LCALL   ??osal_mem_alloc?relay
   \   0000E7   8A..         MOV     ?V0 + 4,R2
   \   0000E9   8B..         MOV     ?V0 + 5,R3
   \   0000EB   A8..         MOV     R0,?V0 + 4
   \   0000ED   A9..         MOV     R1,?V0 + 5
   \   0000EF   88..         MOV     ?V0 + 14,R0
   \   0000F1   89..         MOV     ?V0 + 15,R1
   \   0000F3   E8           MOV     A,R0
   \   0000F4   49           ORL     A,R1
   \   0000F5   7010         JNZ     ??MT_AfIncomingMsg_6
    644            {
    645              if (pItem != NULL)
   \   0000F7   E5..         MOV     A,?V0 + 10
   \   0000F9   45..         ORL     A,?V0 + 11
   \   0000FB   6007         JZ      ??MT_AfIncomingMsg_7
    646              {
    647                (void)osal_mem_free(pItem);
   \   0000FD                ; Setup parameters for call to function osal_mem_free
   \   0000FD   AA..         MOV     R2,?V0 + 10
   \   0000FF   AB..         MOV     R3,?V0 + 11
   \   000101   12....       LCALL   ??osal_mem_free?relay
    648              }
    649              return;
   \                     ??MT_AfIncomingMsg_7:
   \   000104   02....       LJMP    ??MT_AfIncomingMsg_5 & 0xFFFF
    650            }
    651            pTmp = pRsp;
   \                     ??MT_AfIncomingMsg_6:
   \   000107   AE..         MOV     R6,?V0 + 14
   \   000109   AF..         MOV     R7,?V0 + 15
    652          
    653            /* Group ID */
    654            *pTmp++ = LO_UINT16(pMsg->groupId);
   \   00010B   85..82       MOV     DPL,?V0 + 8
   \   00010E   85..83       MOV     DPH,?V0 + 9
   \   000111   A3           INC     DPTR
   \   000112   A3           INC     DPTR
   \   000113   E0           MOVX    A,@DPTR
   \   000114   F8           MOV     R0,A
   \   000115   A3           INC     DPTR
   \   000116   E0           MOVX    A,@DPTR
   \   000117   F9           MOV     R1,A
   \   000118   E8           MOV     A,R0
   \   000119   8E82         MOV     DPL,R6
   \   00011B   8F83         MOV     DPH,R7
   \   00011D   F0           MOVX    @DPTR,A
   \   00011E   8E82         MOV     DPL,R6
   \   000120   8F83         MOV     DPH,R7
   \   000122   A3           INC     DPTR
   \   000123   AE82         MOV     R6,DPL
   \   000125   AF83         MOV     R7,DPH
    655            *pTmp++ = HI_UINT16(pMsg->groupId);
   \   000127   85..82       MOV     DPL,?V0 + 8
   \   00012A   85..83       MOV     DPH,?V0 + 9
   \   00012D   A3           INC     DPTR
   \   00012E   A3           INC     DPTR
   \   00012F   E0           MOVX    A,@DPTR
   \   000130   F8           MOV     R0,A
   \   000131   A3           INC     DPTR
   \   000132   E0           MOVX    A,@DPTR
   \   000133   F9           MOV     R1,A
   \   000134   E4           CLR     A
   \   000135   E9           MOV     A,R1
   \   000136   F8           MOV     R0,A
   \   000137   8E82         MOV     DPL,R6
   \   000139   8F83         MOV     DPH,R7
   \   00013B   F0           MOVX    @DPTR,A
   \   00013C   8E82         MOV     DPL,R6
   \   00013E   8F83         MOV     DPH,R7
   \   000140   A3           INC     DPTR
   \   000141   AE82         MOV     R6,DPL
   \   000143   AF83         MOV     R7,DPH
    656          
    657            /* Cluster ID */
    658            *pTmp++ = LO_UINT16(pMsg->clusterId);
   \   000145   85..82       MOV     DPL,?V0 + 8
   \   000148   85..83       MOV     DPH,?V0 + 9
   \   00014B   A3           INC     DPTR
   \   00014C   A3           INC     DPTR
   \   00014D   A3           INC     DPTR
   \   00014E   A3           INC     DPTR
   \   00014F   E0           MOVX    A,@DPTR
   \   000150   F8           MOV     R0,A
   \   000151   A3           INC     DPTR
   \   000152   E0           MOVX    A,@DPTR
   \   000153   F9           MOV     R1,A
   \   000154   E8           MOV     A,R0
   \   000155   8E82         MOV     DPL,R6
   \   000157   8F83         MOV     DPH,R7
   \   000159   F0           MOVX    @DPTR,A
   \   00015A   8E82         MOV     DPL,R6
   \   00015C   8F83         MOV     DPH,R7
   \   00015E   A3           INC     DPTR
   \   00015F   AE82         MOV     R6,DPL
   \   000161   AF83         MOV     R7,DPH
    659            *pTmp++ = HI_UINT16(pMsg->clusterId);
   \   000163   85..82       MOV     DPL,?V0 + 8
   \   000166   85..83       MOV     DPH,?V0 + 9
   \   000169   A3           INC     DPTR
   \   00016A   A3           INC     DPTR
   \   00016B   A3           INC     DPTR
   \   00016C   A3           INC     DPTR
   \   00016D   E0           MOVX    A,@DPTR
   \   00016E   F8           MOV     R0,A
   \   00016F   A3           INC     DPTR
   \   000170   E0           MOVX    A,@DPTR
   \   000171   F9           MOV     R1,A
   \   000172   E4           CLR     A
   \   000173   E9           MOV     A,R1
   \   000174   F8           MOV     R0,A
   \   000175   8E82         MOV     DPL,R6
   \   000177   8F83         MOV     DPH,R7
   \   000179   F0           MOVX    @DPTR,A
   \   00017A   8E82         MOV     DPL,R6
   \   00017C   8F83         MOV     DPH,R7
   \   00017E   A3           INC     DPTR
   \   00017F   AE82         MOV     R6,DPL
   \   000181   AF83         MOV     R7,DPH
    660          
    661            if (cmd == MT_AF_INCOMING_MSG_EXT)
   \   000183   7482         MOV     A,#-0x7e
   \   000185   65..         XRL     A,?V0 + 12
   \   000187   6003         JZ      $+5
   \   000189   02....       LJMP    ??MT_AfIncomingMsg_8 & 0xFFFF
    662            {
    663              *pTmp++ = pMsg->srcAddr.addrMode;
   \   00018C   E5..         MOV     A,?V0 + 8
   \   00018E   240E         ADD     A,#0xe
   \   000190   F582         MOV     DPL,A
   \   000192   E5..         MOV     A,?V0 + 9
   \   000194   3400         ADDC    A,#0x0
   \   000196   F583         MOV     DPH,A
   \   000198   E0           MOVX    A,@DPTR
   \   000199   8E82         MOV     DPL,R6
   \   00019B   8F83         MOV     DPH,R7
   \   00019D   F0           MOVX    @DPTR,A
   \   00019E   8E82         MOV     DPL,R6
   \   0001A0   8F83         MOV     DPH,R7
   \   0001A2   A3           INC     DPTR
   \   0001A3   AE82         MOV     R6,DPL
   \   0001A5   AF83         MOV     R7,DPH
    664          
    665              if (pMsg->srcAddr.addrMode == afAddr64Bit)
   \   0001A7   E5..         MOV     A,?V0 + 8
   \   0001A9   240E         ADD     A,#0xe
   \   0001AB   F582         MOV     DPL,A
   \   0001AD   E5..         MOV     A,?V0 + 9
   \   0001AF   3400         ADDC    A,#0x0
   \   0001B1   F583         MOV     DPH,A
   \   0001B3   E0           MOVX    A,@DPTR
   \   0001B4   6403         XRL     A,#0x3
   \   0001B6   7030         JNZ     ??MT_AfIncomingMsg_9
    666              {
    667                (void)osal_memcpy(pTmp, pMsg->srcAddr.addr.extAddr, Z_EXTADDR_LEN);
   \   0001B8                ; Setup parameters for call to function osal_memcpy
   \   0001B8   E5..         MOV     A,?V0 + 8
   \   0001BA   2406         ADD     A,#0x6
   \   0001BC   F5..         MOV     ?V0 + 4,A
   \   0001BE   E5..         MOV     A,?V0 + 9
   \   0001C0   3400         ADDC    A,#0x0
   \   0001C2   F5..         MOV     ?V0 + 5,A
   \   0001C4   75..00       MOV     ?V0 + 6,#0x0
   \   0001C7   78..         MOV     R0,#?V0 + 4
   \   0001C9   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0001CC   7C08         MOV     R4,#0x8
   \   0001CE   7D00         MOV     R5,#0x0
   \   0001D0   EE           MOV     A,R6
   \   0001D1   FA           MOV     R2,A
   \   0001D2   EF           MOV     A,R7
   \   0001D3   FB           MOV     R3,A
   \   0001D4   12....       LCALL   ??osal_memcpy?relay
   \   0001D7   7403         MOV     A,#0x3
   \   0001D9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001DC   8A..         MOV     ?V0 + 4,R2
   \   0001DE   8B..         MOV     ?V0 + 5,R3
   \   0001E0   85..82       MOV     DPL,?V0 + 4
   \   0001E3   85..83       MOV     DPH,?V0 + 5
   \   0001E6   8031         SJMP    ??MT_AfIncomingMsg_10
    668              }
    669              else
    670              {
    671                pTmp[0] = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??MT_AfIncomingMsg_9:
   \   0001E8   85..82       MOV     DPL,?V0 + 8
   \   0001EB   85..83       MOV     DPH,?V0 + 9
   \   0001EE   A3           INC     DPTR
   \   0001EF   A3           INC     DPTR
   \   0001F0   A3           INC     DPTR
   \   0001F1   A3           INC     DPTR
   \   0001F2   A3           INC     DPTR
   \   0001F3   A3           INC     DPTR
   \   0001F4   E0           MOVX    A,@DPTR
   \   0001F5   F8           MOV     R0,A
   \   0001F6   A3           INC     DPTR
   \   0001F7   E0           MOVX    A,@DPTR
   \   0001F8   F9           MOV     R1,A
   \   0001F9   E8           MOV     A,R0
   \   0001FA   8E82         MOV     DPL,R6
   \   0001FC   8F83         MOV     DPH,R7
   \   0001FE   F0           MOVX    @DPTR,A
    672                pTmp[1] = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   \   0001FF   85..82       MOV     DPL,?V0 + 8
   \   000202   85..83       MOV     DPH,?V0 + 9
   \   000205   A3           INC     DPTR
   \   000206   A3           INC     DPTR
   \   000207   A3           INC     DPTR
   \   000208   A3           INC     DPTR
   \   000209   A3           INC     DPTR
   \   00020A   A3           INC     DPTR
   \   00020B   E0           MOVX    A,@DPTR
   \   00020C   F8           MOV     R0,A
   \   00020D   A3           INC     DPTR
   \   00020E   E0           MOVX    A,@DPTR
   \   00020F   F9           MOV     R1,A
   \   000210   E4           CLR     A
   \   000211   E9           MOV     A,R1
   \   000212   F8           MOV     R0,A
   \   000213   8E82         MOV     DPL,R6
   \   000215   8F83         MOV     DPH,R7
   \   000217   A3           INC     DPTR
   \   000218   F0           MOVX    @DPTR,A
    673              }
    674              pTmp += Z_EXTADDR_LEN;
   \                     ??MT_AfIncomingMsg_10:
   \   000219   EE           MOV     A,R6
   \   00021A   2408         ADD     A,#0x8
   \   00021C   FE           MOV     R6,A
   \   00021D   EF           MOV     A,R7
   \   00021E   3400         ADDC    A,#0x0
   \   000220   FF           MOV     R7,A
    675          
    676              *pTmp++ = pMsg->srcAddr.endPoint;
   \   000221   E5..         MOV     A,?V0 + 8
   \   000223   240F         ADD     A,#0xf
   \   000225   F582         MOV     DPL,A
   \   000227   E5..         MOV     A,?V0 + 9
   \   000229   3400         ADDC    A,#0x0
   \   00022B   F583         MOV     DPH,A
   \   00022D   E0           MOVX    A,@DPTR
   \   00022E   8E82         MOV     DPL,R6
   \   000230   8F83         MOV     DPH,R7
   \   000232   F0           MOVX    @DPTR,A
   \   000233   8E82         MOV     DPL,R6
   \   000235   8F83         MOV     DPH,R7
   \   000237   A3           INC     DPTR
   \   000238   AE82         MOV     R6,DPL
   \   00023A   AF83         MOV     R7,DPH
    677          #if defined INTER_PAN
    678              *pTmp++ = LO_UINT16(pMsg->srcAddr.panId);
   \   00023C   E5..         MOV     A,?V0 + 8
   \   00023E   2410         ADD     A,#0x10
   \   000240   F582         MOV     DPL,A
   \   000242   E5..         MOV     A,?V0 + 9
   \   000244   3400         ADDC    A,#0x0
   \   000246   F583         MOV     DPH,A
   \   000248   E0           MOVX    A,@DPTR
   \   000249   F8           MOV     R0,A
   \   00024A   A3           INC     DPTR
   \   00024B   E0           MOVX    A,@DPTR
   \   00024C   F9           MOV     R1,A
   \   00024D   E8           MOV     A,R0
   \   00024E   8E82         MOV     DPL,R6
   \   000250   8F83         MOV     DPH,R7
   \   000252   F0           MOVX    @DPTR,A
   \   000253   8E82         MOV     DPL,R6
   \   000255   8F83         MOV     DPH,R7
   \   000257   A3           INC     DPTR
   \   000258   AE82         MOV     R6,DPL
   \   00025A   AF83         MOV     R7,DPH
    679              *pTmp++ = HI_UINT16(pMsg->srcAddr.panId);
   \   00025C   E5..         MOV     A,?V0 + 8
   \   00025E   2410         ADD     A,#0x10
   \   000260   F582         MOV     DPL,A
   \   000262   E5..         MOV     A,?V0 + 9
   \   000264   3400         ADDC    A,#0x0
   \   000266   F583         MOV     DPH,A
   \   000268   E0           MOVX    A,@DPTR
   \   000269   F8           MOV     R0,A
   \   00026A   A3           INC     DPTR
   \   00026B   E0           MOVX    A,@DPTR
   \   00026C   F9           MOV     R1,A
   \   00026D   E4           CLR     A
   \   00026E   E9           MOV     A,R1
   \   00026F   F8           MOV     R0,A
   \   000270   8E82         MOV     DPL,R6
   \   000272   8F83         MOV     DPH,R7
   \   000274   F0           MOVX    @DPTR,A
   \   000275   8E82         MOV     DPL,R6
   \   000277   8F83         MOV     DPH,R7
   \   000279   A3           INC     DPTR
   \   00027A   AE82         MOV     R6,DPL
   \   00027C   AF83         MOV     R7,DPH
   \   00027E   805D         SJMP    ??MT_AfIncomingMsg_11
    680          #else
    681              *pTmp++ = 0;
    682              *pTmp++ = 0;
    683          #endif
    684            }
    685            else
    686            {
    687              /* Source Address */
    688              *pTmp++ = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??MT_AfIncomingMsg_8:
   \   000280   85..82       MOV     DPL,?V0 + 8
   \   000283   85..83       MOV     DPH,?V0 + 9
   \   000286   A3           INC     DPTR
   \   000287   A3           INC     DPTR
   \   000288   A3           INC     DPTR
   \   000289   A3           INC     DPTR
   \   00028A   A3           INC     DPTR
   \   00028B   A3           INC     DPTR
   \   00028C   E0           MOVX    A,@DPTR
   \   00028D   F8           MOV     R0,A
   \   00028E   A3           INC     DPTR
   \   00028F   E0           MOVX    A,@DPTR
   \   000290   F9           MOV     R1,A
   \   000291   E8           MOV     A,R0
   \   000292   8E82         MOV     DPL,R6
   \   000294   8F83         MOV     DPH,R7
   \   000296   F0           MOVX    @DPTR,A
   \   000297   8E82         MOV     DPL,R6
   \   000299   8F83         MOV     DPH,R7
   \   00029B   A3           INC     DPTR
   \   00029C   AE82         MOV     R6,DPL
   \   00029E   AF83         MOV     R7,DPH
    689              *pTmp++ = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   \   0002A0   85..82       MOV     DPL,?V0 + 8
   \   0002A3   85..83       MOV     DPH,?V0 + 9
   \   0002A6   A3           INC     DPTR
   \   0002A7   A3           INC     DPTR
   \   0002A8   A3           INC     DPTR
   \   0002A9   A3           INC     DPTR
   \   0002AA   A3           INC     DPTR
   \   0002AB   A3           INC     DPTR
   \   0002AC   E0           MOVX    A,@DPTR
   \   0002AD   F8           MOV     R0,A
   \   0002AE   A3           INC     DPTR
   \   0002AF   E0           MOVX    A,@DPTR
   \   0002B0   F9           MOV     R1,A
   \   0002B1   E4           CLR     A
   \   0002B2   E9           MOV     A,R1
   \   0002B3   F8           MOV     R0,A
   \   0002B4   8E82         MOV     DPL,R6
   \   0002B6   8F83         MOV     DPH,R7
   \   0002B8   F0           MOVX    @DPTR,A
   \   0002B9   8E82         MOV     DPL,R6
   \   0002BB   8F83         MOV     DPH,R7
   \   0002BD   A3           INC     DPTR
   \   0002BE   AE82         MOV     R6,DPL
   \   0002C0   AF83         MOV     R7,DPH
    690          
    691              /* Source EP */
    692              *pTmp++ = pMsg->srcAddr.endPoint;
   \   0002C2   E5..         MOV     A,?V0 + 8
   \   0002C4   240F         ADD     A,#0xf
   \   0002C6   F582         MOV     DPL,A
   \   0002C8   E5..         MOV     A,?V0 + 9
   \   0002CA   3400         ADDC    A,#0x0
   \   0002CC   F583         MOV     DPH,A
   \   0002CE   E0           MOVX    A,@DPTR
   \   0002CF   8E82         MOV     DPL,R6
   \   0002D1   8F83         MOV     DPH,R7
   \   0002D3   F0           MOVX    @DPTR,A
   \   0002D4   8E82         MOV     DPL,R6
   \   0002D6   8F83         MOV     DPH,R7
   \   0002D8   A3           INC     DPTR
   \   0002D9   AE82         MOV     R6,DPL
   \   0002DB   AF83         MOV     R7,DPH
    693            }
    694          
    695            /* Destination EP */
    696            *pTmp++ = pMsg->endPoint;
   \                     ??MT_AfIncomingMsg_11:
   \   0002DD   E5..         MOV     A,?V0 + 8
   \   0002DF   2414         ADD     A,#0x14
   \   0002E1   F582         MOV     DPL,A
   \   0002E3   E5..         MOV     A,?V0 + 9
   \   0002E5   3400         ADDC    A,#0x0
   \   0002E7   F583         MOV     DPH,A
   \   0002E9   E0           MOVX    A,@DPTR
   \   0002EA   8E82         MOV     DPL,R6
   \   0002EC   8F83         MOV     DPH,R7
   \   0002EE   F0           MOVX    @DPTR,A
   \   0002EF   8E82         MOV     DPL,R6
   \   0002F1   8F83         MOV     DPH,R7
   \   0002F3   A3           INC     DPTR
   \   0002F4   AE82         MOV     R6,DPL
   \   0002F6   AF83         MOV     R7,DPH
    697          
    698            /* WasBroadCast */
    699            *pTmp++ = pMsg->wasBroadcast;
   \   0002F8   E5..         MOV     A,?V0 + 8
   \   0002FA   2415         ADD     A,#0x15
   \   0002FC   F582         MOV     DPL,A
   \   0002FE   E5..         MOV     A,?V0 + 9
   \   000300   3400         ADDC    A,#0x0
   \   000302   F583         MOV     DPH,A
   \   000304   E0           MOVX    A,@DPTR
   \   000305   8E82         MOV     DPL,R6
   \   000307   8F83         MOV     DPH,R7
   \   000309   F0           MOVX    @DPTR,A
   \   00030A   8E82         MOV     DPL,R6
   \   00030C   8F83         MOV     DPH,R7
   \   00030E   A3           INC     DPTR
   \   00030F   AE82         MOV     R6,DPL
   \   000311   AF83         MOV     R7,DPH
    700          
    701            /* LinkQuality */
    702            *pTmp++ = pMsg->LinkQuality;
   \   000313   E5..         MOV     A,?V0 + 8
   \   000315   2416         ADD     A,#0x16
   \   000317   F582         MOV     DPL,A
   \   000319   E5..         MOV     A,?V0 + 9
   \   00031B   3400         ADDC    A,#0x0
   \   00031D   F583         MOV     DPH,A
   \   00031F   E0           MOVX    A,@DPTR
   \   000320   8E82         MOV     DPL,R6
   \   000322   8F83         MOV     DPH,R7
   \   000324   F0           MOVX    @DPTR,A
   \   000325   8E82         MOV     DPL,R6
   \   000327   8F83         MOV     DPH,R7
   \   000329   A3           INC     DPTR
   \   00032A   AE82         MOV     R6,DPL
   \   00032C   AF83         MOV     R7,DPH
    703          
    704            /* SecurityUse */
    705            *pTmp++ = pMsg->SecurityUse;
   \   00032E   E5..         MOV     A,?V0 + 8
   \   000330   2419         ADD     A,#0x19
   \   000332   F582         MOV     DPL,A
   \   000334   E5..         MOV     A,?V0 + 9
   \   000336   3400         ADDC    A,#0x0
   \   000338   F583         MOV     DPH,A
   \   00033A   E0           MOVX    A,@DPTR
   \   00033B   8E82         MOV     DPL,R6
   \   00033D   8F83         MOV     DPH,R7
   \   00033F   F0           MOVX    @DPTR,A
   \   000340   8E82         MOV     DPL,R6
   \   000342   8F83         MOV     DPH,R7
   \   000344   A3           INC     DPTR
   \   000345   AE82         MOV     R6,DPL
   \   000347   AF83         MOV     R7,DPH
    706          
    707            /* Timestamp */
    708            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 0);
   \   000349   E5..         MOV     A,?V0 + 8
   \   00034B   241A         ADD     A,#0x1a
   \   00034D   F582         MOV     DPL,A
   \   00034F   E5..         MOV     A,?V0 + 9
   \   000351   3400         ADDC    A,#0x0
   \   000353   F583         MOV     DPH,A
   \   000355   78..         MOV     R0,#?V0 + 4
   \   000357   12....       LCALL   ?L_MOV_X
   \   00035A   E5..         MOV     A,?V0 + 4
   \   00035C   8E82         MOV     DPL,R6
   \   00035E   8F83         MOV     DPH,R7
   \   000360   E5..         MOV     A,?V0 + 4
   \   000362   F0           MOVX    @DPTR,A
   \   000363   8E82         MOV     DPL,R6
   \   000365   8F83         MOV     DPH,R7
   \   000367   A3           INC     DPTR
   \   000368   AE82         MOV     R6,DPL
   \   00036A   AF83         MOV     R7,DPH
    709            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 1);
   \   00036C   E5..         MOV     A,?V0 + 8
   \   00036E   241A         ADD     A,#0x1a
   \   000370   F582         MOV     DPL,A
   \   000372   E5..         MOV     A,?V0 + 9
   \   000374   3400         ADDC    A,#0x0
   \   000376   F583         MOV     DPH,A
   \   000378   78..         MOV     R0,#?V0 + 4
   \   00037A   12....       LCALL   ?L_MOV_X
   \   00037D   E4           CLR     A
   \   00037E   E5..         MOV     A,?V0 + 5
   \   000380   F5..         MOV     ?V0 + 4,A
   \   000382   E5..         MOV     A,?V0 + 4
   \   000384   8E82         MOV     DPL,R6
   \   000386   8F83         MOV     DPH,R7
   \   000388   E5..         MOV     A,?V0 + 4
   \   00038A   F0           MOVX    @DPTR,A
   \   00038B   8E82         MOV     DPL,R6
   \   00038D   8F83         MOV     DPH,R7
   \   00038F   A3           INC     DPTR
   \   000390   AE82         MOV     R6,DPL
   \   000392   AF83         MOV     R7,DPH
    710            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 2);
   \   000394   E5..         MOV     A,?V0 + 8
   \   000396   241A         ADD     A,#0x1a
   \   000398   F582         MOV     DPL,A
   \   00039A   E5..         MOV     A,?V0 + 9
   \   00039C   3400         ADDC    A,#0x0
   \   00039E   F583         MOV     DPH,A
   \   0003A0   78..         MOV     R0,#?V0 + 4
   \   0003A2   12....       LCALL   ?L_MOV_X
   \   0003A5   7410         MOV     A,#0x10
   \   0003A7   78..         MOV     R0,#?V0 + 4
   \   0003A9   12....       LCALL   ?UL_SHR
   \   0003AC   E5..         MOV     A,?V0 + 4
   \   0003AE   8E82         MOV     DPL,R6
   \   0003B0   8F83         MOV     DPH,R7
   \   0003B2   E5..         MOV     A,?V0 + 4
   \   0003B4   F0           MOVX    @DPTR,A
   \   0003B5   8E82         MOV     DPL,R6
   \   0003B7   8F83         MOV     DPH,R7
   \   0003B9   A3           INC     DPTR
   \   0003BA   AE82         MOV     R6,DPL
   \   0003BC   AF83         MOV     R7,DPH
    711            *pTmp++ = BREAK_UINT32(pMsg->timestamp, 3);
   \   0003BE   E5..         MOV     A,?V0 + 8
   \   0003C0   241A         ADD     A,#0x1a
   \   0003C2   F582         MOV     DPL,A
   \   0003C4   E5..         MOV     A,?V0 + 9
   \   0003C6   3400         ADDC    A,#0x0
   \   0003C8   F583         MOV     DPH,A
   \   0003CA   78..         MOV     R0,#?V0 + 4
   \   0003CC   12....       LCALL   ?L_MOV_X
   \   0003CF   7418         MOV     A,#0x18
   \   0003D1   78..         MOV     R0,#?V0 + 4
   \   0003D3   12....       LCALL   ?UL_SHR
   \   0003D6   E5..         MOV     A,?V0 + 4
   \   0003D8   8E82         MOV     DPL,R6
   \   0003DA   8F83         MOV     DPH,R7
   \   0003DC   E5..         MOV     A,?V0 + 4
   \   0003DE   F0           MOVX    @DPTR,A
   \   0003DF   8E82         MOV     DPL,R6
   \   0003E1   8F83         MOV     DPH,R7
   \   0003E3   A3           INC     DPTR
   \   0003E4   AE82         MOV     R6,DPL
   \   0003E6   AF83         MOV     R7,DPH
    712          
    713          
    714            /* Data Length */
    715            if (cmd == MT_AF_INCOMING_MSG_EXT)
   \   0003E8   7482         MOV     A,#-0x7e
   \   0003EA   65..         XRL     A,?V0 + 12
   \   0003EC   703F         JNZ     ??MT_AfIncomingMsg_12
    716            {
    717              /* Z-Tool apparently takes the last Byte before the data buffer as the dynamic length and
    718               * ignores the bigger UInt16 length of an EXT incoming message. But no data bytes will be sent
    719               * with a huge message, so it's necessary to work-around and fake-out Z-Tool with a zero here.
    720               */
    721              *pTmp++ = 0;  // TODO - workaround Z-Tool shortcoming; should be: = pMsg->cmd.TransSeqNumber;
   \   0003EE   8E82         MOV     DPL,R6
   \   0003F0   8F83         MOV     DPH,R7
   \   0003F2   7400         MOV     A,#0x0
   \   0003F4   F0           MOVX    @DPTR,A
   \   0003F5   8E82         MOV     DPL,R6
   \   0003F7   8F83         MOV     DPH,R7
   \   0003F9   A3           INC     DPTR
   \   0003FA   AE82         MOV     R6,DPL
   \   0003FC   AF83         MOV     R7,DPH
    722              *pTmp++ = LO_UINT16(dataLen);
   \   0003FE   E5..         MOV     A,?V0 + 2
   \   000400   8E82         MOV     DPL,R6
   \   000402   8F83         MOV     DPH,R7
   \   000404   E5..         MOV     A,?V0 + 2
   \   000406   F0           MOVX    @DPTR,A
   \   000407   8E82         MOV     DPL,R6
   \   000409   8F83         MOV     DPH,R7
   \   00040B   A3           INC     DPTR
   \   00040C   AE82         MOV     R6,DPL
   \   00040E   AF83         MOV     R7,DPH
    723              *pTmp++ = HI_UINT16(dataLen);
   \   000410   A8..         MOV     R0,?V0 + 2
   \   000412   A9..         MOV     R1,?V0 + 3
   \   000414   E4           CLR     A
   \   000415   E5..         MOV     A,?V0 + 3
   \   000417   A8..         MOV     R0,?V0 + 3
   \   000419   E5..         MOV     A,?V0 + 3
   \   00041B   8E82         MOV     DPL,R6
   \   00041D   8F83         MOV     DPH,R7
   \   00041F   E5..         MOV     A,?V0 + 3
   \   000421   F0           MOVX    @DPTR,A
   \   000422   8E82         MOV     DPL,R6
   \   000424   8F83         MOV     DPH,R7
   \   000426   A3           INC     DPTR
   \   000427   AE82         MOV     R6,DPL
   \   000429   AF83         MOV     R7,DPH
   \   00042B   802D         SJMP    ??MT_AfIncomingMsg_13
    724            }
    725            else
    726            {
    727              *pTmp++ = pMsg->cmd.TransSeqNumber;
   \                     ??MT_AfIncomingMsg_12:
   \   00042D   E5..         MOV     A,?V0 + 8
   \   00042F   241F         ADD     A,#0x1f
   \   000431   F582         MOV     DPL,A
   \   000433   E5..         MOV     A,?V0 + 9
   \   000435   3400         ADDC    A,#0x0
   \   000437   F583         MOV     DPH,A
   \   000439   E0           MOVX    A,@DPTR
   \   00043A   8E82         MOV     DPL,R6
   \   00043C   8F83         MOV     DPH,R7
   \   00043E   F0           MOVX    @DPTR,A
   \   00043F   8E82         MOV     DPL,R6
   \   000441   8F83         MOV     DPH,R7
   \   000443   A3           INC     DPTR
   \   000444   AE82         MOV     R6,DPL
   \   000446   AF83         MOV     R7,DPH
    728              *pTmp++ = dataLen;
   \   000448   E5..         MOV     A,?V0 + 2
   \   00044A   8E82         MOV     DPL,R6
   \   00044C   8F83         MOV     DPH,R7
   \   00044E   E5..         MOV     A,?V0 + 2
   \   000450   F0           MOVX    @DPTR,A
   \   000451   8E82         MOV     DPL,R6
   \   000453   8F83         MOV     DPH,R7
   \   000455   A3           INC     DPTR
   \   000456   AE82         MOV     R6,DPL
   \   000458   AF83         MOV     R7,DPH
    729            }
    730          
    731            /* Data */
    732            if (pItem != NULL)
   \                     ??MT_AfIncomingMsg_13:
   \   00045A   E5..         MOV     A,?V0 + 10
   \   00045C   45..         ORL     A,?V0 + 11
   \   00045E   7003         JNZ     $+5
   \   000460   02....       LJMP    ??MT_AfIncomingMsg_14 & 0xFFFF
    733            {
    734              // Enqueue the new huge incoming item.
    735              pItem->next = pMtAfInMsgList;
   \   000463   90....       MOV     DPTR,#pMtAfInMsgList
   \   000466   E0           MOVX    A,@DPTR
   \   000467   F8           MOV     R0,A
   \   000468   A3           INC     DPTR
   \   000469   E0           MOVX    A,@DPTR
   \   00046A   F9           MOV     R1,A
   \   00046B   85..82       MOV     DPL,?V0 + 10
   \   00046E   85..83       MOV     DPH,?V0 + 11
   \   000471   E8           MOV     A,R0
   \   000472   F0           MOVX    @DPTR,A
   \   000473   A3           INC     DPTR
   \   000474   E9           MOV     A,R1
   \   000475   F0           MOVX    @DPTR,A
    736              pMtAfInMsgList = pItem;
   \   000476   90....       MOV     DPTR,#pMtAfInMsgList
   \   000479   E5..         MOV     A,?V0 + 10
   \   00047B   F0           MOVX    @DPTR,A
   \   00047C   A3           INC     DPTR
   \   00047D   E5..         MOV     A,?V0 + 11
   \   00047F   F0           MOVX    @DPTR,A
    737          
    738              // Setup to time-out the huge incoming item if host does not MT_AF_DATA_RETRIEVE it.
    739              pItem->tick = MT_AF_EXEC_CNT;
   \   000480   85..82       MOV     DPL,?V0 + 10
   \   000483   85..83       MOV     DPH,?V0 + 11
   \   000486   A3           INC     DPTR
   \   000487   A3           INC     DPTR
   \   000488   A3           INC     DPTR
   \   000489   A3           INC     DPTR
   \   00048A   A3           INC     DPTR
   \   00048B   A3           INC     DPTR
   \   00048C   A3           INC     DPTR
   \   00048D   A3           INC     DPTR
   \   00048E   740F         MOV     A,#0xf
   \   000490   F0           MOVX    @DPTR,A
    740              if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \   000491                ; Setup parameters for call to function osal_start_timerEx
   \   000491   7CE8         MOV     R4,#-0x18
   \   000493   7D03         MOV     R5,#0x3
   \   000495   7A08         MOV     R2,#0x8
   \   000497   7B00         MOV     R3,#0x0
   \   000499   90....       MOV     DPTR,#MT_TaskID
   \   00049C   E0           MOVX    A,@DPTR
   \   00049D   F9           MOV     R1,A
   \   00049E   12....       LCALL   ??osal_start_timerEx?relay
   \   0004A1   E9           MOV     A,R1
   \   0004A2   6014         JZ      ??MT_AfIncomingMsg_15
    741              {
    742                (void)osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   0004A4                ; Setup parameters for call to function osal_set_event
   \   0004A4   7A08         MOV     R2,#0x8
   \   0004A6   7B00         MOV     R3,#0x0
   \   0004A8   90....       MOV     DPTR,#MT_TaskID
   \   0004AB   E0           MOVX    A,@DPTR
   \   0004AC   F9           MOV     R1,A
   \   0004AD   12....       LCALL   ??osal_set_event?relay
   \   0004B0   E9           MOV     A,R1
   \   0004B1   85..82       MOV     DPL,?XSP + 0
   \   0004B4   85..83       MOV     DPH,?XSP + 1
   \   0004B7   F0           MOVX    @DPTR,A
    743              }
    744          
    745              pItem->timestamp = pMsg->timestamp;
   \                     ??MT_AfIncomingMsg_15:
   \   0004B8   E5..         MOV     A,?V0 + 8
   \   0004BA   241A         ADD     A,#0x1a
   \   0004BC   F582         MOV     DPL,A
   \   0004BE   E5..         MOV     A,?V0 + 9
   \   0004C0   3400         ADDC    A,#0x0
   \   0004C2   F583         MOV     DPH,A
   \   0004C4   12....       LCALL   ?XLOAD_R2345
   \   0004C7   85..82       MOV     DPL,?V0 + 10
   \   0004CA   85..83       MOV     DPH,?V0 + 11
   \   0004CD   A3           INC     DPTR
   \   0004CE   A3           INC     DPTR
   \   0004CF   A3           INC     DPTR
   \   0004D0   A3           INC     DPTR
   \   0004D1   12....       LCALL   ?XSTORE_R2345
    746              (void)osal_memcpy(pItem->data, pMsg->cmd.Data, dataLen);
   \   0004D4                ; Setup parameters for call to function osal_memcpy
   \   0004D4   E5..         MOV     A,?V0 + 8
   \   0004D6   2422         ADD     A,#0x22
   \   0004D8   F582         MOV     DPL,A
   \   0004DA   E5..         MOV     A,?V0 + 9
   \   0004DC   3400         ADDC    A,#0x0
   \   0004DE   F583         MOV     DPH,A
   \   0004E0   E0           MOVX    A,@DPTR
   \   0004E1   F5..         MOV     ?V0 + 4,A
   \   0004E3   A3           INC     DPTR
   \   0004E4   E0           MOVX    A,@DPTR
   \   0004E5   F5..         MOV     ?V0 + 5,A
   \   0004E7   75..00       MOV     ?V0 + 6,#0x0
   \   0004EA   78..         MOV     R0,#?V0 + 4
   \   0004EC   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0004EF   AC..         MOV     R4,?V0 + 2
   \   0004F1   AD..         MOV     R5,?V0 + 3
   \   0004F3   85..82       MOV     DPL,?V0 + 10
   \   0004F6   85..83       MOV     DPH,?V0 + 11
   \   0004F9   A3           INC     DPTR
   \   0004FA   A3           INC     DPTR
   \   0004FB   E0           MOVX    A,@DPTR
   \   0004FC   FA           MOV     R2,A
   \   0004FD   A3           INC     DPTR
   \   0004FE   E0           MOVX    A,@DPTR
   \   0004FF   FB           MOV     R3,A
   \   000500   12....       LCALL   ??osal_memcpy?relay
   \   000503   7403         MOV     A,#0x3
   \   000505   12....       LCALL   ?DEALLOC_XSTACK8
   \   000508   8A..         MOV     ?V0 + 4,R2
   \   00050A   8B..         MOV     ?V0 + 5,R3
   \   00050C   85..82       MOV     DPL,?V0 + 4
   \   00050F   85..83       MOV     DPH,?V0 + 5
   \   000512   8035         SJMP    ??MT_AfIncomingMsg_16
    747            }
    748            else
    749            {
    750              (void)osal_memcpy(pTmp, pMsg->cmd.Data, dataLen);
   \                     ??MT_AfIncomingMsg_14:
   \   000514                ; Setup parameters for call to function osal_memcpy
   \   000514   E5..         MOV     A,?V0 + 8
   \   000516   2422         ADD     A,#0x22
   \   000518   F582         MOV     DPL,A
   \   00051A   E5..         MOV     A,?V0 + 9
   \   00051C   3400         ADDC    A,#0x0
   \   00051E   F583         MOV     DPH,A
   \   000520   E0           MOVX    A,@DPTR
   \   000521   F5..         MOV     ?V0 + 4,A
   \   000523   A3           INC     DPTR
   \   000524   E0           MOVX    A,@DPTR
   \   000525   F5..         MOV     ?V0 + 5,A
   \   000527   75..00       MOV     ?V0 + 6,#0x0
   \   00052A   78..         MOV     R0,#?V0 + 4
   \   00052C   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00052F   AC..         MOV     R4,?V0 + 2
   \   000531   AD..         MOV     R5,?V0 + 3
   \   000533   EE           MOV     A,R6
   \   000534   FA           MOV     R2,A
   \   000535   EF           MOV     A,R7
   \   000536   FB           MOV     R3,A
   \   000537   12....       LCALL   ??osal_memcpy?relay
   \   00053A   7403         MOV     A,#0x3
   \   00053C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00053F   8A..         MOV     ?V0 + 4,R2
   \   000541   8B..         MOV     ?V0 + 5,R3
   \   000543   85..82       MOV     DPL,?V0 + 4
   \   000546   85..83       MOV     DPH,?V0 + 5
    751            }
    752          
    753            /* Build and send back the response */
    754            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ|(uint8)MT_RPC_SYS_AF), cmd, respLen, pRsp);
   \                     ??MT_AfIncomingMsg_16:
   \   000549                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000549   AC..         MOV     R4,?V0 + 14
   \   00054B   AD..         MOV     R5,?V0 + 15
   \   00054D   AB..         MOV     R3,?V0 + 0
   \   00054F   AA..         MOV     R2,?V0 + 12
   \   000551   7944         MOV     R1,#0x44
   \   000553   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    755          
    756            (void)osal_mem_free(pRsp);
   \   000556                ; Setup parameters for call to function osal_mem_free
   \   000556   AA..         MOV     R2,?V0 + 14
   \   000558   AB..         MOV     R3,?V0 + 15
   \   00055A   12....       LCALL   ??osal_mem_free?relay
    757          }
   \                     ??MT_AfIncomingMsg_5:
   \   00055D   7401         MOV     A,#0x1
   \   00055F   12....       LCALL   ?DEALLOC_XSTACK8
   \   000562   7F10         MOV     R7,#0x10
   \   000564   02....       LJMP    ?BANKED_LEAVE_XDATA
    758          
    759          /**************************************************************************************************
    760           * @fn          MT_AfDataRetrieve
    761           *
    762           * @brief   Process AF Data Retrieve command to incrementally read out a very large
    763           *          incoming AF message.
    764           *
    765           * input parameters
    766           *
    767           * @param pBuf - pointer to the received buffer
    768           *
    769           * output parameters
    770           *
    771           * @param rtrn - AF-Status of the operation.
    772           *
    773           * @return      None.
    774           **************************************************************************************************
    775           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    776          void MT_AfDataRetrieve(uint8 *pBuf)
   \                     MT_AfDataRetrieve:
    777          {
   \   000000   74E8         MOV     A,#-0x18
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 24
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    778            #define MT_AF_RTV_HDR_SZ  2
    779          
    780            uint32 timestamp;
    781            mtAfInMsgList_t *pPrev, *pItem = pMtAfInMsgList;
   \   00000E   90....       MOV     DPTR,#pMtAfInMsgList
   \   000011   E0           MOVX    A,@DPTR
   \   000012   F5..         MOV     ?V0 + 14,A
   \   000014   A3           INC     DPTR
   \   000015   E0           MOVX    A,@DPTR
   \   000016   F5..         MOV     ?V0 + 15,A
    782            uint8 rtrn = afStatus_FAILED;
   \   000018   75..01       MOV     ?V0 + 13,#0x1
    783            uint8 len = 0;
   \   00001B   75..00       MOV     ?V0 + 12,#0x0
    784          
    785            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00001E   EE           MOV     A,R6
   \   00001F   2403         ADD     A,#0x3
   \   000021   FE           MOV     R6,A
   \   000022   EF           MOV     A,R7
   \   000023   3400         ADDC    A,#0x0
   \   000025   FF           MOV     R7,A
    786            timestamp = BUILD_UINT32(pBuf[0], pBuf[1], pBuf[2], pBuf[3]);
   \   000026   8E82         MOV     DPL,R6
   \   000028   8F83         MOV     DPH,R7
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   F5..         MOV     ?V0 + 0,A
   \   00002D   E4           CLR     A
   \   00002E   F5..         MOV     ?V0 + 1,A
   \   000030   F5..         MOV     ?V0 + 2,A
   \   000032   F5..         MOV     ?V0 + 3,A
   \   000034   8E82         MOV     DPL,R6
   \   000036   8F83         MOV     DPH,R7
   \   000038   A3           INC     DPTR
   \   000039   E0           MOVX    A,@DPTR
   \   00003A   F5..         MOV     ?V0 + 8,A
   \   00003C   E4           CLR     A
   \   00003D   F5..         MOV     ?V0 + 9,A
   \   00003F   F5..         MOV     ?V0 + 10,A
   \   000041   F5..         MOV     ?V0 + 11,A
   \   000043   7408         MOV     A,#0x8
   \   000045   78..         MOV     R0,#?V0 + 8
   \   000047   12....       LCALL   ?L_SHL
   \   00004A   78..         MOV     R0,#?V0 + 0
   \   00004C   79..         MOV     R1,#?V0 + 8
   \   00004E   12....       LCALL   ?L_ADD
   \   000051   8E82         MOV     DPL,R6
   \   000053   8F83         MOV     DPH,R7
   \   000055   A3           INC     DPTR
   \   000056   A3           INC     DPTR
   \   000057   E0           MOVX    A,@DPTR
   \   000058   F5..         MOV     ?V0 + 8,A
   \   00005A   E4           CLR     A
   \   00005B   F5..         MOV     ?V0 + 9,A
   \   00005D   F5..         MOV     ?V0 + 10,A
   \   00005F   F5..         MOV     ?V0 + 11,A
   \   000061   7410         MOV     A,#0x10
   \   000063   78..         MOV     R0,#?V0 + 8
   \   000065   12....       LCALL   ?L_SHL
   \   000068   78..         MOV     R0,#?V0 + 0
   \   00006A   79..         MOV     R1,#?V0 + 8
   \   00006C   12....       LCALL   ?L_ADD
   \   00006F   8E82         MOV     DPL,R6
   \   000071   8F83         MOV     DPH,R7
   \   000073   A3           INC     DPTR
   \   000074   A3           INC     DPTR
   \   000075   A3           INC     DPTR
   \   000076   E0           MOVX    A,@DPTR
   \   000077   F5..         MOV     ?V0 + 8,A
   \   000079   E4           CLR     A
   \   00007A   F5..         MOV     ?V0 + 9,A
   \   00007C   F5..         MOV     ?V0 + 10,A
   \   00007E   F5..         MOV     ?V0 + 11,A
   \   000080   7418         MOV     A,#0x18
   \   000082   78..         MOV     R0,#?V0 + 8
   \   000084   12....       LCALL   ?L_SHL
   \   000087   78..         MOV     R0,#?V0 + 0
   \   000089   79..         MOV     R1,#?V0 + 8
   \   00008B   12....       LCALL   ?L_ADD
   \   00008E   85....       MOV     ?V0 + 4,?V0 + 0
   \   000091   85....       MOV     ?V0 + 5,?V0 + 1
   \   000094   85....       MOV     ?V0 + 6,?V0 + 2
   \   000097   85....       MOV     ?V0 + 7,?V0 + 3
    787          
    788            while (pItem != NULL)
   \                     ??MT_AfDataRetrieve_0:
   \   00009A   E5..         MOV     A,?V0 + 14
   \   00009C   45..         ORL     A,?V0 + 15
   \   00009E   602D         JZ      ??MT_AfDataRetrieve_1
    789            {
    790              pPrev = pItem;
   \   0000A0   85..82       MOV     DPL,?XSP + 0
   \   0000A3   85..83       MOV     DPH,?XSP + 1
   \   0000A6   E5..         MOV     A,?V0 + 14
   \   0000A8   F0           MOVX    @DPTR,A
   \   0000A9   A3           INC     DPTR
   \   0000AA   E5..         MOV     A,?V0 + 15
   \   0000AC   F0           MOVX    @DPTR,A
    791              if (pItem->timestamp == timestamp)
   \   0000AD   85..82       MOV     DPL,?V0 + 14
   \   0000B0   85..83       MOV     DPH,?V0 + 15
   \   0000B3   A3           INC     DPTR
   \   0000B4   A3           INC     DPTR
   \   0000B5   A3           INC     DPTR
   \   0000B6   A3           INC     DPTR
   \   0000B7   78..         MOV     R0,#?V0 + 4
   \   0000B9   12....       LCALL   ?L_EQ_X
   \   0000BC   600F         JZ      ??MT_AfDataRetrieve_1
    792              {
    793                break;
    794              }
    795              pItem = pItem->next;
   \   0000BE   85..82       MOV     DPL,?V0 + 14
   \   0000C1   85..83       MOV     DPH,?V0 + 15
   \   0000C4   E0           MOVX    A,@DPTR
   \   0000C5   F5..         MOV     ?V0 + 14,A
   \   0000C7   A3           INC     DPTR
   \   0000C8   E0           MOVX    A,@DPTR
   \   0000C9   F5..         MOV     ?V0 + 15,A
   \   0000CB   80CD         SJMP    ??MT_AfDataRetrieve_0
    796            }
    797          
    798            if (pItem != NULL)
   \                     ??MT_AfDataRetrieve_1:
   \   0000CD   E5..         MOV     A,?V0 + 14
   \   0000CF   45..         ORL     A,?V0 + 15
   \   0000D1   7003         JNZ     $+5
   \   0000D3   02....       LJMP    ??MT_AfDataRetrieve_2 & 0xFFFF
    799            {
    800              uint16 idx;
    801              uint8 *pRsp;
    802          
    803              pBuf += 4;
   \   0000D6   EE           MOV     A,R6
   \   0000D7   2404         ADD     A,#0x4
   \   0000D9   FE           MOV     R6,A
   \   0000DA   EF           MOV     A,R7
   \   0000DB   3400         ADDC    A,#0x0
   \   0000DD   FF           MOV     R7,A
    804              idx = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   0000DE   8E82         MOV     DPL,R6
   \   0000E0   8F83         MOV     DPH,R7
   \   0000E2   E0           MOVX    A,@DPTR
   \   0000E3   FA           MOV     R2,A
   \   0000E4   7B00         MOV     R3,#0x0
   \   0000E6   8E82         MOV     DPL,R6
   \   0000E8   8F83         MOV     DPH,R7
   \   0000EA   A3           INC     DPTR
   \   0000EB   E0           MOVX    A,@DPTR
   \   0000EC   F8           MOV     R0,A
   \   0000ED   7900         MOV     R1,#0x0
   \   0000EF   E4           CLR     A
   \   0000F0   C8           XCH     A,R0
   \   0000F1   F9           MOV     R1,A
   \   0000F2   EA           MOV     A,R2
   \   0000F3   28           ADD     A,R0
   \   0000F4   F8           MOV     R0,A
   \   0000F5   EB           MOV     A,R3
   \   0000F6   39           ADDC    A,R1
   \   0000F7   F9           MOV     R1,A
   \   0000F8   88..         MOV     ?V0 + 10,R0
   \   0000FA   89..         MOV     ?V0 + 11,R1
    805              len = pBuf[2];
   \   0000FC   8E82         MOV     DPL,R6
   \   0000FE   8F83         MOV     DPH,R7
   \   000100   A3           INC     DPTR
   \   000101   A3           INC     DPTR
   \   000102   E0           MOVX    A,@DPTR
   \   000103   F5..         MOV     ?V0 + 12,A
    806          
    807              if (len == 0)  // Indication to delete the afIncomingMSGPacket.
   \   000105   E5..         MOV     A,?V0 + 12
   \   000107   7052         JNZ     ??MT_AfDataRetrieve_3
    808              {
    809                if (pMtAfInMsgList == pItem)
   \   000109   90....       MOV     DPTR,#pMtAfInMsgList
   \   00010C   E0           MOVX    A,@DPTR
   \   00010D   F8           MOV     R0,A
   \   00010E   A3           INC     DPTR
   \   00010F   E0           MOVX    A,@DPTR
   \   000110   F9           MOV     R1,A
   \   000111   E5..         MOV     A,?V0 + 14
   \   000113   68           XRL     A,R0
   \   000114   7003         JNZ     ??MT_AfDataRetrieve_4
   \   000116   E5..         MOV     A,?V0 + 15
   \   000118   69           XRL     A,R1
   \                     ??MT_AfDataRetrieve_4:
   \   000119   7015         JNZ     ??MT_AfDataRetrieve_5
    810                {
    811                  pMtAfInMsgList = pItem->next;
   \   00011B   85..82       MOV     DPL,?V0 + 14
   \   00011E   85..83       MOV     DPH,?V0 + 15
   \   000121   E0           MOVX    A,@DPTR
   \   000122   F8           MOV     R0,A
   \   000123   A3           INC     DPTR
   \   000124   E0           MOVX    A,@DPTR
   \   000125   F9           MOV     R1,A
   \   000126   90....       MOV     DPTR,#pMtAfInMsgList
   \   000129   E8           MOV     A,R0
   \   00012A   F0           MOVX    @DPTR,A
   \   00012B   A3           INC     DPTR
   \   00012C   E9           MOV     A,R1
   \   00012D   F0           MOVX    @DPTR,A
   \   00012E   801E         SJMP    ??MT_AfDataRetrieve_6
    812                }
    813                else
    814                {
    815                  pPrev->next = pItem->next;
   \                     ??MT_AfDataRetrieve_5:
   \   000130   85..82       MOV     DPL,?V0 + 14
   \   000133   85..83       MOV     DPH,?V0 + 15
   \   000136   E0           MOVX    A,@DPTR
   \   000137   FA           MOV     R2,A
   \   000138   A3           INC     DPTR
   \   000139   E0           MOVX    A,@DPTR
   \   00013A   FB           MOV     R3,A
   \   00013B   85..82       MOV     DPL,?XSP + 0
   \   00013E   85..83       MOV     DPH,?XSP + 1
   \   000141   E0           MOVX    A,@DPTR
   \   000142   F8           MOV     R0,A
   \   000143   A3           INC     DPTR
   \   000144   E0           MOVX    A,@DPTR
   \   000145   F583         MOV     DPH,A
   \   000147   8882         MOV     DPL,R0
   \   000149   EA           MOV     A,R2
   \   00014A   F0           MOVX    @DPTR,A
   \   00014B   A3           INC     DPTR
   \   00014C   EB           MOV     A,R3
   \   00014D   F0           MOVX    @DPTR,A
    816                }
    817                (void)osal_mem_free(pItem);
   \                     ??MT_AfDataRetrieve_6:
   \   00014E                ; Setup parameters for call to function osal_mem_free
   \   00014E   AA..         MOV     R2,?V0 + 14
   \   000150   AB..         MOV     R3,?V0 + 15
   \   000152   12....       LCALL   ??osal_mem_free?relay
    818                rtrn = afStatus_SUCCESS;
   \   000155   75..00       MOV     ?V0 + 13,#0x0
   \   000158   02....       LJMP    ??MT_AfDataRetrieve_2 & 0xFFFF
    819              }
    820              else if ((pRsp = osal_mem_alloc(len + MT_AF_RTV_HDR_SZ)) == NULL)
   \                     ??MT_AfDataRetrieve_3:
   \   00015B                ; Setup parameters for call to function osal_mem_alloc
   \   00015B   85....       MOV     ?V0 + 0,?V0 + 12
   \   00015E   75..00       MOV     ?V0 + 1,#0x0
   \   000161   E5..         MOV     A,?V0 + 0
   \   000163   2402         ADD     A,#0x2
   \   000165   FA           MOV     R2,A
   \   000166   E5..         MOV     A,?V0 + 1
   \   000168   3400         ADDC    A,#0x0
   \   00016A   FB           MOV     R3,A
   \   00016B   12....       LCALL   ??osal_mem_alloc?relay
   \   00016E   8A..         MOV     ?V0 + 0,R2
   \   000170   8B..         MOV     ?V0 + 1,R3
   \   000172   A8..         MOV     R0,?V0 + 0
   \   000174   A9..         MOV     R1,?V0 + 1
   \   000176   88..         MOV     ?V0 + 8,R0
   \   000178   89..         MOV     ?V0 + 9,R1
   \   00017A   E8           MOV     A,R0
   \   00017B   49           ORL     A,R1
   \   00017C   7008         JNZ     ??MT_AfDataRetrieve_7
    821              {
    822                rtrn = afStatus_MEM_FAIL;
   \   00017E   75..10       MOV     ?V0 + 13,#0x10
    823                len = 0;
   \   000181   75..00       MOV     ?V0 + 12,#0x0
   \   000184   806F         SJMP    ??MT_AfDataRetrieve_2
    824              }
    825              else
    826              {
    827                pRsp[0] = ZSuccess;
   \                     ??MT_AfDataRetrieve_7:
   \   000186   85..82       MOV     DPL,?V0 + 8
   \   000189   85..83       MOV     DPH,?V0 + 9
   \   00018C   7400         MOV     A,#0x0
   \   00018E   F0           MOVX    @DPTR,A
    828                pRsp[1] = len;
   \   00018F   E5..         MOV     A,?V0 + 12
   \   000191   85..82       MOV     DPL,?V0 + 8
   \   000194   85..83       MOV     DPH,?V0 + 9
   \   000197   A3           INC     DPTR
   \   000198   E5..         MOV     A,?V0 + 12
   \   00019A   F0           MOVX    @DPTR,A
    829                (void)osal_memcpy(pRsp + MT_AF_RTV_HDR_SZ, pItem->data+idx, len);
   \   00019B                ; Setup parameters for call to function osal_memcpy
   \   00019B   85..82       MOV     DPL,?V0 + 14
   \   00019E   85..83       MOV     DPH,?V0 + 15
   \   0001A1   A3           INC     DPTR
   \   0001A2   A3           INC     DPTR
   \   0001A3   E0           MOVX    A,@DPTR
   \   0001A4   25..         ADD     A,?V0 + 10
   \   0001A6   F5..         MOV     ?V0 + 0,A
   \   0001A8   A3           INC     DPTR
   \   0001A9   E0           MOVX    A,@DPTR
   \   0001AA   35..         ADDC    A,?V0 + 11
   \   0001AC   F5..         MOV     ?V0 + 1,A
   \   0001AE   75..00       MOV     ?V0 + 2,#0x0
   \   0001B1   78..         MOV     R0,#?V0 + 0
   \   0001B3   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0001B6   85....       MOV     ?V0 + 0,?V0 + 12
   \   0001B9   75..00       MOV     ?V0 + 1,#0x0
   \   0001BC   AC..         MOV     R4,?V0 + 0
   \   0001BE   AD..         MOV     R5,?V0 + 1
   \   0001C0   E5..         MOV     A,?V0 + 8
   \   0001C2   2402         ADD     A,#0x2
   \   0001C4   FA           MOV     R2,A
   \   0001C5   E5..         MOV     A,?V0 + 9
   \   0001C7   3400         ADDC    A,#0x0
   \   0001C9   FB           MOV     R3,A
   \   0001CA   12....       LCALL   ??osal_memcpy?relay
   \   0001CD   7403         MOV     A,#0x3
   \   0001CF   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001D2   8A..         MOV     ?V0 + 0,R2
   \   0001D4   8B..         MOV     ?V0 + 1,R3
   \   0001D6   85....       MOV     ?V0 + 2,?V0 + 0
   \   0001D9   85....       MOV     ?V0 + 3,?V0 + 1
    830                MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    831                                                     MT_AF_DATA_RETRIEVE, len + MT_AF_RTV_HDR_SZ, pRsp);
   \   0001DC                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0001DC   AC..         MOV     R4,?V0 + 8
   \   0001DE   AD..         MOV     R5,?V0 + 9
   \   0001E0   7402         MOV     A,#0x2
   \   0001E2   25..         ADD     A,?V0 + 12
   \   0001E4   FB           MOV     R3,A
   \   0001E5   7A12         MOV     R2,#0x12
   \   0001E7   7964         MOV     R1,#0x64
   \   0001E9   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    832                (void)osal_mem_free(pRsp);
   \   0001EC                ; Setup parameters for call to function osal_mem_free
   \   0001EC   AA..         MOV     R2,?V0 + 8
   \   0001EE   AB..         MOV     R3,?V0 + 9
   \   0001F0   12....       LCALL   ??osal_mem_free?relay
    833                return;
   \   0001F3   8020         SJMP    ??MT_AfDataRetrieve_8
    834              }
    835            }
    836          
    837            pBuf[0] = rtrn;
   \                     ??MT_AfDataRetrieve_2:
   \   0001F5   E5..         MOV     A,?V0 + 13
   \   0001F7   8E82         MOV     DPL,R6
   \   0001F9   8F83         MOV     DPH,R7
   \   0001FB   E5..         MOV     A,?V0 + 13
   \   0001FD   F0           MOVX    @DPTR,A
    838            pBuf[1] = len;
   \   0001FE   E5..         MOV     A,?V0 + 12
   \   000200   8E82         MOV     DPL,R6
   \   000202   8F83         MOV     DPH,R7
   \   000204   A3           INC     DPTR
   \   000205   E5..         MOV     A,?V0 + 12
   \   000207   F0           MOVX    @DPTR,A
    839            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    840                                                 MT_AF_DATA_RETRIEVE, MT_AF_RTV_HDR_SZ, pBuf);
   \   000208                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000208   EE           MOV     A,R6
   \   000209   FC           MOV     R4,A
   \   00020A   EF           MOV     A,R7
   \   00020B   FD           MOV     R5,A
   \   00020C   7B02         MOV     R3,#0x2
   \   00020E   7A12         MOV     R2,#0x12
   \   000210   7964         MOV     R1,#0x64
   \   000212   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    841          }
   \                     ??MT_AfDataRetrieve_8:
   \   000215   7402         MOV     A,#0x2
   \   000217   12....       LCALL   ?DEALLOC_XSTACK8
   \   00021A   7F10         MOV     R7,#0x10
   \   00021C   02....       LJMP    ?BANKED_LEAVE_XDATA
    842          
    843          /**************************************************************************************************
    844           * @fn          MT_AfDataStore
    845           *
    846           * @brief   Process AF Data Store command to incrementally store the data buffer for very large
    847           *          outgoing AF message.
    848           *
    849           * input parameters
    850           *
    851           * @param pBuf - pointer to the received buffer
    852           *
    853           * output parameters
    854           *
    855           * @param rtrn - AF-Status of the operation.
    856           *
    857           * @return      None.
    858           **************************************************************************************************
    859           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    860          void MT_AfDataStore(uint8 *pBuf)
   \                     MT_AfDataStore:
    861          {
   \   000000   74F1         MOV     A,#-0xf
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 15
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV     A,#-0x1
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    862            uint16 idx;
    863            uint8 len, rtrn = afStatus_FAILED;
   \   00000E   85..82       MOV     DPL,?XSP + 0
   \   000011   85..83       MOV     DPH,?XSP + 1
   \   000014   7401         MOV     A,#0x1
   \   000016   F0           MOVX    @DPTR,A
    864          
    865            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000017   EE           MOV     A,R6
   \   000018   2403         ADD     A,#0x3
   \   00001A   FE           MOV     R6,A
   \   00001B   EF           MOV     A,R7
   \   00001C   3400         ADDC    A,#0x0
   \   00001E   FF           MOV     R7,A
    866            idx = BUILD_UINT16(pBuf[0], pBuf[1]);
   \   00001F   8E82         MOV     DPL,R6
   \   000021   8F83         MOV     DPH,R7
   \   000023   E0           MOVX    A,@DPTR
   \   000024   FA           MOV     R2,A
   \   000025   7B00         MOV     R3,#0x0
   \   000027   8E82         MOV     DPL,R6
   \   000029   8F83         MOV     DPH,R7
   \   00002B   A3           INC     DPTR
   \   00002C   E0           MOVX    A,@DPTR
   \   00002D   F8           MOV     R0,A
   \   00002E   7900         MOV     R1,#0x0
   \   000030   E4           CLR     A
   \   000031   C8           XCH     A,R0
   \   000032   F9           MOV     R1,A
   \   000033   EA           MOV     A,R2
   \   000034   28           ADD     A,R0
   \   000035   F8           MOV     R0,A
   \   000036   EB           MOV     A,R3
   \   000037   39           ADDC    A,R1
   \   000038   F9           MOV     R1,A
   \   000039   88..         MOV     ?V0 + 0,R0
   \   00003B   89..         MOV     ?V0 + 1,R1
    867            len = pBuf[2];
   \   00003D   8E82         MOV     DPL,R6
   \   00003F   8F83         MOV     DPH,R7
   \   000041   A3           INC     DPTR
   \   000042   A3           INC     DPTR
   \   000043   E0           MOVX    A,@DPTR
   \   000044   F5..         MOV     ?V0 + 2,A
    868            pBuf += 3;
   \   000046   EE           MOV     A,R6
   \   000047   2403         ADD     A,#0x3
   \   000049   FE           MOV     R6,A
   \   00004A   EF           MOV     A,R7
   \   00004B   3400         ADDC    A,#0x0
   \   00004D   FF           MOV     R7,A
    869          
    870            if (pMtAfDataReq == NULL)
   \   00004E   90....       MOV     DPTR,#pMtAfDataReq
   \   000051   E0           MOVX    A,@DPTR
   \   000052   F8           MOV     R0,A
   \   000053   A3           INC     DPTR
   \   000054   E0           MOVX    A,@DPTR
   \   000055   F9           MOV     R1,A
   \   000056   E8           MOV     A,R0
   \   000057   49           ORL     A,R1
   \   000058   700C         JNZ     ??MT_AfDataStore_0
    871            {
    872              rtrn = afStatus_MEM_FAIL;
   \   00005A   85..82       MOV     DPL,?XSP + 0
   \   00005D   85..83       MOV     DPH,?XSP + 1
   \   000060   7410         MOV     A,#0x10
   \   000062   F0           MOVX    @DPTR,A
   \   000063   02....       LJMP    ??MT_AfDataStore_1 & 0xFFFF
    873            }
    874            else if (len == 0)  // Indication to send the message.
   \                     ??MT_AfDataStore_0:
   \   000066   E5..         MOV     A,?V0 + 2
   \   000068   6003         JZ      $+5
   \   00006A   02....       LJMP    ??MT_AfDataStore_2 & 0xFFFF
    875            {
    876              rtrn = AF_DataRequest(&(pMtAfDataReq->dstAddr), pMtAfDataReq->epDesc, pMtAfDataReq->cId,
    877                                      pMtAfDataReq->dataLen,  pMtAfDataReq->data,
    878                                    &(pMtAfDataReq->transId), pMtAfDataReq->txOpts, pMtAfDataReq->radius);
   \   00006D                ; Setup parameters for call to function AF_DataRequest
   \   00006D   90....       MOV     DPTR,#pMtAfDataReq
   \   000070   E0           MOVX    A,@DPTR
   \   000071   F8           MOV     R0,A
   \   000072   A3           INC     DPTR
   \   000073   E0           MOVX    A,@DPTR
   \   000074   C8           XCH     A,R0
   \   000075   2416         ADD     A,#0x16
   \   000077   F582         MOV     DPL,A
   \   000079   E8           MOV     A,R0
   \   00007A   3400         ADDC    A,#0x0
   \   00007C   F583         MOV     DPH,A
   \   00007E   E0           MOVX    A,@DPTR
   \   00007F   F5..         MOV     ?V0 + 3,A
   \   000081   78..         MOV     R0,#?V0 + 3
   \   000083   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000086   90....       MOV     DPTR,#pMtAfDataReq
   \   000089   E0           MOVX    A,@DPTR
   \   00008A   2414         ADD     A,#0x14
   \   00008C   F5..         MOV     ?V0 + 4,A
   \   00008E   A3           INC     DPTR
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   3400         ADDC    A,#0x0
   \   000092   F5..         MOV     ?V0 + 5,A
   \   000094   78..         MOV     R0,#?V0 + 4
   \   000096   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000099   90....       MOV     DPTR,#pMtAfDataReq
   \   00009C   E0           MOVX    A,@DPTR
   \   00009D   F8           MOV     R0,A
   \   00009E   A3           INC     DPTR
   \   00009F   E0           MOVX    A,@DPTR
   \   0000A0   F583         MOV     DPH,A
   \   0000A2   8882         MOV     DPL,R0
   \   0000A4   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0000A7   90....       MOV     DPTR,#pMtAfDataReq
   \   0000AA   E0           MOVX    A,@DPTR
   \   0000AB   F8           MOV     R0,A
   \   0000AC   A3           INC     DPTR
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   C8           XCH     A,R0
   \   0000AF   2412         ADD     A,#0x12
   \   0000B1   F582         MOV     DPL,A
   \   0000B3   E8           MOV     A,R0
   \   0000B4   3400         ADDC    A,#0x0
   \   0000B6   F583         MOV     DPH,A
   \   0000B8   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0000BB   90....       MOV     DPTR,#pMtAfDataReq
   \   0000BE   E0           MOVX    A,@DPTR
   \   0000BF   F8           MOV     R0,A
   \   0000C0   A3           INC     DPTR
   \   0000C1   E0           MOVX    A,@DPTR
   \   0000C2   C8           XCH     A,R0
   \   0000C3   2410         ADD     A,#0x10
   \   0000C5   F582         MOV     DPL,A
   \   0000C7   E8           MOV     A,R0
   \   0000C8   3400         ADDC    A,#0x0
   \   0000CA   F583         MOV     DPH,A
   \   0000CC   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0000CF   90....       MOV     DPTR,#pMtAfDataReq
   \   0000D2   E0           MOVX    A,@DPTR
   \   0000D3   F8           MOV     R0,A
   \   0000D4   A3           INC     DPTR
   \   0000D5   E0           MOVX    A,@DPTR
   \   0000D6   C8           XCH     A,R0
   \   0000D7   2415         ADD     A,#0x15
   \   0000D9   F582         MOV     DPL,A
   \   0000DB   E8           MOV     A,R0
   \   0000DC   3400         ADDC    A,#0x0
   \   0000DE   F583         MOV     DPH,A
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   F9           MOV     R1,A
   \   0000E2   90....       MOV     DPTR,#pMtAfDataReq
   \   0000E5   E0           MOVX    A,@DPTR
   \   0000E6   F8           MOV     R0,A
   \   0000E7   A3           INC     DPTR
   \   0000E8   E0           MOVX    A,@DPTR
   \   0000E9   C8           XCH     A,R0
   \   0000EA   240E         ADD     A,#0xe
   \   0000EC   F582         MOV     DPL,A
   \   0000EE   E8           MOV     A,R0
   \   0000EF   3400         ADDC    A,#0x0
   \   0000F1   F583         MOV     DPH,A
   \   0000F3   E0           MOVX    A,@DPTR
   \   0000F4   FC           MOV     R4,A
   \   0000F5   A3           INC     DPTR
   \   0000F6   E0           MOVX    A,@DPTR
   \   0000F7   FD           MOV     R5,A
   \   0000F8   90....       MOV     DPTR,#pMtAfDataReq
   \   0000FB   E0           MOVX    A,@DPTR
   \   0000FC   2402         ADD     A,#0x2
   \   0000FE   FA           MOV     R2,A
   \   0000FF   A3           INC     DPTR
   \   000100   E0           MOVX    A,@DPTR
   \   000101   3400         ADDC    A,#0x0
   \   000103   FB           MOV     R3,A
   \   000104   12....       LCALL   ??AF_DataRequest?relay
   \   000107   7409         MOV     A,#0x9
   \   000109   12....       LCALL   ?DEALLOC_XSTACK8
   \   00010C   E9           MOV     A,R1
   \   00010D   85..82       MOV     DPL,?XSP + 0
   \   000110   85..83       MOV     DPH,?XSP + 1
   \   000113   F0           MOVX    @DPTR,A
    879              (void)osal_mem_free(pMtAfDataReq);
   \   000114                ; Setup parameters for call to function osal_mem_free
   \   000114   90....       MOV     DPTR,#pMtAfDataReq
   \   000117   E0           MOVX    A,@DPTR
   \   000118   FA           MOV     R2,A
   \   000119   A3           INC     DPTR
   \   00011A   E0           MOVX    A,@DPTR
   \   00011B   FB           MOV     R3,A
   \   00011C   12....       LCALL   ??osal_mem_free?relay
    880              pMtAfDataReq = NULL;
   \   00011F   90....       MOV     DPTR,#pMtAfDataReq
   \   000122   7400         MOV     A,#0x0
   \   000124   F0           MOVX    @DPTR,A
   \   000125   A3           INC     DPTR
   \   000126   7400         MOV     A,#0x0
   \   000128   F0           MOVX    @DPTR,A
   \   000129   8043         SJMP    ??MT_AfDataStore_1
    881            }
    882            else
    883            {
    884              (void)osal_memcpy(pMtAfDataReq->data+idx, pBuf, len);
   \                     ??MT_AfDataStore_2:
   \   00012B                ; Setup parameters for call to function osal_memcpy
   \   00012B   8E..         MOV     ?V0 + 4,R6
   \   00012D   8F..         MOV     ?V0 + 5,R7
   \   00012F   75..00       MOV     ?V0 + 6,#0x0
   \   000132   78..         MOV     R0,#?V0 + 4
   \   000134   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000137   85....       MOV     ?V0 + 4,?V0 + 2
   \   00013A   75..00       MOV     ?V0 + 5,#0x0
   \   00013D   AC..         MOV     R4,?V0 + 4
   \   00013F   AD..         MOV     R5,?V0 + 5
   \   000141   90....       MOV     DPTR,#pMtAfDataReq
   \   000144   E0           MOVX    A,@DPTR
   \   000145   F8           MOV     R0,A
   \   000146   A3           INC     DPTR
   \   000147   E0           MOVX    A,@DPTR
   \   000148   F583         MOV     DPH,A
   \   00014A   8882         MOV     DPL,R0
   \   00014C   E0           MOVX    A,@DPTR
   \   00014D   25..         ADD     A,?V0 + 0
   \   00014F   FA           MOV     R2,A
   \   000150   A3           INC     DPTR
   \   000151   E0           MOVX    A,@DPTR
   \   000152   35..         ADDC    A,?V0 + 1
   \   000154   FB           MOV     R3,A
   \   000155   12....       LCALL   ??osal_memcpy?relay
   \   000158   7403         MOV     A,#0x3
   \   00015A   12....       LCALL   ?DEALLOC_XSTACK8
   \   00015D   8A..         MOV     ?V0 + 4,R2
   \   00015F   8B..         MOV     ?V0 + 5,R3
   \   000161   A8..         MOV     R0,?V0 + 4
   \   000163   A9..         MOV     R1,?V0 + 5
    885              rtrn = afStatus_SUCCESS;
   \   000165   85..82       MOV     DPL,?XSP + 0
   \   000168   85..83       MOV     DPH,?XSP + 1
   \   00016B   7400         MOV     A,#0x0
   \   00016D   F0           MOVX    @DPTR,A
    886            }
    887          
    888            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    889                                                                          MT_AF_DATA_STORE, 1, &rtrn);
   \                     ??MT_AfDataStore_1:
   \   00016E                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00016E   85..82       MOV     DPL,?XSP + 0
   \   000171   85..83       MOV     DPH,?XSP + 1
   \   000174   AC82         MOV     R4,DPL
   \   000176   AD83         MOV     R5,DPH
   \   000178   7B01         MOV     R3,#0x1
   \   00017A   7A11         MOV     R2,#0x11
   \   00017C   7964         MOV     R1,#0x64
   \   00017E   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    890          }
   \   000181   7401         MOV     A,#0x1
   \   000183   12....       LCALL   ?DEALLOC_XSTACK8
   \   000186   7F07         MOV     R7,#0x7
   \   000188   02....       LJMP    ?BANKED_LEAVE_XDATA
    891          
    892          /**************************************************************************************************
    893           * @fn          MT_AfAPSF_ConfigSet
    894           *
    895           * @brief       This function is the MT proxy for afAPSF_ConfigSet().
    896           *
    897           * input parameters
    898           *
    899           * @param       pBuf - Pointer to the received buffer.
    900           *
    901           * output parameters
    902           *
    903           * None.
    904           *
    905           * @return      None.
    906           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    907          static void MT_AfAPSF_ConfigSet(uint8 *pBuf)
   \                     MT_AfAPSF_ConfigSet:
    908          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    909            afAPSF_Config_t cfg = { pBuf[MT_RPC_POS_DAT0+1], pBuf[MT_RPC_POS_DAT0+2] };
   \   00000E   8E82         MOV     DPL,R6
   \   000010   8F83         MOV     DPH,R7
   \   000012   A3           INC     DPTR
   \   000013   A3           INC     DPTR
   \   000014   A3           INC     DPTR
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   C0E0         PUSH    A
   \   000019   7401         MOV     A,#0x1
   \   00001B   12....       LCALL   ?XSTACK_DISP0_8
   \   00001E   D0E0         POP     A
   \   000020   F0           MOVX    @DPTR,A
   \   000021   8E82         MOV     DPL,R6
   \   000023   8F83         MOV     DPH,R7
   \   000025   A3           INC     DPTR
   \   000026   A3           INC     DPTR
   \   000027   A3           INC     DPTR
   \   000028   A3           INC     DPTR
   \   000029   A3           INC     DPTR
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   C0E0         PUSH    A
   \   00002D   7402         MOV     A,#0x2
   \   00002F   12....       LCALL   ?XSTACK_DISP0_8
   \   000032   D0E0         POP     A
   \   000034   F0           MOVX    @DPTR,A
    910            afStatus_t rtrn = afAPSF_ConfigSet(pBuf[MT_RPC_POS_DAT0], &cfg);
   \   000035                ; Setup parameters for call to function afAPSF_ConfigSet
   \   000035   7401         MOV     A,#0x1
   \   000037   12....       LCALL   ?XSTACK_DISP0_8
   \   00003A   AA82         MOV     R2,DPL
   \   00003C   AB83         MOV     R3,DPH
   \   00003E   8E82         MOV     DPL,R6
   \   000040   8F83         MOV     DPH,R7
   \   000042   A3           INC     DPTR
   \   000043   A3           INC     DPTR
   \   000044   A3           INC     DPTR
   \   000045   E0           MOVX    A,@DPTR
   \   000046   F9           MOV     R1,A
   \   000047   12....       LCALL   ??afAPSF_ConfigSet?relay
   \   00004A   E9           MOV     A,R1
   \   00004B   85..82       MOV     DPL,?XSP + 0
   \   00004E   85..83       MOV     DPH,?XSP + 1
   \   000051   F0           MOVX    @DPTR,A
    911          
    912            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    913                                                 MT_AF_APSF_CONFIG_SET, 1, (uint8 *)&rtrn);
   \   000052                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000052   85..82       MOV     DPL,?XSP + 0
   \   000055   85..83       MOV     DPH,?XSP + 1
   \   000058   AC82         MOV     R4,DPL
   \   00005A   AD83         MOV     R5,DPH
   \   00005C   7B01         MOV     R3,#0x1
   \   00005E   7A13         MOV     R2,#0x13
   \   000060   7964         MOV     R1,#0x64
   \   000062   12....       LCALL   ??MT_BuildAndSendZToolResponse?relay
    914          }
   \   000065   7403         MOV     A,#0x3
   \   000067   12....       LCALL   ?DEALLOC_XSTACK8
   \   00006A   7F01         MOV     R7,#0x1
   \   00006C   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfExec?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfExec

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfCommandProcessing?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfCommandProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfRegister?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfRegister

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataRequest?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataRequestSrcRtg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRequestSrcRtg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfInterPanCtl?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfInterPanCtl

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfIncomingMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfIncomingMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataRetrieve?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRetrieve

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfDataStore?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataStore

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??MT_AfAPSF_ConfigSet?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfAPSF_ConfigSet
    915          
    916          /***************************************************************************************************
    917          ***************************************************************************************************/

   Maximum stack usage in bytes:

   ISTACK PSTACK XSTACK Function
   ------ ------ ------ --------
       1      0     21  MT_AfAPSF_ConfigSet
                          0 0 12 -> MT_BuildAndSendZToolResponse
                          0 0 12 -> afAPSF_ConfigSet
       0      0      9  MT_AfCommandProcessing
                          0 0  9 -> MT_AfAPSF_ConfigSet
                          0 0  9 -> MT_AfDataRequest
                          0 0  9 -> MT_AfDataRequestSrcRtg
                          0 0  9 -> MT_AfDataRetrieve
                          0 0  9 -> MT_AfDataStore
                          0 0  9 -> MT_AfInterPanCtl
                          0 0  9 -> MT_AfRegister
       1      0     12  MT_AfDataConfirm
                          0 0 12 -> MT_BuildAndSendZToolResponse
       1      0     57  MT_AfDataRequest
                          0 0 48 -> AF_DataRequest
                          0 0 39 -> MT_BuildAndSendZToolResponse
                          0 0 39 -> afFindEndPointDesc
                          0 0 39 -> osal_mem_alloc
                          0 0 42 -> osal_memcpy
                          0 0 39 -> osal_set_event
                          0 0 39 -> osal_start_timerEx
       1      0     59  MT_AfDataRequestSrcRtg
                          0 0 50 -> AF_DataRequestSrcRtg
                          0 0 38 -> MT_BuildAndSendZToolResponse
                          0 0 38 -> afFindEndPointDesc
                          0 0 38 -> osal_mem_alloc
                          0 0 38 -> osal_mem_free
                          0 0 38 -> osal_memset
       1      0     38  MT_AfDataRetrieve
                          0 0 26 -> MT_BuildAndSendZToolResponse
                          0 0 26 -> osal_mem_alloc
                          0 0 26 -> osal_mem_free
                          0 0 29 -> osal_memcpy
       1      0     34  MT_AfDataStore
                          0 0 25 -> AF_DataRequest
                          0 0 16 -> MT_BuildAndSendZToolResponse
                          0 0 16 -> osal_mem_free
                          0 0 19 -> osal_memcpy
       1      0     10  MT_AfExec
                          0 0 10 -> osal_mem_free
                          0 0 10 -> osal_set_event
                          0 0 10 -> osal_start_timerEx
       1      0     28  MT_AfIncomingMsg
                          0 0 25 -> MT_BuildAndSendZToolResponse
                          0 0 25 -> StubAPS_InterPan
                          0 0 25 -> osal_mem_alloc
                          0 0 25 -> osal_mem_free
                          0 0 28 -> osal_memcpy
                          0 0 25 -> osal_set_event
                          0 0 25 -> osal_start_timerEx
       1      0     27  MT_AfInterPanCtl
                          0 0 18 -> MT_BuildAndSendZToolResponse
                          0 0 18 -> StubAPS_InterPan
                          0 0 18 -> StubAPS_RegisterApp
                          0 0 18 -> StubAPS_SetInterPanChannel
                          0 0 18 -> StubAPS_SetIntraPanChannel
                          0 0 18 -> afFindEndPointDesc
       1      0     24  MT_AfRegister
                          0 0 15 -> MT_BuildAndSendZToolResponse
                          0 0 15 -> MT_BuildEndpointDesc
                          0 0 15 -> afRegister
                          0 0 15 -> osal_mem_alloc
                          0 0 15 -> osal_mem_free


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ??MT_AfAPSF_ConfigSet?relay
       6  ??MT_AfCommandProcessing?relay
       6  ??MT_AfDataConfirm?relay
       6  ??MT_AfDataRequest?relay
       6  ??MT_AfDataRequestSrcRtg?relay
       6  ??MT_AfDataRetrieve?relay
       6  ??MT_AfDataStore?relay
       6  ??MT_AfExec?relay
       6  ??MT_AfIncomingMsg?relay
       6  ??MT_AfInterPanCtl?relay
       6  ??MT_AfRegister?relay
     111  MT_AfAPSF_ConfigSet
     118  MT_AfCommandProcessing
      91  MT_AfDataConfirm
    1059  MT_AfDataRequest
     592  MT_AfDataRequestSrcRtg
     543  MT_AfDataRetrieve
     395  MT_AfDataStore
     309  MT_AfExec
    1383  MT_AfIncomingMsg
     270  MT_AfInterPanCtl
     165  MT_AfRegister
       2  pMtAfDataReq
       2  pMtAfInMsgList

 
 5 036 bytes in segment BANKED_CODE
    66 bytes in segment BANK_RELAYS
     4 bytes in segment XDATA_Z
 
 5 102 bytes of CODE  memory
     4 bytes of XDATA memory

Errors: none
Warnings: none
