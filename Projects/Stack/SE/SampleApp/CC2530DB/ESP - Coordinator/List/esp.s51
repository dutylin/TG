///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.20.2.41139 for 8051            13/Jun/2013  13:50:22 /
// Copyright 2004-2013 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//                                                                            /
//    Source file        =  C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\Source\ESP\esp.c                   /
//    Command line       =  -f C:\Users\PedroZ\Documents\GitHub\TG\Projects\S /
//                          tack\SE\SampleApp\CC2530DB\..\..\..\Tools\CC2530D /
//                          B\f8wCoord.cfg (-DCPU32MHZ -DROOT=__near_func     /
//                          -DMAC_CFG_APP_PENDING_QUEUE=TRUE                  /
//                          -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8        /
//                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)   /
//                          -f C:\Users\PedroZ\Documents\GitHub\TG\Projects\S /
//                          tack\SE\SampleApp\CC2530DB\..\..\..\Tools\CC2530D /
//                          B\f8wConfig.cfg (-DZIGBEEPRO -DSECURE=0           /
//                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                 /
//                          -DDEFAULT_CHANLIST=0x00000800                     /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DLINK_STATUS_JITTER_MASK=0x007F                  /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40          /
//                          -DNWK_MAX_BINDING_ENTRIES=4                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DMAC_MAX_FRAME_SIZE=116       /
//                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const    /
//                          __code" -DGENERIC=__generic                       /
//                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000       /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100   /
//                          -DREJOIN_POLL_RATE=440) -f                        /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f /
//                          8wZCL.cfg (-DZCL_READ -DZCL_WRITE -DZCL_BASIC     /
//                          -DZCL_IDENTIFY -DZCL_ON_OFF -DZCL_KEY_ESTABLISH   /
//                          -DZCL_KEY_ESTABLISHMENT_KEY_GENERATE_TIMEOUT=4    /
//                          -DZCL_KEY_ESTABLISHMENT_MAC_GENERATE_TIMEOUT=10   /
//                          -DZCL_KEY_ESTABLISHMENT_EKEY_GENERATE_TIMEOUT=10  /
//                          -DZCL_LOAD_CONTROL -DZCL_SIMPLE_METERING          /
//                          -DZCL_PRICING -DZCL_MESSAGE -DZCL_TUNNELING       /
//                          -DZCL_TOU) -DZCL_DEVICE_MGMT                      /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\Source\ESP\esp.c -D                /
//                          TC_LINKKEY_JOIN -D ZTOOL_P1 -D MT_TASK -D         /
//                          MT_APP_FUNC -D MT_SYS_FUNC -D LCD_SUPPORTED -D    /
//                          INT_HEAP_LEN=2450 -D NV_INIT -D xNV_RESTORE -D    /
//                          ZCL_REPORT -D INTER_PAN -D                        /
//                          ZDSECMGR_TC_DEVICE_MAX=16 -D TEST_CERT_DATA -lC   /
//                          "C:\Users\PedroZ\Documents\GitHub\TG\Projects\Sta /
//                          ck\SE\SampleApp\CC2530DB\ESP -                    /
//                          Coordinator\List\" -lA "C:\Users\PedroZ\Documents /
//                          \GitHub\TG\Projects\Stack\SE\SampleApp\CC2530DB\E /
//                          SP - Coordinator\List\" --diag_suppress           /
//                          Pe001,Pa010 -o "C:\Users\PedroZ\Documents\GitHub\ /
//                          TG\Projects\Stack\SE\SampleApp\CC2530DB\ESP -     /
//                          Coordinator\Obj\" -e --no_cse --no_unroll         /
//                          --no_inline --no_code_motion --no_tbaa --debug    /
//                          --core=plain --dptr=16,1 --data_model=large       /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\ -I                       /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\Source\ -I             /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\Source\ -I          /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\  /
//                          -I C:\Users\PedroZ\Documents\GitHub\TG\Projects\S /
//                          tack\SE\SampleApp\CC2530DB\..\..\..\..\..\Compone /
//                          nts\hal\include\ -I C:\Users\PedroZ\Documents\Git /
//                          Hub\TG\Projects\Stack\SE\SampleApp\CC2530DB\..\.. /
//                          \..\..\..\Components\hal\target\CC2530EB\ -I      /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \mac\include\ -I C:\Users\PedroZ\Documents\GitHub /
//                          \TG\Projects\Stack\SE\SampleApp\CC2530DB\..\..\.. /
//                          \..\..\Components\mac\high_level\ -I              /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \mac\low_level\srf04\ -I                          /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \mac\low_level\srf04\single_chip\ -I              /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \mt\ -I C:\Users\PedroZ\Documents\GitHub\TG\Proje /
//                          cts\Stack\SE\SampleApp\CC2530DB\..\..\..\..\..\Co /
//                          mponents\osal\include\ -I                         /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \services\saddr\ -I C:\Users\PedroZ\Documents\Git /
//                          Hub\TG\Projects\Stack\SE\SampleApp\CC2530DB\..\.. /
//                          \..\..\..\Components\services\sdata\ -I           /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \stack\af\ -I C:\Users\PedroZ\Documents\GitHub\TG /
//                          \Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\.. /
//                          \..\Components\stack\nwk\ -I                      /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \stack\sapi\ -I C:\Users\PedroZ\Documents\GitHub\ /
//                          TG\Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\ /
//                          ..\..\Components\stack\sec\ -I                    /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \stack\sys\ -I C:\Users\PedroZ\Documents\GitHub\T /
//                          G\Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\zcl\ -I                     /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \stack\zdo\ -I C:\Users\PedroZ\Documents\GitHub\T /
//                          G\Projects\Stack\SE\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\zmac\ -I                          /
//                          C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\..\..\..\..\..\Components /
//                          \zmac\f8w\ -On --require_prototypes               /
//    List file          =  C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stac /
//                          k\SE\SampleApp\CC2530DB\ESP -                     /
//                          Coordinator\List\esp.s51                          /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME esp

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?L_ADD
        EXTERN ?L_MOV_TO_X
        EXTERN ?L_MOV_X
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_FOUR
        EXTERN ?PUSH_XSTACK_I_FOUR
        EXTERN ?PUSH_XSTACK_I_ONE
        EXTERN ?PUSH_XSTACK_I_THREE
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?US_SWITCH_SPARSE
        EXTERN ?V0
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN ?XSTORE_R2345
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        FUNCTION ??esp_AlarmCB?relay,0203H
        FUNCTION ??esp_BasicResetCB?relay,0203H
        FUNCTION ??esp_CancelAllLoadControlEventsCB?relay,0203H
        FUNCTION ??esp_CancelLoadControlEventCB?relay,0203H
        FUNCTION ??esp_CancelMessageCB?relay,0203H
        FUNCTION ??esp_ChangeSupplyCmdCB?relay,0203H
        FUNCTION ??esp_DisplayMessageCB?relay,0203H
        FUNCTION ??esp_GetBlockPeriodCB?relay,0203H
        FUNCTION ??esp_GetCurrentPriceCB?relay,0203H
        FUNCTION ??esp_GetLastMessageCB?relay,0203H
        FUNCTION ??esp_GetProfileCmdCB?relay,0203H
        FUNCTION ??esp_GetProfileRspCB?relay,0203H
        FUNCTION ??esp_GetScheduledEventCB?relay,0203H
        FUNCTION ??esp_GetScheduledPriceCB?relay,0203H
        FUNCTION ??esp_HandleKeys?relay,0203H
        FUNCTION ??esp_IdentifyCB?relay,0203H
        FUNCTION ??esp_IdentifyQueryRspCB?relay,0203H
        PUBLIC ??esp_Init?relay
        FUNCTION ??esp_Init?relay,0203H
        FUNCTION ??esp_LoadControlEventCB?relay,0203H
        FUNCTION ??esp_MessageConfirmationCB?relay,0203H
        FUNCTION ??esp_MirrorRemCmdCB?relay,0203H
        FUNCTION ??esp_MirrorRemRspCB?relay,0203H
        FUNCTION ??esp_PriceAcknowledgementCB?relay,0203H
        FUNCTION ??esp_ProcessAppMsg?relay,0203H
        FUNCTION ??esp_ProcessIdentifyTimeChange?relay,0203H
        FUNCTION ??esp_ProcessInConfigReportCmd?relay,0203H
        FUNCTION ??esp_ProcessInConfigReportRspCmd?relay,0203H
        FUNCTION ??esp_ProcessInDefaultRspCmd?relay,0203H
        FUNCTION ??esp_ProcessInReadReportCfgCmd?relay,0203H
        FUNCTION ??esp_ProcessInReadReportCfgRspCmd?relay,0203H
        FUNCTION ??esp_ProcessInReadRspCmd?relay,0203H
        FUNCTION ??esp_ProcessInReportCmd?relay,0203H
        FUNCTION ??esp_ProcessInWriteRspCmd?relay,0203H
        FUNCTION ??esp_ProcessZCLMsg?relay,0203H
        FUNCTION ??esp_ProcessZDOMsg?relay,0203H
        FUNCTION ??esp_PublishBlockPeriodCB?relay,0203H
        FUNCTION ??esp_PublishPriceCB?relay,0203H
        FUNCTION ??esp_ReportEventStatusCB?relay,0203H
        FUNCTION ??esp_ReqFastPollModeCmdCB?relay,0203H
        FUNCTION ??esp_ReqFastPollModeRspCB?relay,0203H
        FUNCTION ??esp_ReqMirrorCmdCB?relay,0203H
        FUNCTION ??esp_ReqMirrorRspCB?relay,0203H
        FUNCTION ??esp_SelAvailEmergencyCreditCmdCB?relay,0203H
        FUNCTION ??esp_SendReportEventStatus?relay,0203H
        FUNCTION ??esp_SupplyStatusRspCB?relay,0203H
        FUNCTION ??esp_ValidateAttrDataCB?relay,0203H
        PUBLIC ??esp_event_loop?relay
        FUNCTION ??esp_event_loop?relay,0203H
        PUBWEAK __Constant_ffffffff
        FUNCTION esp_AlarmCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_BasicResetCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_CancelAllLoadControlEventsCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_CancelLoadControlEventCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 21, STACK
        FUNCTION esp_CancelMessageCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ChangeSupplyCmdCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_DisplayMessageCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        FUNCTION esp_GetBlockPeriodCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_GetCurrentPriceCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 62, STACK
        FUNCTION esp_GetLastMessageCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 40, STACK
        FUNCTION esp_GetProfileCmdCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 51, STACK
        FUNCTION esp_GetProfileRspCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_GetScheduledEventCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_GetScheduledPriceCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 58, STACK
        FUNCTION esp_HandleKeys,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 47, STACK
        FUNCTION esp_IdentifyCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        FUNCTION esp_IdentifyQueryRspCB,0603H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC esp_Init
        FUNCTION esp_Init,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        FUNCTION esp_LoadControlEventCB,021603H
        ARGFRAME XSTACK, 1, STACK
        LOCFRAME XSTACK, 23, STACK
        FUNCTION esp_MessageConfirmationCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_MirrorRemCmdCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_MirrorRemRspCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_PriceAcknowledgementCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ProcessAppMsg,0203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCTION esp_ProcessIdentifyTimeChange,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        FUNCTION esp_ProcessInConfigReportCmd,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 33, STACK
        FUNCTION esp_ProcessInConfigReportRspCmd,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 24, STACK
        FUNCTION esp_ProcessInDefaultRspCmd,0203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCTION esp_ProcessInReadReportCfgCmd,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 39, STACK
        FUNCTION esp_ProcessInReadReportCfgRspCmd,0203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 10, STACK
        FUNCTION esp_ProcessInReadRspCmd,0203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        FUNCTION esp_ProcessInReportCmd,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 33, STACK
        FUNCTION esp_ProcessInWriteRspCmd,0203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        FUNCTION esp_ProcessZCLMsg,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        FUNCTION esp_ProcessZDOMsg,0a1203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 23, STACK
        FUNCTION esp_PublishBlockPeriodCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_PublishPriceCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ReportEventStatusCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ReqFastPollModeCmdCB,021603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 31, STACK
        FUNCTION esp_ReqFastPollModeRspCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ReqMirrorCmdCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ReqMirrorRspCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_SelAvailEmergencyCreditCmdCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_SendReportEventStatus,021203H
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 28, STACK
        FUNCTION esp_SupplyStatusRspCB,0603H
        ARGFRAME XSTACK, 0, STACK
        FUNCTION esp_ValidateAttrDataCB,0603H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC esp_event_loop
        FUNCTION esp_event_loop,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        
          CFI Names cfiNames0
          CFI StackFrame CFA_SP SP IDATA
          CFI StackFrame CFA_PSP16 PSP16 XDATA
          CFI StackFrame CFA_XSP16 XSP16 XDATA
          CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
          CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
          CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
          CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
          CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
          CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
          CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
          CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
          CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
          CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
          CFI VirtualResource ?RET:24
          CFI Resource ?BRET_EXT:8
          CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
          CFI ResourceParts PSP16 PSPH, PSPL
          CFI ResourceParts XSP16 XSPH, XSPL
          CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
          CFI EndNames cfiNames0
        
          CFI Common cfiCommon0 Using cfiNames0
          CFI CodeAlign 1
          CFI DataAlign -1
          CFI ReturnAddress ?RET CODE
          CFI CFA_DOVERLAY Used
          CFI CFA_IOVERLAY Used
          CFI CFA_SP SP+-3
          CFI CFA_PSP16 PSP16+0
          CFI CFA_XSP16 XSP16+0
          CFI `PSW.CY` SameValue
          CFI `B.BR0` SameValue
          CFI `B.BR1` SameValue
          CFI `B.BR2` SameValue
          CFI `B.BR3` SameValue
          CFI `B.BR4` SameValue
          CFI `B.BR5` SameValue
          CFI `B.BR6` SameValue
          CFI `B.BR7` SameValue
          CFI `VB.BR8` SameValue
          CFI `VB.BR9` SameValue
          CFI `VB.BR10` SameValue
          CFI `VB.BR11` SameValue
          CFI `VB.BR12` SameValue
          CFI `VB.BR13` SameValue
          CFI `VB.BR14` SameValue
          CFI `VB.BR15` SameValue
          CFI VB SameValue
          CFI B Undefined
          CFI A Undefined
          CFI PSW SameValue
          CFI DPL0 SameValue
          CFI DPH0 SameValue
          CFI R0 Undefined
          CFI R1 Undefined
          CFI R2 Undefined
          CFI R3 Undefined
          CFI R4 Undefined
          CFI R5 Undefined
          CFI R6 SameValue
          CFI R7 SameValue
          CFI V0 SameValue
          CFI V1 SameValue
          CFI V2 SameValue
          CFI V3 SameValue
          CFI V4 SameValue
          CFI V5 SameValue
          CFI V6 SameValue
          CFI V7 SameValue
          CFI V8 SameValue
          CFI V9 SameValue
          CFI V10 SameValue
          CFI V11 SameValue
          CFI V12 SameValue
          CFI V13 SameValue
          CFI V14 SameValue
          CFI V15 SameValue
          CFI PSPH Undefined
          CFI PSPL Undefined
          CFI XSPH Undefined
          CFI XSPL Undefined
          CFI ?RET Concat
          CFI ?BRET_EXT Frame(CFA_SP, 3)
          CFI ?RET_HIGH Frame(CFA_SP, 2)
          CFI ?RET_LOW Frame(CFA_SP, 1)
          CFI EndCommon cfiCommon0
        
HalLcdWriteString   SYMBOL "HalLcdWriteString"
??HalLcdWriteString?relay SYMBOL "?relay", HalLcdWriteString
HalLcdWriteStringValue SYMBOL "HalLcdWriteStringValue"
??HalLcdWriteStringValue?relay SYMBOL "?relay", HalLcdWriteStringValue
HalLedBlink         SYMBOL "HalLedBlink"
??HalLedBlink?relay SYMBOL "?relay", HalLedBlink
HalLedSet           SYMBOL "HalLedSet"
??HalLedSet?relay   SYMBOL "?relay", HalLedSet
RegisterForKeys     SYMBOL "RegisterForKeys"
??RegisterForKeys?relay SYMBOL "?relay", RegisterForKeys
StubAPS_RegisterApp SYMBOL "StubAPS_RegisterApp"
??StubAPS_RegisterApp?relay SYMBOL "?relay", StubAPS_RegisterApp
ZDO_ParseDeviceAnnce SYMBOL "ZDO_ParseDeviceAnnce"
??ZDO_ParseDeviceAnnce?relay SYMBOL "?relay", ZDO_ParseDeviceAnnce
ZDO_ParseSimpleDescRsp SYMBOL "ZDO_ParseSimpleDescRsp"
??ZDO_ParseSimpleDescRsp?relay SYMBOL "?relay", ZDO_ParseSimpleDescRsp
ZDO_RegisterForZDOMsg SYMBOL "ZDO_RegisterForZDOMsg"
??ZDO_RegisterForZDOMsg?relay SYMBOL "?relay", ZDO_RegisterForZDOMsg
ZDP_SimpleDescReq   SYMBOL "ZDP_SimpleDescReq"
??ZDP_SimpleDescReq?relay SYMBOL "?relay", ZDP_SimpleDescReq
_ltoa               SYMBOL "_ltoa"
??_ltoa?relay       SYMBOL "?relay", _ltoa
osal_getClock       SYMBOL "osal_getClock"
??osal_getClock?relay SYMBOL "?relay", osal_getClock
osal_mem_alloc      SYMBOL "osal_mem_alloc"
??osal_mem_alloc?relay SYMBOL "?relay", osal_mem_alloc
osal_mem_free       SYMBOL "osal_mem_free"
??osal_mem_free?relay SYMBOL "?relay", osal_mem_free
osal_memcpy         SYMBOL "osal_memcpy"
??osal_memcpy?relay SYMBOL "?relay", osal_memcpy
osal_memset         SYMBOL "osal_memset"
??osal_memset?relay SYMBOL "?relay", osal_memset
osal_msg_deallocate SYMBOL "osal_msg_deallocate"
??osal_msg_deallocate?relay SYMBOL "?relay", osal_msg_deallocate
osal_msg_receive    SYMBOL "osal_msg_receive"
??osal_msg_receive?relay SYMBOL "?relay", osal_msg_receive
osal_set_event      SYMBOL "osal_set_event"
??osal_set_event?relay SYMBOL "?relay", osal_set_event
osal_start_timerEx  SYMBOL "osal_start_timerEx"
??osal_start_timerEx?relay SYMBOL "?relay", osal_start_timerEx
osal_stop_timerEx   SYMBOL "osal_stop_timerEx"
??osal_stop_timerEx?relay SYMBOL "?relay", osal_stop_timerEx
zclAnalogDataType   SYMBOL "zclAnalogDataType"
??zclAnalogDataType?relay SYMBOL "?relay", zclAnalogDataType
zclFindAttrRec      SYMBOL "zclFindAttrRec"
??zclFindAttrRec?relay SYMBOL "?relay", zclFindAttrRec
zclGeneral_RegisterCmdCallbacks SYMBOL "zclGeneral_RegisterCmdCallbacks"
??zclGeneral_RegisterCmdCallbacks?relay SYMBOL "?relay", zclGeneral_RegisterCmdCallbacks
zclGetDataTypeLength SYMBOL "zclGetDataTypeLength"
??zclGetDataTypeLength?relay SYMBOL "?relay", zclGetDataTypeLength
zclSE_Init          SYMBOL "zclSE_Init"
??zclSE_Init?relay  SYMBOL "?relay", zclSE_Init
zclSE_LoadControl_Send_LoadControlEvent SYMBOL "zclSE_LoadControl_Send_LoadControlEvent"
??zclSE_LoadControl_Send_LoadControlEvent?relay SYMBOL "?relay", zclSE_LoadControl_Send_LoadControlEvent
zclSE_LoadControl_Send_ReportEventStatus SYMBOL "zclSE_LoadControl_Send_ReportEventStatus"
??zclSE_LoadControl_Send_ReportEventStatus?rela SYMBOL "?relay", zclSE_LoadControl_Send_ReportEventStatus
zclSE_Message_Send_DisplayMessage SYMBOL "zclSE_Message_Send_DisplayMessage"
??zclSE_Message_Send_DisplayMessage?relay SYMBOL "?relay", zclSE_Message_Send_DisplayMessage
zclSE_Pricing_Send_PublishPrice SYMBOL "zclSE_Pricing_Send_PublishPrice"
??zclSE_Pricing_Send_PublishPrice?relay SYMBOL "?relay", zclSE_Pricing_Send_PublishPrice
zclSE_RegisterCmdCallbacks SYMBOL "zclSE_RegisterCmdCallbacks"
??zclSE_RegisterCmdCallbacks?relay SYMBOL "?relay", zclSE_RegisterCmdCallbacks
zclSE_SimpleMetering_Send_GetProfileRsp SYMBOL "zclSE_SimpleMetering_Send_GetProfileRsp"
??zclSE_SimpleMetering_Send_GetProfileRsp?relay SYMBOL "?relay", zclSE_SimpleMetering_Send_GetProfileRsp
zclSE_SimpleMetering_Send_ReqFastPollModeRsp SYMBOL "zclSE_SimpleMetering_Send_ReqFastPollModeRsp"
??zclSE_SimpleMetering_Send_ReqFastPollModeRsp? SYMBOL "?relay", zclSE_SimpleMetering_Send_ReqFastPollModeRsp
zcl_SendConfigReportRspCmd SYMBOL "zcl_SendConfigReportRspCmd"
??zcl_SendConfigReportRspCmd?relay SYMBOL "?relay", zcl_SendConfigReportRspCmd
zcl_SendReadReportCfgRspCmd SYMBOL "zcl_SendReadReportCfgRspCmd"
??zcl_SendReadReportCfgRspCmd?relay SYMBOL "?relay", zcl_SendReadReportCfgRspCmd
zcl_registerAttrList SYMBOL "zcl_registerAttrList"
??zcl_registerAttrList?relay SYMBOL "?relay", zcl_registerAttrList
zcl_registerClusterOptionList SYMBOL "zcl_registerClusterOptionList"
??zcl_registerClusterOptionList?relay SYMBOL "?relay", zcl_registerClusterOptionList
zcl_registerForMsg  SYMBOL "zcl_registerForMsg"
??zcl_registerForMsg?relay SYMBOL "?relay", zcl_registerForMsg
zcl_registerValidateAttrData SYMBOL "zcl_registerValidateAttrData"
??zcl_registerValidateAttrData?relay SYMBOL "?relay", zcl_registerValidateAttrData
zgSetItem           SYMBOL "zgSetItem"
??zgSetItem?relay   SYMBOL "?relay", zgSetItem
esp_Init            SYMBOL "esp_Init"
??esp_Init?relay    SYMBOL "?relay", esp_Init
esp_event_loop      SYMBOL "esp_event_loop"
??esp_event_loop?relay SYMBOL "?relay", esp_event_loop

        EXTERN ??HalLcdWriteString?relay
        FUNCTION ??HalLcdWriteString?relay,00H
        EXTERN ??HalLcdWriteStringValue?relay
        FUNCTION ??HalLcdWriteStringValue?relay,00H
        EXTERN ??HalLedBlink?relay
        FUNCTION ??HalLedBlink?relay,00H
        EXTERN ??HalLedSet?relay
        FUNCTION ??HalLedSet?relay,00H
        EXTERN ??RegisterForKeys?relay
        FUNCTION ??RegisterForKeys?relay,00H
        EXTERN ??StubAPS_RegisterApp?relay
        FUNCTION ??StubAPS_RegisterApp?relay,00H
        EXTERN ??ZDO_ParseDeviceAnnce?relay
        FUNCTION ??ZDO_ParseDeviceAnnce?relay,00H
        EXTERN ??ZDO_ParseSimpleDescRsp?relay
        FUNCTION ??ZDO_ParseSimpleDescRsp?relay,00H
        EXTERN ??ZDO_RegisterForZDOMsg?relay
        FUNCTION ??ZDO_RegisterForZDOMsg?relay,00H
        EXTERN ??ZDP_SimpleDescReq?relay
        FUNCTION ??ZDP_SimpleDescReq?relay,00H
        EXTERN ??_ltoa?relay
        FUNCTION ??_ltoa?relay,00H
        EXTERN ??osal_getClock?relay
        FUNCTION ??osal_getClock?relay,00H
        EXTERN ??osal_mem_alloc?relay
        FUNCTION ??osal_mem_alloc?relay,00H
        EXTERN ??osal_mem_free?relay
        FUNCTION ??osal_mem_free?relay,00H
        EXTERN ??osal_memcpy?relay
        FUNCTION ??osal_memcpy?relay,00H
        EXTERN ??osal_memset?relay
        FUNCTION ??osal_memset?relay,00H
        EXTERN ??osal_msg_deallocate?relay
        FUNCTION ??osal_msg_deallocate?relay,00H
        EXTERN ??osal_msg_receive?relay
        FUNCTION ??osal_msg_receive?relay,00H
        EXTERN ??osal_set_event?relay
        FUNCTION ??osal_set_event?relay,00H
        EXTERN ??osal_start_timerEx?relay
        FUNCTION ??osal_start_timerEx?relay,00H
        EXTERN ??osal_stop_timerEx?relay
        FUNCTION ??osal_stop_timerEx?relay,00H
        EXTERN ??zclAnalogDataType?relay
        FUNCTION ??zclAnalogDataType?relay,00H
        EXTERN ??zclFindAttrRec?relay
        FUNCTION ??zclFindAttrRec?relay,00H
        EXTERN ??zclGeneral_RegisterCmdCallbacks?relay
        FUNCTION ??zclGeneral_RegisterCmdCallbacks?relay,00H
        EXTERN ??zclGetDataTypeLength?relay
        FUNCTION ??zclGetDataTypeLength?relay,00H
        EXTERN ??zclSE_Init?relay
        FUNCTION ??zclSE_Init?relay,00H
        EXTERN ??zclSE_LoadControl_Send_LoadControlEvent?relay
        FUNCTION ??zclSE_LoadControl_Send_LoadControlEvent?relay,00H
        EXTERN ??zclSE_LoadControl_Send_ReportEventStatus?rela
        FUNCTION ??zclSE_LoadControl_Send_ReportEventStatus?rela,00H
        EXTERN ??zclSE_Message_Send_DisplayMessage?relay
        FUNCTION ??zclSE_Message_Send_DisplayMessage?relay,00H
        EXTERN ??zclSE_Pricing_Send_PublishPrice?relay
        FUNCTION ??zclSE_Pricing_Send_PublishPrice?relay,00H
        EXTERN ??zclSE_RegisterCmdCallbacks?relay
        FUNCTION ??zclSE_RegisterCmdCallbacks?relay,00H
        EXTERN ??zclSE_SimpleMetering_Send_GetProfileRsp?relay
        FUNCTION ??zclSE_SimpleMetering_Send_GetProfileRsp?relay,00H
        EXTERN ??zclSE_SimpleMetering_Send_ReqFastPollModeRsp?
        FUNCTION ??zclSE_SimpleMetering_Send_ReqFastPollModeRsp?,00H
        EXTERN ??zcl_SendConfigReportRspCmd?relay
        FUNCTION ??zcl_SendConfigReportRspCmd?relay,00H
        EXTERN ??zcl_SendReadReportCfgRspCmd?relay
        FUNCTION ??zcl_SendReadReportCfgRspCmd?relay,00H
        EXTERN ??zcl_registerAttrList?relay
        FUNCTION ??zcl_registerAttrList?relay,00H
        EXTERN ??zcl_registerClusterOptionList?relay
        FUNCTION ??zcl_registerClusterOptionList?relay,00H
        EXTERN ??zcl_registerForMsg?relay
        FUNCTION ??zcl_registerForMsg?relay,00H
        EXTERN ??zcl_registerValidateAttrData?relay
        FUNCTION ??zcl_registerValidateAttrData?relay,00H
        EXTERN ??zgSetItem?relay
        FUNCTION ??zgSetItem?relay,00H
        EXTERN HalLcdWriteString
        FUNCTION HalLcdWriteString,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLcdWriteStringValue
        FUNCTION HalLcdWriteStringValue,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLedBlink
        FUNCTION HalLedBlink,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLedSet
        FUNCTION HalLedSet,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN RegisterForKeys
        FUNCTION RegisterForKeys,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN StubAPS_RegisterApp
        FUNCTION StubAPS_RegisterApp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_ParseDeviceAnnce
        FUNCTION ZDO_ParseDeviceAnnce,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_ParseSimpleDescRsp
        FUNCTION ZDO_ParseSimpleDescRsp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_RegisterForZDOMsg
        FUNCTION ZDO_RegisterForZDOMsg,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDP_SimpleDescReq
        FUNCTION ZDP_SimpleDescReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN _ltoa
        FUNCTION _ltoa,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN espAttrs
        EXTERN espFastPollUpdatePeriod
        EXTERN espIdentifyTime
        EXTERN espOptions
        EXTERN espSignature
        EXTERN espSimpleDesc
        EXTERN espTime
        EXTERN osal_getClock
        FUNCTION osal_getClock,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_alloc
        FUNCTION osal_mem_alloc,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_free
        FUNCTION osal_mem_free,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memcpy
        FUNCTION osal_memcpy,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 62, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memset
        FUNCTION osal_memset,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_deallocate
        FUNCTION osal_msg_deallocate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_receive
        FUNCTION osal_msg_receive,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_set_event
        FUNCTION osal_set_event,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_stop_timerEx
        FUNCTION osal_stop_timerEx,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclAnalogDataType
        FUNCTION zclAnalogDataType,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclFindAttrRec
        FUNCTION zclFindAttrRec,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclGeneral_RegisterCmdCallbacks
        FUNCTION zclGeneral_RegisterCmdCallbacks,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclGetDataTypeLength
        FUNCTION zclGetDataTypeLength,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_Init
        FUNCTION zclSE_Init,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_LoadControl_Send_LoadControlEvent
        FUNCTION zclSE_LoadControl_Send_LoadControlEvent,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 47, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_LoadControl_Send_ReportEventStatus
        FUNCTION zclSE_LoadControl_Send_ReportEventStatus,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_Message_Send_DisplayMessage
        FUNCTION zclSE_Message_Send_DisplayMessage,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 47, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_Pricing_Send_PublishPrice
        FUNCTION zclSE_Pricing_Send_PublishPrice,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 61, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_RegisterCmdCallbacks
        FUNCTION zclSE_RegisterCmdCallbacks,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_SimpleMetering_Send_GetProfileRsp
        FUNCTION zclSE_SimpleMetering_Send_GetProfileRsp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 51, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zclSE_SimpleMetering_Send_ReqFastPollModeRsp
        FUNCTION zclSE_SimpleMetering_Send_ReqFastPollModeRsp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_SendConfigReportRspCmd
        FUNCTION zcl_SendConfigReportRspCmd,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_SendReadReportCfgRspCmd
        FUNCTION zcl_SendReadReportCfgRspCmd,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 39, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_registerAttrList
        FUNCTION zcl_registerAttrList,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_registerClusterOptionList
        FUNCTION zcl_registerClusterOptionList,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_registerForMsg
        FUNCTION zcl_registerForMsg,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zcl_registerValidateAttrData
        FUNCTION zcl_registerValidateAttrData,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zgSetItem
        FUNCTION zgSetItem,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC

// C:\Users\PedroZ\Documents\GitHub\TG\Projects\Stack\SE\SampleApp\Source\ESP\esp.c
//    1 /**************************************************************************************************
//    2   Filename:       esp.c
//    3   Revised:        $Date: 2012-04-02 17:02:19 -0700 (Mon, 02 Apr 2012) $
//    4   Revision:       $Revision: 29996 $
//    5 
//    6   Description:    This module implements the ESP functionality and contains the
//    7                   init and event loop functions
//    8 
//    9 
//   10   Copyright 2009-2012 Texas Instruments Incorporated. All rights reserved.
//   11 
//   12   IMPORTANT: Your use of this Software is limited to those specific rights
//   13   granted under the terms of a software license agreement between the user
//   14   who downloaded the software, his/her employer (which must be your employer)
//   15   and Texas Instruments Incorporated (the "License").  You may not use this
//   16   Software unless you agree to abide by the terms of the License. The License
//   17   limits your use, and you acknowledge, that the Software may not be modified,
//   18   copied or distributed unless embedded on a Texas Instruments microcontroller
//   19   or used solely and exclusively in conjunction with a Texas Instruments radio
//   20   frequency transceiver, which is integrated into your product.  Other than for
//   21   the foregoing purpose, you may not use, reproduce, copy, prepare derivative
//   22   works of, modify, distribute, perform, display or sell this Software and/or
//   23   its documentation for any purpose.
//   24 
//   25   YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
//   26   PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
//   27   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
//   28   NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
//   29   TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
//   30   NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
//   31   LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
//   32   INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
//   33   OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
//   34   OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
//   35   (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
//   36 
//   37   Should you have any questions regarding your right to use this Software,
//   38   contact Texas Instruments Incorporated at www.TI.com.
//   39 **************************************************************************************************/
//   40 
//   41 /*********************************************************************
//   42   This application is designed for the test purpose of the SE profile which
//   43   exploits the following clusters for an ESP configuration:
//   44 
//   45   General Basic
//   46   General Alarms
//   47   General Time
//   48   General Key Establishment
//   49   SE     Price
//   50   SE     Demand Response and Load Control
//   51   SE     Simple Metering
//   52   SE     Message
//   53 
//   54   Key control:
//   55     SW1:  Send out Cooling Load Control Event to PCT
//   56     SW2:  Send out Load Control Event to Load Control Device
//   57     SW3:  Send out Message to In Premise Display
//   58     SW4:  Not used
//   59 *********************************************************************/
//   60 
//   61 /*********************************************************************
//   62  * INCLUDES
//   63  */
//   64 
//   65 #include "OSAL.h"
//   66 #include "OSAL_Clock.h"
//   67 #include "OSAL_Nv.h"
//   68 #include "MT.h"
//   69 #include "MT_APP.h"
//   70 #include "ZDObject.h"
//   71 #include "AddrMgr.h"
//   72 
//   73 #include "se.h"
//   74 #include "esp.h"
//   75 #include "zcl_general.h"
//   76 #include "zcl_se.h"
//   77 #include "zcl_key_establish.h"
//   78 
//   79 #if defined( INTER_PAN )
//   80   #include "stub_aps.h"
//   81 #endif
//   82 
//   83 #include "onboard.h"
//   84 
//   85 /* HAL */
//   86 #include "hal_lcd.h"
//   87 #include "hal_led.h"
//   88 #include "hal_key.h"
//   89 
//   90 
//   91 /*********************************************************************
//   92  * MACROS
//   93  */
//   94 
//   95 // There is no attribute in the Mandatory Reportable Attribute list for now
//   96 #define zcl_MandatoryReportableAttribute( a ) ( a == NULL )
//   97 
//   98 /*********************************************************************
//   99  * CONSTANTS
//  100  */
//  101 
//  102 #define ESP_MIN_REPORTING_INTERVAL       5
//  103 
//  104 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
//  105 // There can be up to ESP_MAX_MIRRORS mirror endpoints starting at the ESP_MIRROR_EP_BASE and
//  106 // going up to ( ESP_MIRROR_EP_BASE + ESP_MAX_MIRRORS )
//  107 #define ESP_MIRROR_EP_BASE                        24
//  108 
//  109 // The max number of mirrors the ESP can have.
//  110 // Note: This value is limited by the number of bits in the mirrorMask mask
//  111 #define ESP_MAX_MIRRORS                           16
//  112 #define ESP_MIRROR_FULL_MASK                      0xFFFF
//  113 
//  114 #define ESP_MIRROR_NOTIFY_ATTR_COUNT              6
//  115 #define ESP_MIRROR_USER_ATTRIBUTES_POSITION       ESP_MIRROR_NOTIFY_ATTR_COUNT
//  116 #define ESP_MIRROR_MAX_USER_ATTRIBUTES            8
//  117 #define ESP_MIRROR_MAX_ATTRIBUTES                 (ESP_MIRROR_NOTIFY_ATTR_COUNT + ESP_MIRROR_MAX_USER_ATTRIBUTES)
//  118 #define ESP_MIRROR_INVALID_ENDPOINT               0xFF
//  119 #endif  // SE_UK_EXT && SE_MIRROR
//  120 
//  121 /*********************************************************************
//  122  * TYPEDEFS
//  123  */
//  124 
//  125 /*********************************************************************
//  126  * GLOBAL VARIABLES
//  127  */
//  128 
//  129 /*********************************************************************
//  130  * GLOBAL FUNCTIONS
//  131  */
//  132 
//  133 /*********************************************************************
//  134  * LOCAL VARIABLES
//  135  */
//  136 

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  137 static uint8 espTaskID;                              // esp osal task id
espTaskID:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  138 static afAddrType_t ipdAddr;                         // destination address of in premise display
ipdAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  139 static afAddrType_t pctAddr;                         // destination address of PCT
pctAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  140 static afAddrType_t loadControlAddr;                 // destination address of load control device
loadControlAddr:
        DS 12
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  141 static zAddrType_t simpleDescReqAddr;                // destination addresses for simple desc request
simpleDescReqAddr:
        DS 9
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
//  142 static zclCCLoadControlEvent_t loadControlCmd;       // command structure for load control command
loadControlCmd:
        DS 24
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA16
//  143 static uint16 espFastPollModeDuration;               // number of fast poll events
espFastPollModeDuration:
        DS 2
        REQUIRE __INIT_XDATA_Z
//  144 
//  145 #if defined ( INTER_PAN )
//  146 // define endpoint structure to register with STUB APS for INTER-PAN support

        RSEG XDATA_I:XDATA:NOROOT(0)
//  147 static endPointDesc_t espEp =
espEp:
        DATA8
        DS 6
        REQUIRE `?<Initializer for espEp>`
        REQUIRE __INIT_XDATA_I
//  148 {
//  149   ESP_ENDPOINT,
//  150   &espTaskID,
//  151   (SimpleDescriptionFormat_t *)&espSimpleDesc,
//  152   (afNetworkLatencyReq_t)0
//  153 };
//  154 #endif
//  155 
//  156 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
//  157 typedef struct
//  158 {
//  159   uint16 srcAddr;
//  160   uint8 srcEndpoint;
//  161   zclAttrRec_t *pAttr;
//  162   uint8 notificationControl;
//  163   zclCCReqMirrorReportAttrRsp_t notificationSet;
//  164 } espMirrorInfo_t;
//  165 
//  166 typedef struct
//  167 {
//  168   uint16 mirrorMask;
//  169   espMirrorInfo_t mirrorInfo[ESP_MAX_MIRRORS];
//  170 } espMirrorControl_t;
//  171 
//  172 #define MIRROR_DEVICE_VERSION       0
//  173 #define MIRROR_FLAGS                0
//  174 
//  175 #define MIRROR_MAX_INCLUSTERS       2
//  176 CONST cId_t mirrorInClusterList[MIRROR_MAX_INCLUSTERS] =
//  177 {
//  178   ZCL_CLUSTER_ID_GEN_BASIC,
//  179   ZCL_CLUSTER_ID_SE_SIMPLE_METERING
//  180 };
//  181 
//  182 #define MIRROR_MAX_OUTCLUSTERS       2
//  183 CONST cId_t mirrorOutClusterList[MIRROR_MAX_OUTCLUSTERS] =
//  184 {
//  185   ZCL_CLUSTER_ID_GEN_BASIC,
//  186   ZCL_CLUSTER_ID_SE_SIMPLE_METERING
//  187 };
//  188 #endif  // SE_UK_EXT && SE_MIRROR
//  189 
//  190 /*********************************************************************
//  191  * LOCAL FUNCTIONS
//  192  */
//  193 static void esp_HandleKeys( uint8 shift, uint8 keys );
//  194 static void esp_ProcessAppMsg( uint8 *msg );
//  195 
//  196 static void esp_ProcessIdentifyTimeChange( void );
//  197 
//  198 /*************************************************************************/
//  199 /*** Application Callback Functions                                    ***/
//  200 /*************************************************************************/
//  201 
//  202 // Foundation Callback functions
//  203 static uint8 esp_ValidateAttrDataCB( zclAttrRec_t *pAttr, zclWriteRec_t *pAttrInfo );
//  204 
//  205 // General Cluster Callback functions
//  206 static void esp_BasicResetCB( void );
//  207 static void esp_IdentifyCB( zclIdentify_t *pCmd );
//  208 static void esp_IdentifyQueryRspCB( zclIdentifyQueryRsp_t *pRsp );
//  209 static void esp_AlarmCB( zclAlarm_t *pAlarm );
//  210 #ifdef SE_UK_EXT
//  211 static void esp_GetEventLogCB( uint8 srcEP, afAddrType_t *srcAddr,
//  212                                zclGetEventLog_t *pEventLog, uint8 seqNum );
//  213 static void esp_PublishEventLogCB( afAddrType_t *srcAddr, zclPublishEventLog_t *pEventLog );
//  214 #endif // SE_UK_EXT
//  215 
//  216 // SE Callback functions
//  217 static void esp_GetProfileCmdCB( zclCCGetProfileCmd_t *pCmd,
//  218                                        afAddrType_t *srcAddr, uint8 seqNum );
//  219 static void esp_GetProfileRspCB( zclCCGetProfileRsp_t *pCmd,
//  220                                        afAddrType_t *srcAddr, uint8 seqNum );
//  221 static void esp_ReqMirrorCmdCB( afAddrType_t *srcAddr, uint8 seqNum );
//  222 static void esp_ReqMirrorRspCB( zclCCReqMirrorRsp_t *pCmd,
//  223                                        afAddrType_t *srcAddr, uint8 seqNum );
//  224 static void esp_MirrorRemCmdCB( afAddrType_t *srcAddr, uint8 seqNum );
//  225 static void esp_MirrorRemRspCB( zclCCMirrorRemRsp_t *pCmd,
//  226                                        afAddrType_t *srcAddr, uint8 seqNum );
//  227 static void esp_ReqFastPollModeCmdCB( zclCCReqFastPollModeCmd_t *pCmd,
//  228                                        afAddrType_t *srcAddr, uint8 seqNum );
//  229 static void esp_ReqFastPollModeRspCB( zclCCReqFastPollModeRsp_t *pRsp,
//  230                                        afAddrType_t *srcAddr, uint8 seqNum );
//  231 static void esp_GetCurrentPriceCB( zclCCGetCurrentPrice_t *pCmd,
//  232                                        afAddrType_t *srcAddr, uint8 seqNum );
//  233 static void esp_GetScheduledPriceCB( zclCCGetScheduledPrice_t *pCmd,
//  234                                        afAddrType_t *srcAddr, uint8 seqNum );
//  235 static void esp_PriceAcknowledgementCB( zclCCPriceAcknowledgement_t *pCmd,
//  236                                        afAddrType_t *srcAddr, uint8 seqNum );
//  237 static void esp_GetBlockPeriodCB( zclCCGetBlockPeriod_t *pCmd,
//  238                                        afAddrType_t *srcAddr, uint8 seqNum );
//  239 static void esp_PublishPriceCB( zclCCPublishPrice_t *pCmd,
//  240                                        afAddrType_t *srcAddr, uint8 seqNum );
//  241 static void esp_PublishBlockPeriodCB( zclCCPublishBlockPeriod_t *pCmd,
//  242                                        afAddrType_t *srcAddr, uint8 seqNum );
//  243 static void esp_DisplayMessageCB( zclCCDisplayMessage_t *pCmd,
//  244                                        afAddrType_t *srcAddr, uint8 seqNum );
//  245 static void esp_CancelMessageCB( zclCCCancelMessage_t *pCmd,
//  246                                        afAddrType_t *srcAddr, uint8 seqNum );
//  247 static void esp_GetLastMessageCB( afAddrType_t *srcAddr, uint8 seqNum );
//  248 static void esp_MessageConfirmationCB( zclCCMessageConfirmation_t *pCmd,
//  249                                        afAddrType_t *srcAddr, uint8 seqNum );
//  250 static void esp_LoadControlEventCB( zclCCLoadControlEvent_t *pCmd,
//  251                           afAddrType_t *srcAddr, uint8 status, uint8 seqNum);
//  252 static void esp_CancelLoadControlEventCB( zclCCCancelLoadControlEvent_t *pCmd,
//  253                                        afAddrType_t *srcAddr, uint8 seqNum );
//  254 static void esp_CancelAllLoadControlEventsCB( zclCCCancelAllLoadControlEvents_t *pCmd,
//  255                                        afAddrType_t *srcAddr, uint8 seqNum );
//  256 static void esp_ReportEventStatusCB( zclCCReportEventStatus_t *pCmd,
//  257                                        afAddrType_t *srcAddr, uint8 seqNum );
//  258 static void esp_GetScheduledEventCB( zclCCGetScheduledEvent_t *pCmd,
//  259                                        afAddrType_t *srcAddr, uint8 seqNum );
//  260 static void esp_SelAvailEmergencyCreditCmdCB( zclCCSelAvailEmergencyCredit_t *pCmd,
//  261                                        afAddrType_t *srcAddr, uint8 seqNum );
//  262 static void esp_ChangeSupplyCmdCB( zclCCChangeSupply_t *pCmd,
//  263                                        afAddrType_t *srcAddr, uint8 seqNum );
//  264 static void esp_SupplyStatusRspCB( zclCCSupplyStatusResponse_t *pCmd,
//  265                                        afAddrType_t *srcAddr, uint8 seqNum );
//  266 #if defined ( SE_UK_EXT )
//  267 static void esp_GetSnapshotRspCB( zclCCReqGetSnapshotRsp_t *pCmd,
//  268                                        afAddrType_t *srcAddr, uint8 seqNum );
//  269 static void esp_PublishTariffInformationCB( zclCCPublishTariffInformation_t *pCmd,
//  270                                        afAddrType_t *srcAddr, uint8 seqNum );
//  271 static void esp_PublishPriceMatrixCB( zclCCPublishPriceMatrix_t *pCmd,
//  272                                        afAddrType_t *srcAddr, uint8 seqNum );
//  273 static void esp_PublishBlockThresholdsCB( zclCCPublishBlockThresholds_t *pCmd,
//  274                                        afAddrType_t *srcAddr, uint8 seqNum );
//  275 static void esp_PublishConversionFactorCB( zclCCPublishConversionFactor_t *pCmd,
//  276                                        afAddrType_t *srcAddr, uint8 seqNum );
//  277 static void esp_PublishCalorificValueCB( zclCCPublishCalorificValue_t *pCmd,
//  278                                        afAddrType_t *srcAddr, uint8 seqNum );
//  279 static void esp_PublishCO2ValueCB( zclCCPublishCO2Value_t *pCmd,
//  280                                        afAddrType_t *srcAddr, uint8 seqNum );
//  281 static void esp_PublishCPPEventCB( zclCCPublishCPPEvent_t *pCmd,
//  282                                        afAddrType_t *srcAddr, uint8 seqNum );
//  283 static void esp_PublishBillingPeriodCB( zclCCPublishBillingPeriod_t *pCmd,
//  284                                        afAddrType_t *srcAddr, uint8 seqNum );
//  285 static void esp_PublishConsolidatedBillCB( zclCCPublishConsolidatedBill_t *pCmd,
//  286                                        afAddrType_t *srcAddr, uint8 seqNum );
//  287 static void esp_PublishCreditPaymentInfoCB( zclCCPublishCreditPaymentInfo_t *pCmd,
//  288                                        afAddrType_t *srcAddr, uint8 seqNum );
//  289 static void esp_GetTariffInformationCB( zclCCGetTariffInformation_t *pCmd,
//  290                                        afAddrType_t *srcAddr, uint8 seqNum );
//  291 static void esp_GetPriceMatrixCB( uint32 issuerTariffId,
//  292                                        afAddrType_t *srcAddr, uint8 seqNum );
//  293 static void esp_GetBlockThresholdsCB( uint32 issuerTariffId,
//  294                                        afAddrType_t *srcAddr, uint8 seqNum );
//  295 static void esp_GetConversionFactorCB( zclCCGetConversionFactor_t *pCmd,
//  296                                        afAddrType_t *srcAddr, uint8 seqNum );
//  297 static void esp_GetCalorificValueCB( zclCCGetCalorificValue_t *pCmd,
//  298                                        afAddrType_t *srcAddr, uint8 seqNum );
//  299 static void esp_GetCO2ValueCB( zclCCGetCO2Value_t *pCmd,
//  300                                        afAddrType_t *srcAddr, uint8 seqNum );
//  301 static void esp_GetBillingPeriodCB( zclCCGetBillingPeriod_t *pCmd,
//  302                                        afAddrType_t *srcAddr, uint8 seqNum );
//  303 static void esp_GetConsolidatedBillCB( zclCCGetConsolidatedBill_t *pCmd,
//  304                                        afAddrType_t *srcAddr, uint8 seqNum );
//  305 static void esp_CPPEventResponseCB( zclCCCPPEventResponse_t *pCmd,
//  306                                        afAddrType_t *srcAddr, uint8 seqNum );
//  307 static void esp_ChangeDebtCB( zclCCChangeDebt_t *pCmd,
//  308                                        afAddrType_t *srcAddr, uint8 seqNum );
//  309 static void esp_EmergencyCreditSetupCB( zclCCEmergencyCreditSetup_t *pCmd,
//  310                                        afAddrType_t *srcAddr, uint8 seqNum );
//  311 static void esp_ConsumerTopupCB( zclCCConsumerTopup_t *pCmd,
//  312                                        afAddrType_t *srcAddr, uint8 seqNum );
//  313 static void esp_CreditAdjustmentCB( zclCCCreditAdjustment_t *pCmd,
//  314                                        afAddrType_t *srcAddr, uint8 seqNum );
//  315 static void esp_ChangePaymentModeCB( zclCCChangePaymentMode_t *pCmd,
//  316                                        afAddrType_t *srcAddr, uint8 seqNum );
//  317 static void esp_GetPrepaySnapshotCB( zclCCGetPrepaySnapshot_t *pCmd,
//  318                                        afAddrType_t *srcAddr, uint8 seqNum );
//  319 static void esp_GetTopupLogCB( uint8 numEvents,
//  320                                        afAddrType_t *srcAddr, uint8 seqNum );
//  321 static void esp_SetLowCreditWarningLevelCB( uint8 numEvents,
//  322                                        afAddrType_t *srcAddr, uint8 seqNum );
//  323 static void esp_GetDebtRepaymentLogCB( zclCCGetDebtRepaymentLog_t *pCmd,
//  324                                        afAddrType_t *srcAddr, uint8 seqNum );
//  325 static void esp_GetPrepaySnapshotResponseCB( zclCCGetPrepaySnapshotResponse_t *pCmd,
//  326                                        afAddrType_t *srcAddr, uint8 seqNum );
//  327 static void esp_ChangePaymentModeResponseCB( zclCCChangePaymentModeResponse_t *pCmd,
//  328                                        afAddrType_t *srcAddr, uint8 seqNum );
//  329 static void esp_ConsumerTopupResponseCB( zclCCConsumerTopupResponse_t *pCmd,
//  330                                        afAddrType_t *srcAddr, uint8 seqNum );
//  331 static void esp_GetCommandsCB( uint8 prepayNotificationFlags,
//  332                                        afAddrType_t *srcAddr, uint8 seqNum );
//  333 static void esp_PublishTopupLogCB( zclCCPublishTopupLog_t *pCmd,
//  334                                        afAddrType_t *srcAddr, uint8 seqNum );
//  335 static void esp_PublishDebtLogCB( zclCCPublishDebtLog_t *pCmd,
//  336                                        afAddrType_t *srcAddr, uint8 seqNum );
//  337 #endif  // SE_UK_EXT
//  338 
//  339 /************************************************************************/
//  340 /***               Functions to process ZCL Foundation                ***/
//  341 /***               incoming Command/Response messages                 ***/
//  342 /************************************************************************/
//  343 static void esp_ProcessZCLMsg( zclIncomingMsg_t *msg );
//  344 #if defined ( ZCL_READ )
//  345 static uint8 esp_ProcessInReadRspCmd( zclIncomingMsg_t *pInMsg );
//  346 #endif // ZCL_READ
//  347 #if defined ( ZCL_WRITE )
//  348 static uint8 esp_ProcessInWriteRspCmd( zclIncomingMsg_t *pInMsg );
//  349 #endif // ZCL_WRITE
//  350 #if defined ( ZCL_REPORT )
//  351 static uint8 esp_ProcessInConfigReportCmd( zclIncomingMsg_t *pInMsg );
//  352 static uint8 esp_ProcessInConfigReportRspCmd( zclIncomingMsg_t *pInMsg );
//  353 static uint8 esp_ProcessInReadReportCfgCmd( zclIncomingMsg_t *pInMsg );
//  354 static uint8 esp_ProcessInReadReportCfgRspCmd( zclIncomingMsg_t *pInMsg );
//  355 static uint8 esp_ProcessInReportCmd( zclIncomingMsg_t *pInMsg );
//  356 #endif // ZCL_REPORT
//  357 static uint8 esp_ProcessInDefaultRspCmd( zclIncomingMsg_t *pInMsg );
//  358 #if defined ( ZCL_DISCOVER )
//  359 static uint8 esp_ProcessInDiscRspCmd( zclIncomingMsg_t *pInMsg );
//  360 #endif // ZCL_DISCOVER
//  361 
//  362 // Functions to handle ZDO messages
//  363 static void esp_ProcessZDOMsg( zdoIncomingMsg_t *inMsg );
//  364 
//  365 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
//  366 static void esp_MirrorInit( void );
//  367 static uint8 esp_GetMirrorEndpoint( afAddrType_t *srcAddr );
//  368 static uint8 esp_AllocMirror( afAddrType_t *srcAddr );
//  369 static void esp_FreeMirror( uint8 endPoint );
//  370 static uint8 esp_IsMirrorEndpoint( uint8 endpoint );
//  371 static void esp_MirrorProcessZCLMsg( zclIncomingMsg_t *pInMsg );
//  372 static espMirrorInfo_t *esp_GetMirrorInfo( uint8 endpoint );
//  373 static uint8 esp_MirrorUpdateAttribute( uint8 endpoint, uint16 cluster,
//  374                                         zclReport_t *pReport );
//  375 static void esp_MirrorInitAttributeSet( uint8 endpoint );
//  376 
//  377 static espMirrorControl_t esp_MirrorControl;
//  378 #endif  // SE_UK_EXT && SE_MIRROR
//  379 
//  380 /*********************************************************************
//  381  * ZCL General Clusters Callback table
//  382  */

        RSEG XDATA_I:XDATA:NOROOT(0)
//  383 static zclGeneral_AppCallbacks_t esp_GenCmdCallbacks =
esp_GenCmdCallbacks:
        DATA8
        DS 30
        REQUIRE `?<Initializer for esp_GenCmdCallbacks>`
        REQUIRE __INIT_XDATA_I
//  384 {
//  385   esp_BasicResetCB,              // Basic Cluster Reset command
//  386   esp_IdentifyCB,                // Identify command
//  387   esp_IdentifyQueryRspCB,        // Identify Query Response command
//  388   NULL,                          // On/Off cluster commands
//  389   NULL,                          // Level Control Move to Level command
//  390   NULL,                          // Level Control Move command
//  391   NULL,                          // Level Control Step command
//  392   NULL,                          // Level Control Stop command
//  393   NULL,                          // Group Response commands
//  394   NULL,                          // Scene Store Request command
//  395   NULL,                          // Scene Recall Request command
//  396   NULL,                          // Scene Response command
//  397   esp_AlarmCB,                   // Alarm (Response) command
//  398 #ifdef SE_UK_EXT
//  399   esp_GetEventLogCB,             // Get Event Log command
//  400   esp_PublishEventLogCB,         // Publish Event Log command
//  401 #endif
//  402   NULL,                          // RSSI Location command
//  403   NULL                           // RSSI Location Response command
//  404 };
//  405 
//  406 /*********************************************************************
//  407  * ZCL SE Clusters Callback table
//  408  */

        RSEG XDATA_I:XDATA:NOROOT(0)
//  409 static zclSE_AppCallbacks_t esp_SECmdCallbacks =
esp_SECmdCallbacks:
        DATA8
        DS 66
        REQUIRE `?<Initializer for esp_SECmdCallbacks>`
        REQUIRE __INIT_XDATA_I
//  410 {
//  411   esp_PublishPriceCB,                      // Publish Price
//  412   esp_PublishBlockPeriodCB,                // Publish Block Period
//  413 #if defined ( SE_UK_EXT )
//  414   esp_PublishTariffInformationCB,          // Publish Tariff Information
//  415   esp_PublishPriceMatrixCB,                // Publish Price Matrix
//  416   esp_PublishBlockThresholdsCB,            // Publish Block Thresholds
//  417   esp_PublishConversionFactorCB,           // Publish Conversion Factor
//  418   esp_PublishCalorificValueCB,             // Publish Calorific Value
//  419   esp_PublishCO2ValueCB,                   // Publish CO2 Value
//  420   esp_PublishCPPEventCB,                   // Publish CPP Event
//  421   esp_PublishBillingPeriodCB,              // Publish Billing Period
//  422   esp_PublishConsolidatedBillCB,           // Publish Consolidated Bill
//  423   esp_PublishCreditPaymentInfoCB,          // Publish Credit Payment Info
//  424 #endif  // SE_UK_EXT
//  425   esp_GetCurrentPriceCB,                   // Get Current Price
//  426   esp_GetScheduledPriceCB,                 // Get Scheduled Price
//  427   esp_PriceAcknowledgementCB,              // Price Acknowledgement
//  428   esp_GetBlockPeriodCB,                    // Get Block Period
//  429 #if defined ( SE_UK_EXT )
//  430   esp_GetTariffInformationCB,              // Get Tariff Information
//  431   esp_GetPriceMatrixCB,                    // Get Price Matrix
//  432   esp_GetBlockThresholdsCB,                // Get Block Thresholds
//  433   esp_GetConversionFactorCB,               // Get Conversion Factor
//  434   esp_GetCalorificValueCB,                 // Get Calorific Value
//  435   esp_GetCO2ValueCB,                       // Get CO2 Value
//  436   esp_GetBillingPeriodCB,                  // Get Billing Period
//  437   esp_GetConsolidatedBillCB,               // Get Consolidated Bill
//  438   esp_CPPEventResponseCB,                  // CPP Event Response
//  439 #endif  // SE_UK_EXT
//  440   esp_LoadControlEventCB,                  // Load Control Event
//  441   esp_CancelLoadControlEventCB,            // Cancel Load Control Event
//  442   esp_CancelAllLoadControlEventsCB,        // Cancel All Load Control Events
//  443   esp_ReportEventStatusCB,                 // Report Event Status
//  444   esp_GetScheduledEventCB,                 // Get Scheduled Event
//  445   esp_GetProfileRspCB,                     // Get Profile Response
//  446   esp_ReqMirrorCmdCB,                      // Request Mirror Command
//  447   esp_MirrorRemCmdCB,                      // Mirror Remove Command
//  448   esp_ReqFastPollModeRspCB,                // Request Fast Poll Mode Response
//  449 #if defined ( SE_UK_EXT )
//  450   esp_GetSnapshotRspCB,                    // Get Snapshot Response
//  451 #endif  // SE_UK_EXT
//  452   esp_GetProfileCmdCB,                     // Get Profile Command
//  453   esp_ReqMirrorRspCB,                      // Request Mirror Response
//  454   esp_MirrorRemRspCB,                      // Mirror Remove Response
//  455   esp_ReqFastPollModeCmdCB,                // Request Fast Poll Mode Command
//  456 #if defined ( SE_UK_EXT )
//  457   NULL,                                    // Get Snapshot Command
//  458   NULL,                                    // Take Snapshot Command
//  459   NULL,                                    // Mirror Report Attribute Response
//  460 #endif  // SE_UK_EXT
//  461   esp_DisplayMessageCB,                    // Display Message Command
//  462   esp_CancelMessageCB,                     // Cancel Message Command
//  463   esp_GetLastMessageCB,                    // Get Last Message Command
//  464   esp_MessageConfirmationCB,               // Message Confirmation
//  465   NULL,                                    // Request Tunnel Response
//  466   NULL,                                    // Transfer Data
//  467   NULL,                                    // Transfer Data Error
//  468   NULL,                                    // Ack Transfer Data
//  469   NULL,                                    // Ready Data
//  470 #if defined ( SE_UK_EXT )
//  471   NULL,                                    // Supported Tunnel Protocols Response
//  472   NULL,                                    // Tunnel Closure Notification
//  473 #endif  // SE_UK_EXT
//  474   NULL,                                    // Request Tunnel
//  475   NULL,                                    // Close Tunnel
//  476 #if defined ( SE_UK_EXT )
//  477   NULL,                                    // Get Supported Tunnel Protocols
//  478 #endif  // SE_UK_EXT
//  479   esp_SupplyStatusRspCB,                   // Supply Status Response
//  480 #if defined ( SE_UK_EXT )
//  481   esp_GetPrepaySnapshotResponseCB,         // Get Prepay Snapshot Response
//  482   esp_ChangePaymentModeResponseCB,         // Change Payment Mode Response
//  483   esp_ConsumerTopupResponseCB,             // Consumer Topup Response
//  484   esp_GetCommandsCB,                       // Get Commands
//  485   esp_PublishTopupLogCB,                   // Publish Topup Log
//  486   esp_PublishDebtLogCB,                    // Publish Debt Log
//  487 #endif  // SE_UK_EXT
//  488   esp_SelAvailEmergencyCreditCmdCB,        // Select Available Emergency Credit Command
//  489   esp_ChangeSupplyCmdCB,                   // Change Supply Command
//  490 #if defined ( SE_UK_EXT )
//  491   esp_ChangeDebtCB,                        // Change Debt
//  492   esp_EmergencyCreditSetupCB,              // Emergency Credit Setup
//  493   esp_ConsumerTopupCB,                     // Consumer Topup
//  494   esp_CreditAdjustmentCB,                  // Credit Adjustment
//  495   esp_ChangePaymentModeCB,                 // Change PaymentMode
//  496   esp_GetPrepaySnapshotCB,                 // Get Prepay Snapshot
//  497   esp_GetTopupLogCB,                       // Get Topup Log
//  498   esp_SetLowCreditWarningLevelCB,          // Set Low Credit Warning Level
//  499   esp_GetDebtRepaymentLogCB,               // Get Debt Repayment Log
//  500   NULL,                                    // Publish Calendar
//  501   NULL,                                    // Publish Day Profile
//  502   NULL,                                    // Publish Week Profile
//  503   NULL,                                    // Publish Seasons
//  504   NULL,                                    // Publish Special Days
//  505   NULL,                                    // Get Calendar
//  506   NULL,                                    // Get Day Profiles
//  507   NULL,                                    // Get Week Profiles
//  508   NULL,                                    // Get Seasons
//  509   NULL,                                    // Get Special Days
//  510   NULL,                                    // Publish Change Tenancy
//  511   NULL,                                    // Publish Change Supplier
//  512   NULL,                                    // Change Supply
//  513   NULL,                                    // Change Password
//  514   NULL,                                    // Local Change Supply
//  515   NULL,                                    // Get Change Tenancy
//  516   NULL,                                    // Get Change Supplier
//  517   NULL,                                    // Get Change Supply
//  518   NULL,                                    // Supply Status Response
//  519   NULL,                                    // Get Password
//  520 #endif  // SE_UK_EXT
//  521 };
//  522 
//  523 /*********************************************************************
//  524  * @fn          esp_Init
//  525  *
//  526  * @brief       Initialization function for the ZCL App Application.
//  527  *
//  528  * @param       uint8 task_id - esp task id
//  529  *
//  530  * @return      none
//  531  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  532 void esp_Init( uint8 task_id )
esp_Init:
          CFI Block cfiBlock0 Using cfiCommon0
          CFI Function esp_Init
        CODE
//  533 {
        FUNCALL esp_Init, zclSE_Init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zclGeneral_RegisterCmdCallbacks
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zclSE_RegisterCmdCallbacks
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zcl_registerAttrList
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zcl_registerClusterOptionList
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zcl_registerValidateAttrData
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zcl_registerForMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, RegisterForKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, StubAPS_RegisterApp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_Init, zgSetItem
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 13, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 13, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 1
        MOV     A,#-0x1
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 11)
        MOV     A,R1
        MOV     R6,A
//  534   espTaskID = task_id;
        MOV     DPTR,#espTaskID
        MOVX    @DPTR,A
//  535 
//  536   // Register for an SE endpoint
//  537   zclSE_Init( &espSimpleDesc );
        ; Setup parameters for call to function zclSE_Init
        MOV     R2,#espSimpleDesc & 0xff
        MOV     R3,#(espSimpleDesc >> 8) & 0xff
        LCALL   ??zclSE_Init?relay
//  538 
//  539   // Register the ZCL General Cluster Library callback functions
//  540   zclGeneral_RegisterCmdCallbacks( ESP_ENDPOINT, &esp_GenCmdCallbacks );
        ; Setup parameters for call to function zclGeneral_RegisterCmdCallbacks
        MOV     R2,#esp_GenCmdCallbacks & 0xff
        MOV     R3,#(esp_GenCmdCallbacks >> 8) & 0xff
        MOV     R1,#0x9
        LCALL   ??zclGeneral_RegisterCmdCallbacks?relay
        MOV     A,R1
//  541 
//  542   // Register the ZCL SE Cluster Library callback functions
//  543   zclSE_RegisterCmdCallbacks( ESP_ENDPOINT, &esp_SECmdCallbacks );
        ; Setup parameters for call to function zclSE_RegisterCmdCallbacks
        MOV     R2,#esp_SECmdCallbacks & 0xff
        MOV     R3,#(esp_SECmdCallbacks >> 8) & 0xff
        MOV     R1,#0x9
        LCALL   ??zclSE_RegisterCmdCallbacks?relay
        MOV     A,R1
//  544 
//  545   // Register the application's attribute list
//  546   zcl_registerAttrList( ESP_ENDPOINT, ESP_MAX_ATTRIBUTES, espAttrs );
        ; Setup parameters for call to function zcl_registerAttrList
        MOV     R4,#espAttrs & 0xff
        MOV     R5,#(espAttrs >> 8) & 0xff
        MOV     R2,#0x59
        MOV     R1,#0x9
        LCALL   ??zcl_registerAttrList?relay
        MOV     A,R1
//  547 
//  548   // Register the application's cluster option list
//  549   zcl_registerClusterOptionList( ESP_ENDPOINT, ESP_MAX_OPTIONS, espOptions );
        ; Setup parameters for call to function zcl_registerClusterOptionList
        MOV     R4,#espOptions & 0xff
        MOV     R5,#(espOptions >> 8) & 0xff
        MOV     R2,#0x7
        MOV     R1,#0x9
        LCALL   ??zcl_registerClusterOptionList?relay
        MOV     A,R1
//  550 
//  551   // Register the application's attribute data validation callback function
//  552   zcl_registerValidateAttrData( esp_ValidateAttrDataCB );
        ; Setup parameters for call to function zcl_registerValidateAttrData
        MOV     R2,#??esp_ValidateAttrDataCB?relay & 0xff
        MOV     R3,#(??esp_ValidateAttrDataCB?relay >> 8) & 0xff
        LCALL   ??zcl_registerValidateAttrData?relay
        MOV     A,R1
//  553 
//  554   // Register the Application to receive the unprocessed Foundation command/response messages
//  555   zcl_registerForMsg( espTaskID );
        ; Setup parameters for call to function zcl_registerForMsg
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??zcl_registerForMsg?relay
        MOV     A,R1
//  556 
//  557   // register for end device annce and simple descriptor responses
//  558   ZDO_RegisterForZDOMsg( espTaskID, Device_annce );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x13
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
        MOV     A,R1
//  559   ZDO_RegisterForZDOMsg( espTaskID, Simple_Desc_rsp );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x4
        MOV     R3,#-0x80
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
        MOV     A,R1
//  560 
//  561   // Register for all key events - This app will handle all key events
//  562   RegisterForKeys( espTaskID );
        ; Setup parameters for call to function RegisterForKeys
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??RegisterForKeys?relay
        MOV     A,R1
//  563 
//  564 #if defined ( INTER_PAN )
//  565   // Register with Stub APS
//  566   StubAPS_RegisterApp( &espEp );
        ; Setup parameters for call to function StubAPS_RegisterApp
        MOV     R2,#espEp & 0xff
        MOV     R3,#(espEp >> 8) & 0xff
        LCALL   ??StubAPS_RegisterApp?relay
//  567 #endif
//  568 
//  569   // Start the timer to sync esp timer with the osal timer
//  570   osal_start_timerEx( espTaskID, ESP_UPDATE_TIME_EVT, ESP_UPDATE_TIME_PERIOD );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x2
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  571 
//  572   // setup address mode and destination endpoint fields for PCT
//  573   pctAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#pctAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  574   pctAddr.endPoint = ESP_ENDPOINT;
        MOV     DPTR,#pctAddr + 9
        MOV     A,#0x9
        MOVX    @DPTR,A
//  575 
//  576   // setup address mode and destination endpoint fields for load control device
//  577   loadControlAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#loadControlAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
//  578   loadControlAddr.endPoint = ESP_ENDPOINT;
        MOV     DPTR,#loadControlAddr + 9
        MOV     A,#0x9
        MOVX    @DPTR,A
//  579 
//  580   //setup load control command structure
//  581   loadControlCmd.issuerEvent = 0x12345678;            // arbitrary id
        MOV     R2,#0x78
        MOV     R3,#0x56
        MOV     R4,#0x34
        MOV     R5,#0x12
        MOV     DPTR,#loadControlCmd
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
//  582   loadControlCmd.deviceGroupClass = 0x000000;         // addresses all groups
        MOV     R2,#0x0
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     DPTR,#loadControlCmd + 4
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
//  583   loadControlCmd.startTime = 0x00000000;              // start time = NOW
        MOV     R2,#0x0
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     DPTR,#loadControlCmd + 8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
//  584   loadControlCmd.durationInMinutes = 0x0001;          // duration of one minute
        MOV     DPTR,#loadControlCmd + 12
        MOV     A,#0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  585   loadControlCmd.criticalityLevel = 0x01;             // green level
        MOV     DPTR,#loadControlCmd + 14
        MOV     A,#0x1
        MOVX    @DPTR,A
//  586   loadControlCmd.coolingTemperatureSetPoint = 0x076C; // 19 degrees C, 66.2 degress fahrenheit
        MOV     DPTR,#loadControlCmd + 17
        MOV     A,#0x6c
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x7
        MOVX    @DPTR,A
//  587   loadControlCmd.eventControl = 0x00;                 // no randomized start or end applied
        MOV     DPTR,#loadControlCmd + 23
        MOV     A,#0x0
        MOVX    @DPTR,A
//  588 
//  589   // Initialize variable used to control number of fast poll events
//  590   espFastPollModeDuration = 0;
        MOV     DPTR,#espFastPollModeDuration
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//  591 
//  592   // detect and remove stored deprecated end device children after power up
//  593   uint8 cleanupChildTable = TRUE;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x1
        MOVX    @DPTR,A
//  594   zgSetItem( ZCD_NV_ROUTER_OFF_ASSOC_CLEANUP, sizeof(cleanupChildTable), &cleanupChildTable );
        ; Setup parameters for call to function zgSetItem
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 13)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#0x3c
        MOV     R3,#0x0
        LCALL   ??zgSetItem?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 11)
//  595 
//  596 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
//  597   esp_MirrorInit();
//  598 #endif  // SE_UK_EXT && SE_MIRROR
//  599 
//  600 }
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock0
//  601 
//  602 /*********************************************************************
//  603  * @fn          esp_event_loop
//  604  *
//  605  * @brief       Event Loop Processor for esp.
//  606  *
//  607  * @param       uint8 task_id - esp task id
//  608  * @param       uint16 events - event bitmask
//  609  *
//  610  * @return      none
//  611  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  612 uint16 esp_event_loop( uint8 task_id, uint16 events )
esp_event_loop:
          CFI Block cfiBlock1 Using cfiCommon0
          CFI Function esp_event_loop
        CODE
//  613 {
        FUNCALL esp_event_loop, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, esp_ProcessAppMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, esp_ProcessZCLMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, esp_HandleKeys
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, esp_ProcessZDOMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, osal_msg_deallocate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, esp_ProcessIdentifyTimeChange
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, osal_getClock
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, ZDP_SimpleDescReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_event_loop, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     ?V0 + 2,R1
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  614   afIncomingMSGPacket_t *MSGpkt;
//  615 
//  616   if ( events & SYS_EVENT_MSG )
        MOV     A,R6
        ANL     A,#0x0
        MOV     R0,A
        MOV     A,R7
        ANL     A,#0x80
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     $+5
        LJMP    ??esp_event_loop_0 & 0xFFFF
//  617   {
//  618     while ( (MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( espTaskID )) )
??esp_event_loop_1:
        ; Setup parameters for call to function osal_msg_receive
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_msg_receive?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        MOV     ?V0 + 0,R0
        MOV     ?V0 + 1,R1
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_event_loop_2
//  619     {
//  620       switch ( MSGpkt->hdr.event )
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        ADD     A,#-0x23
        JZ      ??esp_event_loop_3
        ADD     A,#-0x11
        JZ      ??esp_event_loop_4
        ADD     A,#0x74
        JZ      ??esp_event_loop_5
        ADD     A,#-0x13
        JZ      ??esp_event_loop_6
        SJMP    ??esp_event_loop_7
//  621       {
//  622         case MT_SYS_APP_MSG:
//  623           // Message received from MT (serial port)
//  624           esp_ProcessAppMsg( ((mtSysAppMsg_t *)MSGpkt)->appData );
??esp_event_loop_3:
        ; Setup parameters for call to function esp_ProcessAppMsg
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??esp_ProcessAppMsg?relay
//  625           break;
        SJMP    ??esp_event_loop_7
//  626 
//  627         case ZCL_INCOMING_MSG:
//  628           // Incoming ZCL foundation command/response messages
//  629           esp_ProcessZCLMsg( (zclIncomingMsg_t *)MSGpkt );
??esp_event_loop_4:
        ; Setup parameters for call to function esp_ProcessZCLMsg
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??esp_ProcessZCLMsg?relay
//  630           break;
        SJMP    ??esp_event_loop_7
//  631 
//  632         case KEY_CHANGE:
//  633           esp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
??esp_event_loop_5:
        ; Setup parameters for call to function esp_HandleKeys
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??esp_HandleKeys?relay
//  634           break;
        SJMP    ??esp_event_loop_7
//  635 
//  636         case ZDO_CB_MSG:
//  637           // ZDO sends the message that we registered for
//  638           esp_ProcessZDOMsg( (zdoIncomingMsg_t *)MSGpkt );
??esp_event_loop_6:
        ; Setup parameters for call to function esp_ProcessZDOMsg
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??esp_ProcessZDOMsg?relay
//  639           break;
//  640 
//  641         default:
//  642           break;
//  643       }
//  644 
//  645       // Release the memory
//  646       osal_msg_deallocate( (uint8 *)MSGpkt );
??esp_event_loop_7:
        ; Setup parameters for call to function osal_msg_deallocate
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??osal_msg_deallocate?relay
        MOV     A,R1
        SJMP    ??esp_event_loop_1
//  647 
//  648     }
//  649 
//  650     // return unprocessed events
//  651     return (events ^ SYS_EVENT_MSG);
??esp_event_loop_2:
        MOV     A,R6
        XRL     A,#0x0
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x80
        MOV     R3,A
        LJMP    ??esp_event_loop_8 & 0xFFFF
//  652   }
//  653 
//  654   // handle processing of identify timeout event triggered by an identify command
//  655   if ( events & ESP_IDENTIFY_TIMEOUT_EVT )
??esp_event_loop_0:
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        JNC     ??esp_event_loop_9
//  656   {
//  657     if ( espIdentifyTime > 0 )
        MOV     DPTR,#espIdentifyTime
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_event_loop_10
//  658     {
//  659       espIdentifyTime--;
        MOV     DPTR,#espIdentifyTime
        MOVX    A,@DPTR
        ADD     A,#-0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#-0x1
        MOVX    @DPTR,A
//  660     }
//  661     esp_ProcessIdentifyTimeChange();
??esp_event_loop_10:
        ; Setup parameters for call to function esp_ProcessIdentifyTimeChange
        LCALL   ??esp_ProcessIdentifyTimeChange?relay
//  662 
//  663     return ( events ^ ESP_IDENTIFY_TIMEOUT_EVT );
        MOV     A,R6
        XRL     A,#0x1
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x0
        MOV     R3,A
        LJMP    ??esp_event_loop_8 & 0xFFFF
//  664   }
//  665 
//  666   // event to get current time
//  667   if ( events & ESP_UPDATE_TIME_EVT )
??esp_event_loop_9:
        MOV     A,R6
        ANL     A,#0x2
        JZ      ??esp_event_loop_11
//  668   {
//  669     espTime = osal_getClock();
        ; Setup parameters for call to function osal_getClock
        LCALL   ??osal_getClock?relay
        MOV     DPTR,#espTime
        LCALL   ?XSTORE_R2345
//  670     osal_start_timerEx( espTaskID, ESP_UPDATE_TIME_EVT, ESP_UPDATE_TIME_PERIOD );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x2
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  671 
//  672     return ( events ^ ESP_UPDATE_TIME_EVT );
        MOV     A,R6
        XRL     A,#0x2
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x0
        MOV     R3,A
        SJMP    ??esp_event_loop_8
//  673   }
//  674 
//  675 
//  676   // event to get simple descriptor of the newly joined device
//  677   if ( events & SIMPLE_DESC_QUERY_EVT )
??esp_event_loop_11:
        MOV     A,R6
        ANL     A,#0x4
        JZ      ??esp_event_loop_12
//  678   {
//  679       ZDP_SimpleDescReq( &simpleDescReqAddr, simpleDescReqAddr.addr.shortAddr,
//  680                         ESP_ENDPOINT, 0);
        ; Setup parameters for call to function ZDP_SimpleDescReq
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 3
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 15)
        MOV     R1,#0x9
        MOV     DPTR,#simpleDescReqAddr
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     R2,#simpleDescReqAddr & 0xff
        MOV     R3,#(simpleDescReqAddr >> 8) & 0xff
        LCALL   ??ZDP_SimpleDescReq?relay
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     A,R1
//  681 
//  682       return ( events ^ SIMPLE_DESC_QUERY_EVT );
        MOV     A,R6
        XRL     A,#0x4
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x0
        MOV     R3,A
        SJMP    ??esp_event_loop_8
//  683   }
//  684 
//  685   // handle processing of timeout event triggered by request fast polling command
//  686   if ( events & ESP_FAST_POLL_MODE_EVT )
??esp_event_loop_12:
        MOV     A,R6
        ANL     A,#0x8
        JZ      ??esp_event_loop_13
//  687   {
//  688     if (espFastPollModeDuration)
        MOV     DPTR,#espFastPollModeDuration
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_event_loop_14
//  689     {
//  690       espFastPollModeDuration--;
        MOV     DPTR,#espFastPollModeDuration
        MOVX    A,@DPTR
        ADD     A,#-0x1
        MOVX    @DPTR,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#-0x1
        MOVX    @DPTR,A
//  691       // Start the timer for the fast poll period
//  692       osal_start_timerEx( espTaskID, ESP_FAST_POLL_MODE_EVT, ESP_FAST_POLL_TIMER_PERIOD );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x8
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  693     }
//  694 
//  695     return ( events ^ ESP_FAST_POLL_MODE_EVT );
??esp_event_loop_14:
        MOV     A,R6
        XRL     A,#0x8
        MOV     R2,A
        MOV     A,R7
        XRL     A,#0x0
        MOV     R3,A
        SJMP    ??esp_event_loop_8
//  696   }
//  697 
//  698   // Discard unknown events
//  699   return 0;
??esp_event_loop_13:
        MOV     R2,#0x0
        MOV     R3,#0x0
??esp_event_loop_8:
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock1
//  700 }
//  701 
//  702 /*********************************************************************
//  703  * @fn      esp_ProcessAppMsg
//  704  *
//  705  * @brief   Process MT SYS APP MSG
//  706  *
//  707  * @param   msg - pointer to message
//  708  *
//  709  * @return  none
//  710  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  711 static void esp_ProcessAppMsg( uint8 *msg )
esp_ProcessAppMsg:
          CFI Block cfiBlock2 Using cfiCommon0
          CFI Function esp_ProcessAppMsg
        CODE
//  712 {
        ; Saved register size: 0
        ; Auto size: 0
//  713   // user should include code to handle MT SYS APP MSG here
//  714 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock2
//  715 
//  716 /*********************************************************************
//  717  * @fn      esp_ProcessIdentifyTimeChange
//  718  *
//  719  * @brief   Called to blink led for specified IdentifyTime attribute value
//  720  *
//  721  * @param   none
//  722  *
//  723  * @return  none
//  724  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  725 static void esp_ProcessIdentifyTimeChange( void )
esp_ProcessIdentifyTimeChange:
          CFI Block cfiBlock3 Using cfiCommon0
          CFI Function esp_ProcessIdentifyTimeChange
        CODE
//  726 {
        FUNCALL esp_ProcessIdentifyTimeChange, osal_start_timerEx
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessIdentifyTimeChange, HalLedBlink
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessIdentifyTimeChange, HalLedSet
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessIdentifyTimeChange, osal_stop_timerEx
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH    DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  727   if ( espIdentifyTime > 0 )
        MOV     DPTR,#espIdentifyTime
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_ProcessIdentifyTimeChange_0
//  728   {
//  729     osal_start_timerEx( espTaskID, ESP_IDENTIFY_TIMEOUT_EVT, 1000 );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
//  730     HalLedBlink ( HAL_LED_4, 0xFF, HAL_LED_DEFAULT_DUTY_CYCLE, HAL_LED_DEFAULT_FLASH_TIME );
        ; Setup parameters for call to function HalLedBlink
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R3,#0x5
        MOV     R2,#-0x1
        MOV     R1,#0x8
        LCALL   ??HalLedBlink?relay
        SJMP    ??esp_ProcessIdentifyTimeChange_1
//  731   }
//  732   else
//  733   {
//  734     HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
??esp_ProcessIdentifyTimeChange_0:
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x0
        MOV     R1,#0x8
        LCALL   ??HalLedSet?relay
        MOV     A,R1
//  735     osal_stop_timerEx( espTaskID, ESP_IDENTIFY_TIMEOUT_EVT );
        ; Setup parameters for call to function osal_stop_timerEx
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_stop_timerEx?relay
        MOV     A,R1
//  736   }
//  737 }
??esp_ProcessIdentifyTimeChange_1:
        POP     DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP     DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP    ?BRET
          CFI EndBlock cfiBlock3
//  738 
//  739 
//  740 /*********************************************************************
//  741  * @fn      esp_HandleKeys
//  742  *
//  743  * @brief   Handles all key events for this device.
//  744  *
//  745  * @param   shift - true if in shift/alt.
//  746  * @param   keys - bit field for key events. Valid entries:
//  747  *                 HAL_KEY_SW_4
//  748  *                 HAL_KEY_SW_3
//  749  *                 HAL_KEY_SW_2
//  750  *                 HAL_KEY_SW_1
//  751  *
//  752  * @return  none
//  753  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  754 static void esp_HandleKeys( uint8 shift, uint8 keys )
esp_HandleKeys:
          CFI Block cfiBlock4 Using cfiCommon0
          CFI Function esp_HandleKeys
        CODE
//  755 {
        FUNCALL esp_HandleKeys, zclSE_LoadControl_Send_LoadControlEvent
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 47, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 47, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_HandleKeys, zclSE_LoadControl_Send_LoadControlEvent
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 47, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 47, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_HandleKeys, zclSE_Message_Send_DisplayMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 47, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 47, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 35
        MOV     A,#-0x23
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 45)
        MOV     A,R1
        MOV     R6,A
        MOV     A,R2
        MOV     R7,A
//  756   // Shift is used to make each button/switch dual purpose.
//  757   if ( shift )
        MOV     A,R6
        JZ      $+5
        LJMP    ??esp_HandleKeys_0 & 0xFFFF
//  758   {
//  759     if ( keys & HAL_KEY_SW_1 )
//  760     {
//  761     }
//  762     if ( keys & HAL_KEY_SW_2 )
//  763     {
//  764     }
//  765     if ( keys & HAL_KEY_SW_3 )
//  766     {
//  767     }
//  768     if ( keys & HAL_KEY_SW_4 )
//  769     {
//  770     }
//  771   }
//  772   else
//  773   {
//  774     if ( keys & HAL_KEY_SW_1 )
        MOV     A,R7
        MOV     C,0xE0 /* A   */.0
        JNC     ??esp_HandleKeys_1
//  775     {
//  776       // send out cooling event to PCT
//  777       loadControlCmd.deviceGroupClass = HVAC_DEVICE_CLASS; // HVAC compressor or furnace - bit 0 is set
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     DPTR,#loadControlCmd + 4
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
//  778       zclSE_LoadControl_Send_LoadControlEvent( ESP_ENDPOINT, &pctAddr, &loadControlCmd, TRUE, 0 );
        ; Setup parameters for call to function zclSE_LoadControl_Send_LoadControlEvent
        MOV     ?V0 + 0,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 46)
        MOV     ?V0 + 0,#0x1
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 47)
        MOV     R4,#loadControlCmd & 0xff
        MOV     R5,#(loadControlCmd >> 8) & 0xff
        MOV     R2,#pctAddr & 0xff
        MOV     R3,#(pctAddr >> 8) & 0xff
        MOV     R1,#0x9
        LCALL   ??zclSE_LoadControl_Send_LoadControlEvent?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 45)
        MOV     A,R1
//  779     }
//  780 
//  781     if ( keys & HAL_KEY_SW_2 )
??esp_HandleKeys_1:
        MOV     A,R7
        MOV     C,0xE0 /* A   */.1
        JNC     ??esp_HandleKeys_2
//  782     {
//  783       // send out load control event to load control device
//  784       loadControlCmd.deviceGroupClass = ONOFF_LOAD_DEVICE_CLASS; // simple misc residential on/off loads - bit 7 is set
        MOV     R2,#-0x80
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     DPTR,#loadControlCmd + 4
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
//  785       zclSE_LoadControl_Send_LoadControlEvent( ESP_ENDPOINT, &loadControlAddr, &loadControlCmd, TRUE, 0 );
        ; Setup parameters for call to function zclSE_LoadControl_Send_LoadControlEvent
        MOV     ?V0 + 0,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 46)
        MOV     ?V0 + 0,#0x1
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 47)
        MOV     R4,#loadControlCmd & 0xff
        MOV     R5,#(loadControlCmd >> 8) & 0xff
        MOV     R2,#loadControlAddr & 0xff
        MOV     R3,#(loadControlAddr >> 8) & 0xff
        MOV     R1,#0x9
        LCALL   ??zclSE_LoadControl_Send_LoadControlEvent?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 45)
        MOV     A,R1
//  786     }
//  787 
//  788     if ( keys & HAL_KEY_SW_3 )
??esp_HandleKeys_2:
        MOV     A,R7
        MOV     C,0xE0 /* A   */.4
        JNC     ??esp_HandleKeys_0
//  789     {
//  790       zclCCDisplayMessage_t displayCmd;             // command structure for message being sent to in premise display
//  791 
//  792       // Define to zero to send the TI IPD message, non-zero to send a string of abc's.
//  793 #if   !defined IPD_MSG_SZ
//  794       #define  IPD_MSG_SZ  0
//  795 #endif
//  796 #if   (IPD_MSG_SZ == 0)
//  797       uint8 msgBuf[]="TI IPD Test Msg!";
        MOV     DPTR,#`?<Constant "TI IPD Test Msg!">`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0x11
        LCALL   ?MOVE_LONG8_XDATA_XDATA
//  798       const uint8 msgLen = sizeof(msgBuf);
        MOV     ?V0 + 0,#0x11
//  799 #else
//  800       uint8 *msgBuf = osal_mem_alloc(IPD_MSG_SZ);
//  801       const uint8 msgLen = IPD_MSG_SZ;
//  802       uint8 idx;
//  803 
//  804       if (!msgBuf)  return;
//  805 
//  806       for (idx = 0; idx < msgLen; idx ++)
//  807       {
//  808         msgBuf[idx] = 'a' + idx % 26;
//  809       }
//  810 #endif
//  811 
//  812       displayCmd.msgString.strLen = msgLen;
        MOV     A,?V0 + 0
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
//  813       displayCmd.msgString.pStr = msgBuf;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,DPL
        MOV     R1,DPH
        MOV     A,#0x21
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  814 
//  815       zclSE_Message_Send_DisplayMessage( ESP_ENDPOINT, &ipdAddr, &displayCmd, TRUE, 0 );
        ; Setup parameters for call to function zclSE_Message_Send_DisplayMessage
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 46)
        MOV     ?V0 + 1,#0x1
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 47)
        MOV     A,#0x13
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#ipdAddr & 0xff
        MOV     R3,#(ipdAddr >> 8) & 0xff
        MOV     R1,#0x9
        LCALL   ??zclSE_Message_Send_DisplayMessage?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 45)
        MOV     A,R1
//  816 
//  817 #if   (IPD_MSG_SZ != 0)
//  818       osal_mem_free(msgBuf);
//  819 #endif
//  820     }
//  821 
//  822     if ( keys & HAL_KEY_SW_4 )
//  823     {
//  824 
//  825     }
//  826   }
//  827 }
??esp_HandleKeys_0:
        MOV     A,#0x23
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock4
//  828 
//  829 /*********************************************************************
//  830  * @fn      esp_ValidateAttrDataCB
//  831  *
//  832  * @brief   Check to see if the supplied value for the attribute data
//  833  *          is within the specified range of the attribute.
//  834  *
//  835  *
//  836  * @param   pAttr - pointer to attribute
//  837  * @param   pAttrInfo - pointer to attribute info
//  838  *
//  839  * @return  TRUE if data valid. FALSE otherwise.
//  840  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  841 static uint8 esp_ValidateAttrDataCB( zclAttrRec_t *pAttr, zclWriteRec_t *pAttrInfo )
esp_ValidateAttrDataCB:
          CFI Block cfiBlock5 Using cfiCommon0
          CFI Function esp_ValidateAttrDataCB
        CODE
//  842 {
        PUSH    DPL
          CFI DPL0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        PUSH    DPH
          CFI DPH0 Frame(CFA_SP, 5)
          CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  843   uint8 valid = TRUE;
        MOV     R1,#0x1
//  844 
//  845   switch ( pAttrInfo->dataType )
        MOV     DPL,R4
        MOV     DPH,R5
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x10
        JNZ     ??esp_ValidateAttrDataCB_0
//  846   {
//  847     case ZCL_DATATYPE_BOOLEAN:
//  848       if ( ( *(pAttrInfo->attrData) != 0 ) && ( *(pAttrInfo->attrData) != 1 ) )
        MOV     DPL,R4
        MOV     DPH,R5
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        JZ      ??esp_ValidateAttrDataCB_0
        MOV     DPL,R4
        MOV     DPH,R5
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        XRL     A,#0x1
        JZ      ??esp_ValidateAttrDataCB_0
//  849       {
//  850         valid = FALSE;
        MOV     R1,#0x0
//  851       }
//  852       break;
//  853 
//  854     default:
//  855       break;
//  856   }
//  857 
//  858   return ( valid );
??esp_ValidateAttrDataCB_0:
        POP     DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-4
        POP     DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-3
        LJMP    ?BRET
          CFI EndBlock cfiBlock5
//  859 }
//  860 
//  861 /*********************************************************************
//  862  * @fn      esp_BasicResetCB
//  863  *
//  864  * @brief   Callback from the ZCL General Cluster Library to set all
//  865  *          the attributes of all the clusters to their factory defaults
//  866  *
//  867  * @param   none
//  868  *
//  869  * @return  none
//  870  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  871 static void esp_BasicResetCB( void )
esp_BasicResetCB:
          CFI Block cfiBlock6 Using cfiCommon0
          CFI Function esp_BasicResetCB
        CODE
//  872 {
        ; Saved register size: 0
        ; Auto size: 0
//  873   // user should handle setting attributes to factory defaults here
//  874 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock6
//  875 
//  876 /*********************************************************************
//  877  * @fn      esp_IdentifyCB
//  878  *
//  879  * @brief   Callback from the ZCL General Cluster Library when
//  880  *          it received an Identify Command for this application.
//  881  *
//  882  * @param   pCmd - pointer to structure for Identify command
//  883  *
//  884  * @return  none
//  885  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  886 static void esp_IdentifyCB( zclIdentify_t *pCmd )
esp_IdentifyCB:
          CFI Block cfiBlock7 Using cfiCommon0
          CFI Function esp_IdentifyCB
        CODE
//  887 {
        FUNCALL esp_IdentifyCB, esp_ProcessIdentifyTimeChange
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  888   espIdentifyTime = pCmd->identifyTime;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#espIdentifyTime
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  889   esp_ProcessIdentifyTimeChange();
        ; Setup parameters for call to function esp_ProcessIdentifyTimeChange
        LCALL   ??esp_ProcessIdentifyTimeChange?relay
//  890 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock7
//  891 
//  892 /*********************************************************************
//  893  * @fn      esp_IdentifyQueryRspCB
//  894  *
//  895  * @brief   Callback from the ZCL General Cluster Library when
//  896  *          it received an Identity Query Response Command for this application.
//  897  *
//  898  * @param   pRsp - pointer to structure for Identity Query Response command
//  899  *
//  900  * @return  none
//  901  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  902 static void esp_IdentifyQueryRspCB( zclIdentifyQueryRsp_t *pRsp )
esp_IdentifyQueryRspCB:
          CFI Block cfiBlock8 Using cfiCommon0
          CFI Function esp_IdentifyQueryRspCB
        CODE
//  903 {
        ; Saved register size: 0
        ; Auto size: 0
//  904   // add user code here
//  905 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock8
//  906 
//  907 /*********************************************************************
//  908  * @fn      esp_AlarmCB
//  909  *
//  910  * @brief   Callback from the ZCL General Cluster Library when
//  911  *          it received an Alam request or response command for
//  912  *          this application.
//  913  *
//  914  * @param   pAlarm - pointer to structure for Alarm command
//  915  *
//  916  * @return  none
//  917  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  918 static void esp_AlarmCB( zclAlarm_t *pAlarm )
esp_AlarmCB:
          CFI Block cfiBlock9 Using cfiCommon0
          CFI Function esp_AlarmCB
        CODE
//  919 {
        ; Saved register size: 0
        ; Auto size: 0
//  920   // add user code here
//  921 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock9
//  922 
//  923 #ifdef SE_UK_EXT
//  924 /*********************************************************************
//  925  * @fn      esp_GetEventLogCB
//  926  *
//  927  * @brief   Callback from the ZCL General Cluster Library when
//  928  *          it received a Get Event Log command for this
//  929  *          application.
//  930  *
//  931  * @param   srcEP - source endpoint
//  932  * @param   srcAddr - pointer to source address
//  933  * @param   pEventLog - pointer to structure for Get Event Log command
//  934  * @param   seqNum - sequence number of this command
//  935  *
//  936  * @return  none
//  937  */
//  938 static void esp_GetEventLogCB( uint8 srcEP, afAddrType_t *srcAddr,
//  939                                zclGetEventLog_t *pEventLog, uint8 seqNum )
//  940 {
//  941   // add user code here, which could fragment the event log payload if
//  942   // the entire payload doesn't fit into one Publish Event Log Command.
//  943   // Note: the Command Index starts at 0 and is incremented for each
//  944   // fragment belonging to the same command.
//  945 
//  946   // There's no event log for now! The Metering Device will support
//  947   // logging for all events configured to do so.
//  948 }
//  949 
//  950 /*********************************************************************
//  951  * @fn      esp_PublishEventLogCB
//  952  *
//  953  * @brief   Callback from the ZCL General Cluster Library when
//  954  *          it received a Publish Event Log command for this
//  955  *          application.
//  956  *
//  957  * @param   srcAddr - pointer to source address
//  958  * @param   pEventLog - pointer to structure for Publish Event Log command
//  959  *
//  960  * @return  none
//  961  */
//  962 static void esp_PublishEventLogCB( afAddrType_t *srcAddr, zclPublishEventLog_t *pEventLog )
//  963 {
//  964   // add user code here
//  965 }
//  966 #endif // SE_UK_EXT
//  967 
//  968 /*********************************************************************
//  969  * @fn      esp_GetProfileCmdCB
//  970  *
//  971  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
//  972  *          it received a Get Profile Command for
//  973  *          this application.
//  974  *
//  975  * @param   pCmd - pointer to structure for Get Profile command
//  976  * @param   srcAddr - pointer to source address
//  977  * @param   seqNum - sequence number of this command
//  978  *
//  979  * @return  none
//  980  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  981 static void esp_GetProfileCmdCB( zclCCGetProfileCmd_t *pCmd,
esp_GetProfileCmdCB:
          CFI Block cfiBlock10 Using cfiCommon0
          CFI Function esp_GetProfileCmdCB
        CODE
//  982                                  afAddrType_t *srcAddr, uint8 seqNum )
//  983 {
        FUNCALL esp_GetProfileCmdCB, zclSE_SimpleMetering_Send_GetProfileRsp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 51, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 51, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x16
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 22)
        ; Saved register size: 22
        ; Auto size: 20
        MOV     A,#-0x14
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 42)
        MOV     ?V0 + 12,R2
        MOV     ?V0 + 13,R3
        MOV     ?V0 + 10,R4
        MOV     ?V0 + 11,R5
        MOV     ?V0 + 9,R1
//  984 #if defined ( ZCL_SIMPLE_METERING )
//  985   // Upon receipt of the Get Profile Command, the metering device shall send
//  986   // Get Profile Response back.
//  987 
//  988   // Variables in the following are initialized to arbitrary value for test purpose
//  989   // In real application, user shall look up the interval data captured during
//  990   // the period specified in the pCmd->endTime and return corresponding data.
//  991 
//  992   uint32 endTime;
//  993   uint8  status = zclSE_SimpleMeter_GetProfileRsp_Status_Success;
        MOV     ?V0 + 8,#0x0
//  994   uint8  profileIntervalPeriod = PROFILE_INTERVAL_PERIOD_60MIN;
        MOV     R7,#0x1
//  995   uint8  numberOfPeriodDelivered = 5;
        MOV     R6,#0x5
//  996   uint24 intervals[] = {0xa00001, 0xa00002, 0xa00003, 0xa00004, 0xa00005};
        MOV     DPTR,#`?<Constant {10485761L, 10485762L, 10485763L, 1`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0x14
        LCALL   ?MOVE_LONG8_XDATA_XDATA
//  997 
//  998   // endTime: 32 bit value (in UTC) representing the end time of the most
//  999   // chronologically recent interval being requested.
// 1000   // Example: Data collected from 2:00 PM to 3:00 PM would be specified as a
// 1001   // 3:00 PM interval (end time).
// 1002 
// 1003   // The Intervals block returned shall be the most recent block with
// 1004   // its EndTime equal or older to the one in the request (pCmd->endTime).
// 1005   // Requested End Time with value 0xFFFFFFFF indicats the most recent
// 1006   // Intervals block is requested.
// 1007 
// 1008   // Sample Code - assuming the end time of the requested block is the same as
// 1009   // it in the request.
// 1010   endTime = pCmd->endTime;
        MOV     DPL,?V0 + 12
        MOV     DPH,?V0 + 13
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,?V0 + 2
        MOV     ?V0 + 7,?V0 + 3
// 1011 
// 1012   // Send Get Profile Response Command back
// 1013 
// 1014   zclSE_SimpleMetering_Send_GetProfileRsp( ESP_ENDPOINT, srcAddr, endTime,
// 1015                                            status,
// 1016                                            profileIntervalPeriod,
// 1017                                            numberOfPeriodDelivered, intervals,
// 1018                                            FALSE, seqNum );
        ; Setup parameters for call to function zclSE_SimpleMetering_Send_GetProfileRsp
        MOV     A,?V0 + 9
        MOV     ?V0 + 0,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 43)
        MOV     ?V0 + 0,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 44)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 46)
        MOV     A,R6
        MOV     ?V0 + 0,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 47)
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_FOUR
          CFI CFA_XSP16 add(XSP16, 51)
        MOV     A,R7
        MOV     R5,A
        MOV     R4,?V0 + 8
        MOV     R2,?V0 + 10
        MOV     R3,?V0 + 11
        MOV     R1,#0x9
        LCALL   ??zclSE_SimpleMetering_Send_GetProfileRsp?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 42)
        MOV     A,R1
// 1019 #endif // ZCL_SIMPLE_METERING
// 1020 }
        MOV     A,#0x14
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 22)
        MOV     R7,#0xe
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock10
// 1021 
// 1022 /*********************************************************************
// 1023  * @fn      esp_GetProfileRspCB
// 1024  *
// 1025  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1026  *          it received a Get Profile Response for
// 1027  *          this application.
// 1028  *
// 1029  * @param   pCmd - pointer to structure for Get Profile Response command
// 1030  * @param   srcAddr - pointer to source address
// 1031  * @param   seqNum - sequence number of this command
// 1032  *
// 1033  * @return  none
// 1034  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1035 static void esp_GetProfileRspCB( zclCCGetProfileRsp_t *pCmd,
esp_GetProfileRspCB:
          CFI Block cfiBlock11 Using cfiCommon0
          CFI Function esp_GetProfileRspCB
        CODE
// 1036                                  afAddrType_t *srcAddr, uint8 seqNum )
// 1037 {
        ; Saved register size: 0
        ; Auto size: 0
// 1038   // add user code here
// 1039 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock11
// 1040 
// 1041 /*********************************************************************
// 1042  * @fn      esp_ReqMirrorCmdCB
// 1043  *
// 1044  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1045  *          it received a Request Mirror Command for
// 1046  *          this application.
// 1047  *
// 1048  * @param   srcAddr - pointer to source address
// 1049  * @param   seqNum - sequence number of this command
// 1050  *
// 1051  * @return  none
// 1052  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1053 static void esp_ReqMirrorCmdCB( afAddrType_t *srcAddr, uint8 seqNum )
esp_ReqMirrorCmdCB:
          CFI Block cfiBlock12 Using cfiCommon0
          CFI Function esp_ReqMirrorCmdCB
        CODE
// 1054 {
        ; Saved register size: 0
        ; Auto size: 0
// 1055 #if defined ( ZCL_SIMPLE_METERING )
// 1056 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
// 1057   uint8 endpoint;
// 1058 
// 1059   // See if a mirror exists for the given source address and endpoint
// 1060   endpoint = esp_GetMirrorEndpoint( srcAddr );
// 1061 
// 1062   if ( endpoint == ESP_MIRROR_INVALID_ENDPOINT )
// 1063   {
// 1064     // No endpoint exists.  Try allocating one.
// 1065     endpoint = esp_AllocMirror(srcAddr);
// 1066 
// 1067     if (endpoint != ESP_MIRROR_INVALID_ENDPOINT)
// 1068     {
// 1069       // Setup endpoint
// 1070       espMirrorInfo_t *pInfo = esp_GetMirrorInfo(endpoint);
// 1071 
// 1072       if ( pInfo != NULL )
// 1073       {
// 1074         // Create a simple descriptor for the mirror
// 1075         SimpleDescriptionFormat_t *pMirrorSimpleDesc = osal_mem_alloc( sizeof( SimpleDescriptionFormat_t ) );
// 1076 
// 1077         if ( pMirrorSimpleDesc != NULL )
// 1078         {
// 1079           zclAttrRec_t *pAttr = pInfo->pAttr;
// 1080 
// 1081           pMirrorSimpleDesc->EndPoint = endpoint;
// 1082           pMirrorSimpleDesc->AppProfId = ZCL_SE_PROFILE_ID;
// 1083           pMirrorSimpleDesc->AppDeviceId = ZCL_SE_DEVICEID_METER;
// 1084           pMirrorSimpleDesc->AppDevVer = MIRROR_DEVICE_VERSION;
// 1085           pMirrorSimpleDesc->Reserved = MIRROR_FLAGS;
// 1086           pMirrorSimpleDesc->AppNumInClusters = MIRROR_MAX_INCLUSTERS;
// 1087           pMirrorSimpleDesc->pAppInClusterList = (cId_t *) mirrorInClusterList;
// 1088           pMirrorSimpleDesc->AppNumOutClusters = MIRROR_MAX_OUTCLUSTERS;
// 1089           pMirrorSimpleDesc->pAppOutClusterList = (cId_t *) mirrorOutClusterList;
// 1090 
// 1091           zclSE_Init( pMirrorSimpleDesc );
// 1092 
// 1093           // Register the attribute list
// 1094           zcl_registerAttrList( endpoint, ESP_MIRROR_MAX_ATTRIBUTES, (CONST zclAttrRec_t *) pAttr );
// 1095         }
// 1096         else
// 1097         {
// 1098           esp_FreeMirror( endpoint );
// 1099           endpoint = ESP_MIRROR_INVALID_ENDPOINT;
// 1100         }
// 1101       }
// 1102     }
// 1103   }
// 1104 
// 1105   if ( endpoint != ESP_MIRROR_INVALID_ENDPOINT )
// 1106   {
// 1107     // Send response to the peer with the mirror endpoint ID
// 1108     zclSE_SimpleMetering_Send_ReqMirrorRsp( ESP_ENDPOINT, srcAddr, endpoint, TRUE, seqNum );
// 1109   }
// 1110   else
// 1111   {
// 1112     // Send response indicating we cannot create the mirror
// 1113     zclSE_SimpleMetering_Send_ReqMirrorRsp(ESP_ENDPOINT, srcAddr, 0xFFFF, TRUE, seqNum);
// 1114   }
// 1115 #endif  // SE_UK_EXT && SE_MIRROR
// 1116 #endif  // ZCL_SIMPLE_METERING
// 1117 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock12
// 1118 /*********************************************************************
// 1119  * @fn      esp_ReqMirrorRspCB
// 1120  *
// 1121  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1122  *          it received a Request Mirror Response for
// 1123  *          this application.
// 1124  *
// 1125  * @param   pCmd - pointer to structure for Request Mirror Response command
// 1126  * @param   srcAddr - pointer to source address
// 1127  * @param   seqNum - sequence number of this command
// 1128  *
// 1129  * @return  none
// 1130  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1131 static void esp_ReqMirrorRspCB( zclCCReqMirrorRsp_t *pCmd,
esp_ReqMirrorRspCB:
          CFI Block cfiBlock13 Using cfiCommon0
          CFI Function esp_ReqMirrorRspCB
        CODE
// 1132                                 afAddrType_t *srcAddr, uint8 seqNum )
// 1133 {
        ; Saved register size: 0
        ; Auto size: 0
// 1134   // add user code here
// 1135 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock13
// 1136 
// 1137 /*********************************************************************
// 1138  * @fn      esp_MirrorRemCmdCB
// 1139  *
// 1140  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1141  *          it received a Mirror Remove Command for
// 1142  *          this application.
// 1143  *
// 1144  * @param   srcAddr - pointer to source address
// 1145  * @param   seqNum - sequence number of this command
// 1146  *
// 1147  * @return  none
// 1148  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1149 static void esp_MirrorRemCmdCB( afAddrType_t *srcAddr, uint8 seqNum )
esp_MirrorRemCmdCB:
          CFI Block cfiBlock14 Using cfiCommon0
          CFI Function esp_MirrorRemCmdCB
        CODE
// 1150 {
        ; Saved register size: 0
        ; Auto size: 0
// 1151 #if defined ( ZCL_SIMPLE_METERING )
// 1152 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
// 1153   // Check if this is a valid endpoint for a mirror
// 1154   uint8 endpoint = esp_GetMirrorEndpoint( srcAddr );
// 1155 
// 1156   if ( endpoint != ESP_MIRROR_INVALID_ENDPOINT )
// 1157   {
// 1158     // Set the PhysicalEnvironment attribute indicating a mirror slot is available
// 1159     espPhysicalEnvironment |= PHY_MIRROR_CAPACITY_ENV;
// 1160 
// 1161     endPointDesc_t *epDesc = afFindEndPointDesc( endpoint );
// 1162 
// 1163     // Free memory allocated for SimpleDescriptor in esp_ReqMirrorCmdCB()
// 1164     if ( epDesc->simpleDesc != NULL )
// 1165     {
// 1166       osal_mem_free( epDesc->simpleDesc );
// 1167     }
// 1168 
// 1169     // Delete endpoint completely
// 1170     afDelete( endpoint );
// 1171 
// 1172     // Free the mirror in the mirror control block
// 1173     esp_FreeMirror( endpoint );
// 1174 
// 1175     // Send response to peer
// 1176     zclSE_SimpleMetering_Send_RemMirrorRsp( ESP_ENDPOINT, srcAddr, endpoint, TRUE, seqNum );
// 1177   }
// 1178   else
// 1179   {
// 1180     // The specification does not state how to deal with the case where no mirror exists,
// 1181     // For now, send 0xFFFF in the endpoint.
// 1182     zclSE_SimpleMetering_Send_RemMirrorRsp( ESP_ENDPOINT, srcAddr, 0xFFFF, TRUE, seqNum );
// 1183   }
// 1184 #endif  // SE_UK_EXT && SE_MIRROR
// 1185 #endif  // ZCL_SIMPLE_METERING
// 1186 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock14
// 1187 
// 1188 /*********************************************************************
// 1189  * @fn      esp_MirrorRemRspCB
// 1190  *
// 1191  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1192  *          it received a Mirror Remove Response for
// 1193  *          this application.
// 1194  *
// 1195  * @param   pCmd - pointer to structure for Mirror Remove Response command
// 1196  * @param   srcAddr - pointer to source address
// 1197  * @param   seqNum - sequence number of this command
// 1198  *
// 1199  * @return  none
// 1200  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1201 static void esp_MirrorRemRspCB( zclCCMirrorRemRsp_t *pCmd,
esp_MirrorRemRspCB:
          CFI Block cfiBlock15 Using cfiCommon0
          CFI Function esp_MirrorRemRspCB
        CODE
// 1202                                 afAddrType_t *srcAddr, uint8 seqNum )
// 1203 {
        ; Saved register size: 0
        ; Auto size: 0
// 1204   // add user code here
// 1205 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock15
// 1206 
// 1207 /*********************************************************************
// 1208  * @fn      esp_ReqFastPollModeCmdCB
// 1209  *
// 1210  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1211  *          it received a Request Fast Poll Mode Command for
// 1212  *          this application.
// 1213  *
// 1214  * @param   pCmd - pointer to structure for Request Fast Poll Mode command
// 1215  * @param   srcAddr - pointer to source address
// 1216  * @param   seqNum - sequence number of this command
// 1217  *
// 1218  * @return  none
// 1219  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1220 static void esp_ReqFastPollModeCmdCB( zclCCReqFastPollModeCmd_t *pCmd, afAddrType_t *srcAddr, uint8 seqNum )
esp_ReqFastPollModeCmdCB:
          CFI Block cfiBlock16 Using cfiCommon0
          CFI Function esp_ReqFastPollModeCmdCB
        CODE
// 1221 {
        FUNCALL esp_ReqFastPollModeCmdCB, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ReqFastPollModeCmdCB, osal_getClock
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ReqFastPollModeCmdCB, zclSE_SimpleMetering_Send_ReqFastPollModeRsp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ReqFastPollModeCmdCB, HalLcdWriteString
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ReqFastPollModeCmdCB, HalLcdWriteStringValue
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ReqFastPollModeCmdCB, HalLcdWriteStringValue
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 5
        MOV     A,#-0x5
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 29)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 14,R4
        MOV     ?V0 + 15,R5
        MOV     ?V0 + 12,R1
// 1222 #if defined ( ZCL_SIMPLE_METERING )
// 1223   if ( pCmd != NULL )
        MOV     A,R6
        ORL     A,R7
        JNZ     $+5
        LJMP    ??esp_ReqFastPollModeCmdCB_0 & 0xFFFF
// 1224   {
// 1225     zclCCReqFastPollModeRsp_t fastPollRsp;
// 1226     UTCTime utcSecs;
// 1227 
// 1228     if (pCmd->fastPollUpdatePeriod < espFastPollUpdatePeriod)
        MOV     DPTR,#espFastPollUpdatePeriod
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,R0
        JNC     ??esp_ReqFastPollModeCmdCB_1
// 1229     {
// 1230       // handles client requests for a fast poll rate that is less than the
// 1231       // value of the its FastPollUpdateRate attribute
// 1232       fastPollRsp.appliedUpdatePeriod = espFastPollUpdatePeriod;
        MOV     DPTR,#espFastPollUpdatePeriod
        MOVX    A,@DPTR
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
        SJMP    ??esp_ReqFastPollModeCmdCB_2
// 1233     }
// 1234     else
// 1235     {
// 1236       fastPollRsp.appliedUpdatePeriod = pCmd->fastPollUpdatePeriod;
??esp_ReqFastPollModeCmdCB_1:
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
// 1237     }
// 1238 
// 1239     if ((espFastPollModeDuration == 0) && (pCmd->duration > 0))
??esp_ReqFastPollModeCmdCB_2:
        MOV     DPTR,#espFastPollModeDuration
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??esp_ReqFastPollModeCmdCB_3
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x1
        JC      ??esp_ReqFastPollModeCmdCB_3
// 1240     {
// 1241       if (pCmd->duration > MAX_DURATION_IN_MINUTES_FAST_POLL_MODE)
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0x10
        JC      ??esp_ReqFastPollModeCmdCB_4
// 1242       {
// 1243         // handles client requests for duration that is greater than the
// 1244         // maximum allowable 15 minutes.
// 1245         espFastPollModeDuration = MAX_DURATION_IN_MINUTES_FAST_POLL_MODE;
        MOV     DPTR,#espFastPollModeDuration
        MOV     A,#0xf
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
        SJMP    ??esp_ReqFastPollModeCmdCB_5
// 1246       }
// 1247       else
// 1248       {
// 1249         espFastPollModeDuration = pCmd->duration;
??esp_ReqFastPollModeCmdCB_4:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     DPTR,#espFastPollModeDuration
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1250       }
// 1251 
// 1252       // This controls the counter for ZCLTESTAPP_FAST_POLL_MODE_EVT based on a 1 second timer
// 1253       espFastPollModeDuration *= 60;  // Duration in seconds
??esp_ReqFastPollModeCmdCB_5:
        MOV     DPTR,#espFastPollModeDuration
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     B,#0x3c
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x3c
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPTR,#espFastPollModeDuration
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1254 
// 1255       // Start the timer for the fast poll period
// 1256       osal_start_timerEx( espTaskID, ESP_FAST_POLL_MODE_EVT, ESP_FAST_POLL_TIMER_PERIOD );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x18
        MOV     R5,#0x3
        MOV     R2,#0x8
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        MOV     A,R1
// 1257     }
// 1258 
// 1259     // get UTC time and update with requested duration in seconds
// 1260     utcSecs = osal_getClock();
??esp_ReqFastPollModeCmdCB_3:
        ; Setup parameters for call to function osal_getClock
        LCALL   ??osal_getClock?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,?V0 + 2
        MOV     ?V0 + 7,?V0 + 3
// 1261     fastPollRsp.fastPollModeEndTime = utcSecs + espFastPollModeDuration;
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     ?V0 + 2,?V0 + 6
        MOV     ?V0 + 3,?V0 + 7
        MOV     DPTR,#espFastPollModeDuration
        MOVX    A,@DPTR
        MOV     ?V0 + 8,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 9,A
        CLR     A
        MOV     ?V0 + 10,A
        MOV     ?V0 + 11,A
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 8
        LCALL   ?L_ADD
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1262 
// 1263     zclSE_SimpleMetering_Send_ReqFastPollModeRsp( ESP_ENDPOINT, srcAddr,
// 1264                                                   &fastPollRsp,
// 1265                                                   TRUE, seqNum );
        ; Setup parameters for call to function zclSE_SimpleMetering_Send_ReqFastPollModeRsp
        MOV     A,?V0 + 12
        MOV     ?V0 + 0,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 0,#0x1
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,?V0 + 14
        MOV     R3,?V0 + 15
        MOV     R1,#0x9
        LCALL   ??zclSE_SimpleMetering_Send_ReqFastPollModeRsp?
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 29)
        MOV     A,R1
// 1266 
// 1267 #if defined ( LCD_SUPPORTED )
// 1268     HalLcdWriteString("Fast Polling", HAL_LCD_LINE_1);
        ; Setup parameters for call to function HalLcdWriteString
        MOV     R1,#0x1
        MOV     R2,#`?<Constant "Fast Polling">` & 0xff
        MOV     R3,#(`?<Constant "Fast Polling">` >> 8) & 0xff
        LCALL   ??HalLcdWriteString?relay
// 1269     HalLcdWriteStringValue("Cur 0x", utcSecs, 16, HAL_LCD_LINE_2 );
        ; Setup parameters for call to function HalLcdWriteStringValue
        MOV     ?V0 + 0,#0x2
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     R1,#0x10
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     R4,?V0 + 0
        MOV     R5,?V0 + 1
        MOV     R2,#`?<Constant "Cur 0x">` & 0xff
        MOV     R3,#(`?<Constant "Cur 0x">` >> 8) & 0xff
        LCALL   ??HalLcdWriteStringValue?relay
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 29)
// 1270     HalLcdWriteStringValue("End 0x", fastPollRsp.fastPollModeEndTime, 16, HAL_LCD_LINE_3 );
        ; Setup parameters for call to function HalLcdWriteStringValue
        MOV     ?V0 + 0,#0x3
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     R1,#0x10
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R4,?V0 + 0
        MOV     R5,?V0 + 1
        MOV     R2,#`?<Constant "End 0x">` & 0xff
        MOV     R3,#(`?<Constant "End 0x">` >> 8) & 0xff
        LCALL   ??HalLcdWriteStringValue?relay
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 29)
// 1271 #endif
// 1272   }
// 1273 #endif // ZCL_SIMPLE_METERING
// 1274 }
??esp_ReqFastPollModeCmdCB_0:
        MOV     A,#0x5
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock16
// 1275 
// 1276 /*********************************************************************
// 1277  * @fn      esp_ReqFastPollModeRspCB
// 1278  *
// 1279  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1280  *          it received a Request Fast Poll Mode Response for
// 1281  *          this application.
// 1282  *
// 1283  * @param   pRsp - pointer to structure for Request Fast Poll Mode Response command
// 1284  * @param   srcAddr - pointer to source address
// 1285  * @param   seqNum - sequence number of this command
// 1286  *
// 1287  * @return  none
// 1288  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1289 static void esp_ReqFastPollModeRspCB( zclCCReqFastPollModeRsp_t *pRsp,
esp_ReqFastPollModeRspCB:
          CFI Block cfiBlock17 Using cfiCommon0
          CFI Function esp_ReqFastPollModeRspCB
        CODE
// 1290                                       afAddrType_t *srcAddr, uint8 seqNum )
// 1291 {
        ; Saved register size: 0
        ; Auto size: 0
// 1292   // add user code here
// 1293 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock17
// 1294 
// 1295 /*********************************************************************
// 1296  * @fn      esp_GetCurrentPriceCB
// 1297  *
// 1298  * @brief   Callback from the ZCL SE Profile Pricing Cluster Library when
// 1299  *          it received a Get Current Price for
// 1300  *          this application.
// 1301  *
// 1302  * @param   pCmd - pointer to structure for Get Current Price command
// 1303  * @param   srcAddr - pointer to source address
// 1304  * @param   seqNum - sequence number for this command
// 1305  *
// 1306  * @return  none
// 1307  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1308 static void esp_GetCurrentPriceCB( zclCCGetCurrentPrice_t *pCmd,
esp_GetCurrentPriceCB:
          CFI Block cfiBlock18 Using cfiCommon0
          CFI Function esp_GetCurrentPriceCB
        CODE
// 1309                                          afAddrType_t *srcAddr, uint8 seqNum )
// 1310 {
        FUNCALL esp_GetCurrentPriceCB, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 59, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetCurrentPriceCB, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 59, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetCurrentPriceCB, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 62, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 62, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetCurrentPriceCB, osal_getClock
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 59, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetCurrentPriceCB, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 62, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 62, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetCurrentPriceCB, zclSE_Pricing_Send_PublishPrice
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 61, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 61, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetCurrentPriceCB, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 59, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 59, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xf
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 15)
        ; Saved register size: 15
        ; Auto size: 44
        MOV     A,#-0x2c
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 59)
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,R5
        MOV     A,R1
        MOV     R6,A
// 1311 #if defined ( ZCL_PRICING )
// 1312   // On receipt of Get Current Price command, the device shall send a
// 1313   // Publish Price command with the information for the current time.
// 1314   zclCCPublishPrice_t cmd;
// 1315   uint8 rateLabelLen = 4; // adjust this value if different label is set, test label "BASE"
        MOV     R7,#0x4
// 1316 
// 1317   osal_memset( &cmd, 0, sizeof( zclCCPublishPrice_t ) );
        ; Setup parameters for call to function osal_memset
        MOV     R4,#0x2c
        MOV     R5,#0x0
        MOV     R1,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??osal_memset?relay
// 1318 
// 1319   // Set Pricing information
// 1320   cmd.providerId = 0xbabeface;
        MOV     R2,#-0x32
        MOV     R3,#-0x6
        MOV     R4,#-0x42
        MOV     R5,#-0x46
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1321   cmd.rateLabel.pStr = (uint8 *)osal_mem_alloc(rateLabelLen);
        ; Setup parameters for call to function osal_mem_alloc
        MOV     ?V0 + 4,R7
        MOV     ?V0 + 5,#0x0
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        LCALL   ??osal_mem_alloc?relay
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
// 1322   if (cmd.rateLabel.pStr != NULL)
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_GetCurrentPriceCB_0
// 1323   {
// 1324     cmd.rateLabel.strLen = rateLabelLen;
        MOV     A,R7
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1325     osal_memcpy(cmd.rateLabel.pStr, "BASE", rateLabelLen);
        ; Setup parameters for call to function osal_memcpy
        MOV     ?V0 + 4,#`?<Constant "BASE">` & 0xff
        MOV     ?V0 + 5,#(`?<Constant "BASE">` >> 8) & 0xff
        MOV     ?V0 + 6,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 62)
        MOV     ?V0 + 4,R7
        MOV     ?V0 + 5,#0x0
        MOV     R4,?V0 + 4
        MOV     R5,?V0 + 5
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_memcpy?relay
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 59)
// 1326   }
// 1327   cmd.issuerEventId = 0x00000000;
??esp_GetCurrentPriceCB_0:
        MOV     R2,#0x0
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     A,#0x7
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1328   cmd.currentTime = osal_getClock();
        ; Setup parameters for call to function osal_getClock
        LCALL   ??osal_getClock?relay
        MOV     A,#0xb
        LCALL   ?XSTACK_DISP0_8
        LCALL   ?XSTORE_R2345
// 1329   cmd.unitOfMeasure = 0x00;
        MOV     A,#0xf
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1330   cmd.currency = 0x0348;
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x48
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x3
        MOVX    @DPTR,A
// 1331   cmd.priceTrailingDigit = 0x11;
        MOV     A,#0x12
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x11
        MOVX    @DPTR,A
// 1332   cmd.numberOfPriceTiers = 0x21;
        MOV     A,#0x13
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x21
        MOVX    @DPTR,A
// 1333   cmd.startTime = 0x00000000;
        MOV     R2,#0x0
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     A,#0x14
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1334   cmd.durationInMinutes = 0x003C;
        MOV     A,#0x18
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x3c
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1335   cmd.price = 0x00000018;
        MOV     R2,#0x18
        MOV     R3,#0x0
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     A,#0x1a
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1336   cmd.priceRatio = SE_OPTIONAL_FIELD_UINT8;
        MOV     A,#0x1e
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1337   cmd.generationPrice = SE_OPTIONAL_FIELD_UINT32;
        MOV     R2,#-0x1
        MOV     R3,#-0x1
        MOV     R4,#-0x1
        MOV     R5,#-0x1
        MOV     A,#0x1f
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1338   cmd.generationPriceRatio = SE_OPTIONAL_FIELD_UINT8;
        MOV     A,#0x23
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1339   cmd.alternateCostDelivered = SE_OPTIONAL_FIELD_UINT32;
        MOV     R2,#-0x1
        MOV     R3,#-0x1
        MOV     R4,#-0x1
        MOV     R5,#-0x1
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1340   cmd.alternateCostUnit = SE_OPTIONAL_FIELD_UINT8;
        MOV     A,#0x28
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1341   cmd.alternateCostTrailingDigit = SE_OPTIONAL_FIELD_UINT8;
        MOV     A,#0x29
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1342   cmd.numberOfBlockThresholds = SE_OPTIONAL_FIELD_UINT8;
        MOV     A,#0x2a
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1343   cmd.priceControl = SE_PROFILE_PRICEACK_REQUIRED_MASK;
        MOV     A,#0x2b
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1344 
// 1345   // copy source address of display device that requested current pricing info so
// 1346   // that esp can send messages to it using destination address of IPDAddr
// 1347   osal_memcpy( &ipdAddr, srcAddr, sizeof ( afAddrType_t ) );
        ; Setup parameters for call to function osal_memcpy
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        MOV     ?V0 + 6,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 62)
        MOV     R4,#0xc
        MOV     R5,#0x0
        MOV     R2,#ipdAddr & 0xff
        MOV     R3,#(ipdAddr >> 8) & 0xff
        LCALL   ??osal_memcpy?relay
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 59)
// 1348 
// 1349   zclSE_Pricing_Send_PublishPrice( ESP_ENDPOINT, srcAddr, &cmd, FALSE, seqNum );
        ; Setup parameters for call to function zclSE_Pricing_Send_PublishPrice
        MOV     A,R6
        MOV     ?V0 + 4,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 60)
        MOV     ?V0 + 4,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 61)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        MOV     R1,#0x9
        LCALL   ??zclSE_Pricing_Send_PublishPrice?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 59)
        MOV     A,R1
// 1350 
// 1351   if (cmd.rateLabel.pStr != NULL)
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_GetCurrentPriceCB_1
// 1352   {
// 1353     osal_mem_free(cmd.rateLabel.pStr);
        ; Setup parameters for call to function osal_mem_free
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 1354   }
// 1355 #endif // ZCL_PRICING
// 1356 }
??esp_GetCurrentPriceCB_1:
        MOV     A,#0x2c
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 15)
        MOV     R7,#0x7
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock18
// 1357 
// 1358 /*********************************************************************
// 1359  * @fn      esp_GetScheduledPriceCB
// 1360  *
// 1361  * @brief   Callback from the ZCL SE Profile Pricing Cluster Library when
// 1362  *          it received a Get Scheduled Price for
// 1363  *          this application.
// 1364  *
// 1365  * @param   pCmd - pointer to structure for Get Scheduled Price command
// 1366  * @param   srcAddr - pointer to source address
// 1367  * @param   seqNum - sequence number for this command
// 1368  *
// 1369  * @return  none
// 1370  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1371 static void esp_GetScheduledPriceCB( zclCCGetScheduledPrice_t *pCmd,
esp_GetScheduledPriceCB:
          CFI Block cfiBlock19 Using cfiCommon0
          CFI Function esp_GetScheduledPriceCB
        CODE
// 1372                                      afAddrType_t *srcAddr, uint8 seqNum  )
// 1373 {
        FUNCALL esp_GetScheduledPriceCB, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 56, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 56, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_GetScheduledPriceCB, zclSE_Pricing_Send_PublishPrice
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 58, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 58, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 44
        MOV     A,#-0x2c
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 56)
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
        MOV     ?V0 + 0,R1
// 1374   // On receipt of Get Scheduled Price command, the device shall send a
// 1375   // Publish Price command for all currently scheduled price events.
// 1376   // The sample code as follows only sends one.
// 1377 
// 1378 #if defined ( ZCL_PRICING )
// 1379   zclCCPublishPrice_t cmd;
// 1380 
// 1381   osal_memset( &cmd, 0, sizeof( zclCCPublishPrice_t ) );
        ; Setup parameters for call to function osal_memset
        MOV     R4,#0x2c
        MOV     R5,#0x0
        MOV     R1,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??osal_memset?relay
// 1382 
// 1383   cmd.providerId = 0xbabeface;
        MOV     R2,#-0x32
        MOV     R3,#-0x6
        MOV     R4,#-0x42
        MOV     R5,#-0x46
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1384   cmd.numberOfPriceTiers = 0xfe;
        MOV     A,#0x13
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#-0x2
        MOVX    @DPTR,A
// 1385 
// 1386   zclSE_Pricing_Send_PublishPrice( ESP_ENDPOINT, srcAddr, &cmd, FALSE, seqNum );
        ; Setup parameters for call to function zclSE_Pricing_Send_PublishPrice
        MOV     A,?V0 + 0
        MOV     ?V0 + 1,A
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 57)
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 58)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclSE_Pricing_Send_PublishPrice?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 56)
        MOV     A,R1
// 1387 
// 1388 #endif // ZCL_PRICING
// 1389 }
        MOV     A,#0x2c
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock19
// 1390 
// 1391 /*********************************************************************
// 1392  * @fn      esp_PriceAcknowledgementCB
// 1393  *
// 1394  * @brief   Callback from the ZCL SE Profile Pricing Cluster Library when
// 1395  *          it received a Price Acknowledgement for this application.
// 1396  *
// 1397  * @param   pCmd - pointer to structure for Price Acknowledgement command
// 1398  * @param   srcAddr - pointer to source address
// 1399  * @param   seqNum - sequence number for this command
// 1400  *
// 1401  * @return  none
// 1402  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1403 static void esp_PriceAcknowledgementCB( zclCCPriceAcknowledgement_t *pCmd,
esp_PriceAcknowledgementCB:
          CFI Block cfiBlock20 Using cfiCommon0
          CFI Function esp_PriceAcknowledgementCB
        CODE
// 1404                                         afAddrType_t *srcAddr, uint8 seqNum )
// 1405 {
        ; Saved register size: 0
        ; Auto size: 0
// 1406   // add user code here
// 1407 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock20
// 1408 
// 1409 /*********************************************************************
// 1410  * @fn      esp_GetBlockPeriodCB
// 1411  *
// 1412  * @brief   Callback from the ZCL SE Profile Pricing Cluster Library when
// 1413  *          it received a Get Block Period for this application.
// 1414  *
// 1415  * @param   pCmd - pointer to structure for Get Block Period command
// 1416  * @param   srcAddr - pointer to source address
// 1417  * @param   seqNum - sequence number for this command
// 1418  *
// 1419  * @return  none
// 1420  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1421 static void esp_GetBlockPeriodCB( zclCCGetBlockPeriod_t *pCmd,
esp_GetBlockPeriodCB:
          CFI Block cfiBlock21 Using cfiCommon0
          CFI Function esp_GetBlockPeriodCB
        CODE
// 1422                                   afAddrType_t *srcAddr, uint8 seqNum )
// 1423 {
        ; Saved register size: 0
        ; Auto size: 0
// 1424   // add user code here
// 1425 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock21
// 1426 
// 1427 /*********************************************************************
// 1428  * @fn      esp_PublishPriceCB
// 1429  *
// 1430  * @brief   Callback from the ZCL SE Profile Pricing Cluster Library when
// 1431  *          it received a Publish Price for this application.
// 1432  *
// 1433  * @param   pCmd - pointer to structure for Publish Price command
// 1434  * @param   srcAddr - pointer to source address
// 1435  * @param   seqNum - sequence number for this command
// 1436  *
// 1437  * @return  none
// 1438  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1439 static void esp_PublishPriceCB( zclCCPublishPrice_t *pCmd,
esp_PublishPriceCB:
          CFI Block cfiBlock22 Using cfiCommon0
          CFI Function esp_PublishPriceCB
        CODE
// 1440                                       afAddrType_t *srcAddr, uint8 seqNum )
// 1441 {
        ; Saved register size: 0
        ; Auto size: 0
// 1442   // add user code here
// 1443 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock22
// 1444 
// 1445 /*********************************************************************
// 1446  * @fn      esp_PublishBlockPeriodCB
// 1447  *
// 1448  * @brief   Callback from the ZCL SE Profile Pricing Cluster Library when
// 1449  *          it received a Publish Block Period for this application.
// 1450  *
// 1451  * @param   pCmd - pointer to structure for Get Block Period command
// 1452  * @param   srcAddr - pointer to source address
// 1453  * @param   seqNum - sequence number for this command
// 1454  *
// 1455  * @return  none
// 1456  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1457 static void esp_PublishBlockPeriodCB( zclCCPublishBlockPeriod_t *pCmd,
esp_PublishBlockPeriodCB:
          CFI Block cfiBlock23 Using cfiCommon0
          CFI Function esp_PublishBlockPeriodCB
        CODE
// 1458                                       afAddrType_t *srcAddr, uint8 seqNum )
// 1459 {
        ; Saved register size: 0
        ; Auto size: 0
// 1460   // add user code here
// 1461 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock23
// 1462 
// 1463 /*********************************************************************
// 1464  * @fn      esp_DisplayMessageCB
// 1465  *
// 1466  * @brief   Callback from the ZCL SE Profile Message Cluster Library when
// 1467  *          it received a Display Message Command for
// 1468  *          this application.
// 1469  *
// 1470  * @param   pCmd - pointer to structure for Display Message command
// 1471  * @param   srcAddr - pointer to source address
// 1472  * @param   seqNum - sequence number for this command
// 1473  *
// 1474  * @return  none
// 1475  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1476 static void esp_DisplayMessageCB( zclCCDisplayMessage_t *pCmd,
esp_DisplayMessageCB:
          CFI Block cfiBlock24 Using cfiCommon0
          CFI Function esp_DisplayMessageCB
        CODE
// 1477                                         afAddrType_t *srcAddr, uint8 seqNum )
// 1478 {
        FUNCALL esp_DisplayMessageCB, HalLcdWriteString
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xb
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 11)
        ; Saved register size: 11
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,R5
        MOV     ?V0 + 2,R1
// 1479   // Upon receipt of the Display Message Command, the device shall
// 1480   // display the message. If the Message Confirmation bit indicates
// 1481   // the message originator require a confirmation of receipt from
// 1482   // a Utility Customer, the device should display the message or
// 1483   // alert the user until it is either confirmed via a button or by
// 1484   // selecting a confirmation option on the device.  Confirmation is
// 1485   // typically used when the Utility is sending down information
// 1486   // such as a disconnection notice, or prepaid billing information.
// 1487   // Message duration is ignored when confirmation is requested and
// 1488   // the message is displayed until confirmed.
// 1489 
// 1490 #if defined ( LCD_SUPPORTED )
// 1491     HalLcdWriteString( (char*)pCmd->msgString.pStr, HAL_LCD_LINE_1 );
        ; Setup parameters for call to function HalLcdWriteString
        MOV     R1,#0x1
        MOV     A,R6
        ADD     A,#0x10
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??HalLcdWriteString?relay
// 1492 #endif // LCD_SUPPORTED
// 1493 }
        MOV     R7,#0x3
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock24
// 1494 
// 1495 /*********************************************************************
// 1496  * @fn      esp_CancelMessageCB
// 1497  *
// 1498  * @brief   Callback from the ZCL SE Profile Message Cluster Library when
// 1499  *          it received a Cancel Message Command for
// 1500  *          this application.
// 1501  *
// 1502  * @param   pCmd - pointer to structure for Cancel Message command
// 1503  * @param   srcAddr - pointer to source address
// 1504  * @param   seqNum - sequence number for this command
// 1505  *
// 1506  * @return  none
// 1507  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1508 static void esp_CancelMessageCB( zclCCCancelMessage_t *pCmd,
esp_CancelMessageCB:
          CFI Block cfiBlock25 Using cfiCommon0
          CFI Function esp_CancelMessageCB
        CODE
// 1509                                         afAddrType_t *srcAddr, uint8 seqNum )
// 1510 {
        ; Saved register size: 0
        ; Auto size: 0
// 1511   // add user code here
// 1512 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock25
// 1513 
// 1514 /*********************************************************************
// 1515  * @fn      esp_GetLastMessageCB
// 1516  *
// 1517  * @brief   Callback from the ZCL SE Profile Message Cluster Library when
// 1518  *          it received a Get Last Message Command for
// 1519  *          this application.
// 1520  *
// 1521  * @param   pCmd - pointer to structure for Get Last Message command
// 1522  * @param   srcAddr - pointer to source address
// 1523  * @param   seqNum - sequence number for this command
// 1524  *
// 1525  * @return  none
// 1526  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1527 static void esp_GetLastMessageCB( afAddrType_t *srcAddr, uint8 seqNum )
esp_GetLastMessageCB:
          CFI Block cfiBlock26 Using cfiCommon0
          CFI Function esp_GetLastMessageCB
        CODE
// 1528 {
        FUNCALL esp_GetLastMessageCB, zclSE_Message_Send_DisplayMessage
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 40, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 40, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 28
        MOV     A,#-0x1c
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 0,R1
// 1529   // On receipt of Get Last Message command, the device shall send a
// 1530   // Display Message command back to the sender
// 1531 
// 1532 #if defined ( ZCL_MESSAGE )
// 1533   zclCCDisplayMessage_t cmd;
// 1534   uint8 msg[10] = { 0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29 };
        MOV     DPTR,#`?<Constant {32, 33, 34, 35, 36, 37, 38, 39, 40`
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     A,#0x12
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        MOV     A,#0xa
        LCALL   ?MOVE_LONG8_XDATA_XDATA
// 1535 
// 1536   // Fill in the command with information for the last message
// 1537   cmd.messageId = 0xaabbccdd;
        MOV     R2,#-0x23
        MOV     R3,#-0x34
        MOV     R4,#-0x45
        MOV     R5,#-0x56
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
// 1538   cmd.messageCtrl.transmissionMode = 0;
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1539   cmd.messageCtrl.importance = 1;
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1540   cmd.messageCtrl.confirmationRequired = 1;
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1541   cmd.durationInMinutes = 60;
        MOV     A,#0xd
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0x3c
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1542 
// 1543   cmd.msgString.strLen = 10;
        MOV     A,#0xf
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#0xa
        MOVX    @DPTR,A
// 1544   cmd.msgString.pStr = msg;
        MOV     A,#0x12
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,DPL
        MOV     R1,DPH
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 1545 
// 1546   zclSE_Message_Send_DisplayMessage( ESP_ENDPOINT, srcAddr, &cmd,
// 1547                                      FALSE, seqNum );
        ; Setup parameters for call to function zclSE_Message_Send_DisplayMessage
        MOV     A,?V0 + 0
        MOV     ?V0 + 1,A
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 39)
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 1
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 40)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclSE_Message_Send_DisplayMessage?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 38)
        MOV     A,R1
// 1548 #endif // ZCL_MESSAGe
// 1549 }
        MOV     A,#0x1c
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock26
// 1550 
// 1551 /*********************************************************************
// 1552  * @fn      esp_MessageConfirmationCB
// 1553  *
// 1554  * @brief   Callback from the ZCL SE Profile Message Cluster Library when
// 1555  *          it received a Message Confirmation Command for
// 1556  *          this application.
// 1557  *
// 1558  * @param   pCmd - pointer to structure for Message Confirmation command
// 1559  * @param   srcAddr - pointer to source address
// 1560  * @param   seqNum - sequence number for this command
// 1561  *
// 1562  * @return  none
// 1563  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1564 static void esp_MessageConfirmationCB( zclCCMessageConfirmation_t *pCmd,
esp_MessageConfirmationCB:
          CFI Block cfiBlock27 Using cfiCommon0
          CFI Function esp_MessageConfirmationCB
        CODE
// 1565                                              afAddrType_t *srcAddr, uint8 seqNum)
// 1566 {
        ; Saved register size: 0
        ; Auto size: 0
// 1567   // add user code here
// 1568 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock27
// 1569 
// 1570 #if defined (ZCL_LOAD_CONTROL)
// 1571 /*********************************************************************
// 1572  * @fn      esp_SendReportEventStatus
// 1573  *
// 1574  * @brief   Callback from the ZCL SE Profile Message Cluster Library when
// 1575  *          it received a Load Control Event Command for
// 1576  *          this application.
// 1577  *
// 1578  * @param   afAddrType_t *srcAddr - pointer to source address
// 1579  * @param   uint8 seqNum - sequence number for this event
// 1580  * @param   uint32 eventID - event ID for this event
// 1581  * @param   uint32 startTime - start time for this event
// 1582  * @param   uint8 eventStatus - status for this event
// 1583  * @param   uint8 criticalityLevel - criticality level for this event
// 1584  * @param   uint8 eventControl - event control for this event
// 1585  *
// 1586  * @return  none
// 1587  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1588 static void esp_SendReportEventStatus( afAddrType_t *srcAddr, uint8 seqNum,
esp_SendReportEventStatus:
          CFI Block cfiBlock28 Using cfiCommon0
          CFI Function esp_SendReportEventStatus
        CODE
// 1589                                               uint32 eventID, uint32 startTime,
// 1590                                               uint8 eventStatus, uint8 criticalityLevel,
// 1591                                               uint8 eventControl )
// 1592 {
        FUNCALL esp_SendReportEventStatus, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 25, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 25, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_SendReportEventStatus, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_SendReportEventStatus, zclSE_LoadControl_Send_ReportEventStatus
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_SendReportEventStatus, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 25, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 25, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x17
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 23)
        ; Saved register size: 23
        ; Auto size: 2
        MOV     A,#-0x2
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 25)
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     ?V0 + 14,R1
        MOV     ?V0 + 13,R4
        MOV     ?V0 + 12,R5
        MOV     A,#0x19
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     A,#0x21
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 11,A
// 1593   zclCCReportEventStatus_t *pRsp;
// 1594 
// 1595   pRsp = (zclCCReportEventStatus_t *)osal_mem_alloc( sizeof( zclCCReportEventStatus_t ) );
        ; Setup parameters for call to function osal_mem_alloc
        MOV     R2,#0x3c
        MOV     R3,#0x0
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     R6,?V0 + 8
        MOV     R7,?V0 + 9
// 1596 
// 1597   if ( pRsp != NULL)
        MOV     A,R6
        ORL     A,R7
        JNZ     $+5
        LJMP    ??esp_SendReportEventStatus_0 & 0xFFFF
// 1598   {
// 1599     // Mandatory fields - use the incoming data
// 1600     pRsp->issuerEventID = eventID;
        MOV     DPL,R6
        MOV     DPH,R7
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
// 1601     pRsp->eventStartTime = startTime;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_TO_X
// 1602     pRsp->criticalityLevelApplied = criticalityLevel;
        MOV     A,?V0 + 12
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,?V0 + 12
        MOVX    @DPTR,A
// 1603     pRsp->eventControl = eventControl;
        MOV     A,?V0 + 11
        MOV     A,R6
        ADD     A,#0x10
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,?V0 + 11
        MOVX    @DPTR,A
// 1604     pRsp->eventStatus = eventStatus;
        MOV     A,?V0 + 13
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,?V0 + 13
        MOVX    @DPTR,A
// 1605     pRsp->signatureType = SE_PROFILE_SIGNATURE_TYPE_ECDSA;
        MOV     A,R6
        ADD     A,#0x11
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,#0x1
        MOVX    @DPTR,A
// 1606 
// 1607     // esp_Signature is a static array.
// 1608     // value can be changed in esp_data.c
// 1609     osal_memcpy( pRsp->signature, espSignature, 16 );
        ; Setup parameters for call to function osal_memcpy
        MOV     ?V0 + 8,#espSignature & 0xff
        MOV     ?V0 + 9,#(espSignature >> 8) & 0xff
        MOV     ?V0 + 10,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_THREE
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     R4,#0x10
        MOV     R5,#0x0
        MOV     A,R6
        ADD     A,#0x12
        MOV     R2,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??osal_memcpy?relay
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 25)
// 1610 
// 1611     // Optional fields - fill in with non-used value by default
// 1612     pRsp->coolingTemperatureSetPointApplied = SE_OPTIONAL_FIELD_TEMPERATURE_SET_POINT;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x80
        MOVX    @DPTR,A
// 1613     pRsp->heatingTemperatureSetPointApplied = SE_OPTIONAL_FIELD_TEMPERATURE_SET_POINT;
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x80
        MOVX    @DPTR,A
// 1614     pRsp->averageLoadAdjustment = SE_OPTIONAL_FIELD_INT8;
        MOV     A,R6
        ADD     A,#0xe
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,#-0x80
        MOVX    @DPTR,A
// 1615     pRsp->dutyCycleApplied = SE_OPTIONAL_FIELD_UINT8;
        MOV     A,R6
        ADD     A,#0xf
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1616 
// 1617     // Send response back
// 1618     // DisableDefaultResponse is set to FALSE - it is recommended to turn on
// 1619     // default response since Report Event Status Command does not have
// 1620     // a response.
// 1621     zclSE_LoadControl_Send_ReportEventStatus( ESP_ENDPOINT, srcAddr,
// 1622                                             pRsp, FALSE, seqNum );
        ; Setup parameters for call to function zclSE_LoadControl_Send_ReportEventStatus
        MOV     A,?V0 + 14
        MOV     ?V0 + 8,A
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 26)
        MOV     ?V0 + 8,#0x0
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 27)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclSE_LoadControl_Send_ReportEventStatus?rela
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 25)
        MOV     A,R1
// 1623     osal_mem_free( pRsp );
        ; Setup parameters for call to function osal_mem_free
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 1624   }
// 1625 }
??esp_SendReportEventStatus_0:
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 23)
        MOV     R7,#0xf
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock28
// 1626 #endif // ZCL_LOAD_CONTROL
// 1627 
// 1628 /*********************************************************************
// 1629  * @fn      esp_LoadControlEventCB
// 1630  *
// 1631  * @brief   Callback from the ZCL SE Profile Load Control Cluster Library when
// 1632  *          it received a Load Control Event Command for
// 1633  *          this application.
// 1634  *
// 1635  * @param   pCmd - pointer to load control event command
// 1636  * @param   srcAddr - pointer to source address
// 1637  * @param   status - event status
// 1638  * @param   seqNum - sequence number of this command
// 1639  *
// 1640  * @return  none
// 1641  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1642 static void esp_LoadControlEventCB( zclCCLoadControlEvent_t *pCmd,
esp_LoadControlEventCB:
          CFI Block cfiBlock29 Using cfiCommon0
          CFI Function esp_LoadControlEventCB
        CODE
// 1643                                                afAddrType_t *srcAddr, uint8 status,
// 1644                                                uint8 seqNum)
// 1645 {
        FUNCALL esp_LoadControlEventCB, esp_SendReportEventStatus
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,R5
        MOV     ?V0 + 3,R1
        MOV     A,#0xe
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 2,A
// 1646 #if defined ( ZCL_LOAD_CONTROL )
// 1647   // According to the Smart Metering Specification, upon receipt
// 1648   // of the Load Control Event command, the receiving device shall
// 1649   // send Report Event Status command back.
// 1650   uint8 eventStatus;
// 1651 
// 1652   if ( status == ZCL_STATUS_INVALID_FIELD )
        MOV     A,#-0x7b
        XRL     A,?V0 + 3
        JNZ     ??esp_LoadControlEventCB_0
// 1653   {
// 1654     // If the incoming message has invalid fields in it
// 1655     // Send response back with status: rejected
// 1656     eventStatus = EVENT_STATUS_LOAD_CONTROL_EVENT_REJECTED;
        MOV     ?V0 + 5,#-0x2
        SJMP    ??esp_LoadControlEventCB_1
// 1657   }
// 1658   else
// 1659   { // Send response back with status: received
// 1660     eventStatus = EVENT_STATUS_LOAD_CONTROL_EVENT_RECEIVED;
??esp_LoadControlEventCB_0:
        MOV     ?V0 + 5,#0x1
// 1661   }
// 1662 
// 1663   // Send response back
// 1664   esp_SendReportEventStatus( srcAddr, seqNum, pCmd->issuerEvent,
// 1665                                    pCmd->startTime, eventStatus,
// 1666                                    pCmd->criticalityLevel, pCmd->eventControl);
??esp_LoadControlEventCB_1:
        ; Setup parameters for call to function esp_SendReportEventStatus
        MOV     A,R6
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     ?V0 + 4,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 15)
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 19)
        MOV     DPL,R6
        MOV     DPH,R7
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 23)
        MOV     A,R6
        ADD     A,#0xe
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     R4,?V0 + 5
        MOV     R1,?V0 + 2
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??esp_SendReportEventStatus?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 14)
// 1667 
// 1668   if ( status != ZCL_STATUS_INVALID_FIELD )
// 1669   {
// 1670     // add user load control event handler here
// 1671   }
// 1672 #endif // ZCL_LOAD_CONTROL
// 1673 }
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock29
// 1674 
// 1675 /*********************************************************************
// 1676  * @fn      esp_CancelLoadControlEventCB
// 1677  *
// 1678  * @brief   Callback from the ZCL SE Profile Load Control Cluster Library when
// 1679  *          it received a Cancel Load Control Event Command for
// 1680  *          this application.
// 1681  *
// 1682  * @param   pCmd - pointer to structure for Cancel Load Control Event command
// 1683  * @param   scrAddr - source address
// 1684  * @param   seqNum - sequence number for this command
// 1685  *
// 1686  * @return  none
// 1687  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1688 static void esp_CancelLoadControlEventCB( zclCCCancelLoadControlEvent_t *pCmd,
esp_CancelLoadControlEventCB:
          CFI Block cfiBlock30 Using cfiCommon0
          CFI Function esp_CancelLoadControlEventCB
        CODE
// 1689                                                 afAddrType_t *srcAddr, uint8 seqNum )
// 1690 {
        FUNCALL esp_CancelLoadControlEventCB, esp_SendReportEventStatus
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 21, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 21, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,R5
        MOV     ?V0 + 2,R1
// 1691 #if defined ( ZCL_LOAD_CONTROL )
// 1692   if ( 0 )  // User shall replace the if condition with "if the event exist"
// 1693   {
// 1694     // If the event exist, stop the event, and respond with status: cancelled
// 1695 
// 1696     // Cancel the event here
// 1697 
// 1698     // Use the following sample code to send response back.
// 1699     /*
// 1700     esp_SendReportEventStatus( srcAddr, seqNum, pCmd->issuerEventID,
// 1701                                      // startTime
// 1702                                      EVENT_STATUS_LOAD_CONTROL_EVENT_CANCELLED, // eventStatus
// 1703                                      // Criticality level
// 1704                                      // eventControl };
// 1705     */
// 1706 
// 1707   }
// 1708   else
// 1709   {
// 1710     // If the event does not exist, respond with status: rejected
// 1711     // The rest of the mandatory fields are not available, therefore,
// 1712     // set to optional value
// 1713     esp_SendReportEventStatus( srcAddr, seqNum, pCmd->issuerEventID,
// 1714                                      SE_OPTIONAL_FIELD_UINT32,                  // startTime
// 1715                                      EVENT_STATUS_LOAD_CONTROL_EVENT_RECEIVED,  // eventStatus
// 1716                                      SE_OPTIONAL_FIELD_UINT8,                   // Criticality level
// 1717                                      SE_OPTIONAL_FIELD_UINT8 );                 // eventControl
        ; Setup parameters for call to function esp_SendReportEventStatus
        MOV     ?V0 + 3,#-0x1
        MOV     R0,#?V0 + 3
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 13)
        MOV     DPTR,#__Constant_ffffffff
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 17)
        MOV     DPL,R6
        MOV     DPH,R7
        LCALL   ?PUSH_XSTACK8_X_FOUR
          CFI CFA_XSP16 add(XSP16, 21)
        MOV     R5,#-0x1
        MOV     R4,#0x1
        MOV     R1,?V0 + 2
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??esp_SendReportEventStatus?relay
        MOV     A,#0x9
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
// 1718   }
// 1719 
// 1720 #endif // ZCL_LOAD_CONTROL
// 1721 }
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock30
// 1722 
// 1723 /*********************************************************************
// 1724  * @fn      esp_CancelAllLoadControlEventsCB
// 1725  *
// 1726  * @brief   Callback from the ZCL SE Profile Load Control Cluster Library when
// 1727  *          it received a Cancel All Load Control Event Command for
// 1728  *          this application.
// 1729  *
// 1730  * @param   pCmd - pointer to structure for Cancel All Load Control Event command
// 1731  * @param   scrAddr - source address
// 1732  * @param   seqNum - sequence number for this command
// 1733  *
// 1734  * @return  none
// 1735  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1736 static void esp_CancelAllLoadControlEventsCB( zclCCCancelAllLoadControlEvents_t *pCmd,
esp_CancelAllLoadControlEventsCB:
          CFI Block cfiBlock31 Using cfiCommon0
          CFI Function esp_CancelAllLoadControlEventsCB
        CODE
// 1737                                                     afAddrType_t *srcAddr, uint8 seqNum )
// 1738 {
        ; Saved register size: 0
        ; Auto size: 0
// 1739   // Upon receipt of Cancel All Load Control Event Command,
// 1740   // the receiving device shall look up the table for all events
// 1741   // and send a seperate response for each event
// 1742 
// 1743 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock31
// 1744 
// 1745 /*********************************************************************
// 1746  * @fn      esp_ReportEventStatusCB
// 1747  *
// 1748  * @brief   Callback from the ZCL SE Profile Load Control Cluster Library when
// 1749  *          it received a Report Event Status Command for
// 1750  *          this application.
// 1751  *
// 1752  * @param   pCmd - pointer to structure for Report Event Status command
// 1753  * @param   scrAddr - source address
// 1754  * @param   seqNum - sequence number for this command
// 1755  *
// 1756  * @return  none
// 1757  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1758 static void esp_ReportEventStatusCB( zclCCReportEventStatus_t *pCmd,
esp_ReportEventStatusCB:
          CFI Block cfiBlock32 Using cfiCommon0
          CFI Function esp_ReportEventStatusCB
        CODE
// 1759                                            afAddrType_t *srcAddr, uint8 seqNum)
// 1760 {
        ; Saved register size: 0
        ; Auto size: 0
// 1761   // add user code here
// 1762 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock32
// 1763 /*********************************************************************
// 1764  * @fn      esp_GetScheduledEventCB
// 1765  *
// 1766  * @brief   Callback from the ZCL SE Profile Load Control Cluster Library when
// 1767  *          it received a Get Scheduled Event Command for
// 1768  *          this application.
// 1769  *
// 1770  * @param   pCmd - pointer to structure for Get Scheduled Event command
// 1771  * @param   scrAddr - source address
// 1772  * @param   seqNum - sequence number for this command
// 1773  *
// 1774  * @return  none
// 1775  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1776 static void esp_GetScheduledEventCB( zclCCGetScheduledEvent_t *pCmd,
esp_GetScheduledEventCB:
          CFI Block cfiBlock33 Using cfiCommon0
          CFI Function esp_GetScheduledEventCB
        CODE
// 1777                                            afAddrType_t *srcAddr, uint8 seqNum )
// 1778 {
        ; Saved register size: 0
        ; Auto size: 0
// 1779   // add user code here
// 1780 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock33
// 1781 
// 1782 /*********************************************************************
// 1783  * @fn      esp_SelAvailEmergencyCreditCmdCB
// 1784  *
// 1785  * @brief   Callback from the ZCL SE Prepayment Cluster Library when it recieved
// 1786  *          Select Available Emergency Credit command in the application
// 1787  *
// 1788  * @param   pCmd - pointer to structure for Select Available Emergency Credit command
// 1789  * @param   srcAddr - pointer to source address
// 1790  * @param   seqNum - Sequence no of the message
// 1791  *
// 1792  * @return  none
// 1793  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1794 static void esp_SelAvailEmergencyCreditCmdCB( zclCCSelAvailEmergencyCredit_t *pCmd,
esp_SelAvailEmergencyCreditCmdCB:
          CFI Block cfiBlock34 Using cfiCommon0
          CFI Function esp_SelAvailEmergencyCreditCmdCB
        CODE
// 1795                                               afAddrType_t *srcAddr, uint8 seqNum )
// 1796 {
        ; Saved register size: 0
        ; Auto size: 0
// 1797 #if defined ( ZCL_PREPAYMENT )
// 1798 #if defined ( LCD_SUPPORTED )
// 1799   HalLcdWriteString("Emergency Credit", HAL_LCD_LINE_1);
// 1800 
// 1801   if ((pCmd->siteId.strLen > 0) &&
// 1802       (pCmd->siteId.strLen <= HAL_LCD_MAX_CHARS) &&
// 1803       (pCmd->siteId.pStr != NULL))
// 1804   {
// 1805     HalLcdWriteString((char*)pCmd->siteId.pStr, HAL_LCD_LINE_2);
// 1806   }
// 1807 
// 1808   if ((pCmd->meterSerialNumber.strLen > 0) &&
// 1809       (pCmd->meterSerialNumber.strLen <= HAL_LCD_MAX_CHARS) &&
// 1810       (pCmd->meterSerialNumber.pStr != NULL))
// 1811   {
// 1812     HalLcdWriteString((char*)pCmd->meterSerialNumber.pStr, HAL_LCD_LINE_3);
// 1813   }
// 1814 #endif
// 1815 #endif  // ZCL_PREPAYMENT
// 1816 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock34
// 1817 
// 1818 /*********************************************************************
// 1819  * @fn      esp_ChangeSupplyCmdCB
// 1820  *
// 1821  * @brief   Callback from the ZCL SE Prepayment Cluster Library when it recieved
// 1822  *          Change Supply command in the application
// 1823  *
// 1824  * @param   pCmd - pointer to structure for Change Supply command
// 1825  * @param   srcAddr - pointer to source address
// 1826  * @param   seqNum - Sequence no of the message
// 1827  *
// 1828  * @return  none
// 1829  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1830 static void esp_ChangeSupplyCmdCB( zclCCChangeSupply_t *pCmd,
esp_ChangeSupplyCmdCB:
          CFI Block cfiBlock35 Using cfiCommon0
          CFI Function esp_ChangeSupplyCmdCB
        CODE
// 1831                                        afAddrType_t *srcAddr, uint8 seqNum )
// 1832 {
        ; Saved register size: 0
        ; Auto size: 0
// 1833 #if defined ( ZCL_PREPAYMENT )
// 1834 #if !defined ( SE_UK_EXT )
// 1835   zclCCSupplyStatusResponse_t SupplyStatus_cmd;
// 1836 
// 1837   osal_memset( &SupplyStatus_cmd, 0, sizeof( zclCCSupplyStatusResponse_t ) );
// 1838 
// 1839   SupplyStatus_cmd.providerId = pCmd->providerId;
// 1840   SupplyStatus_cmd.implementationDateTime = osal_getClock();
// 1841   SupplyStatus_cmd.supplyStatus = pCmd->proposedSupplyStatus;
// 1842 
// 1843   zclSE_Prepayment_Send_SupplyStatusResponse( ESP_ENDPOINT, srcAddr, &SupplyStatus_cmd,
// 1844                                               FALSE, seqNum );
// 1845 #endif  // SE_UK_EXT
// 1846 #endif  // ZCL_PREPAYMENT
// 1847 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock35
// 1848 
// 1849 /*********************************************************************
// 1850  * @fn      esp_SupplyStatusRspCB
// 1851  *
// 1852  * @brief    Callback from the ZCL SE Prepayment Cluster Library when it recieved
// 1853  *           Supply Status Response command in the application
// 1854  *
// 1855  * @param   pCmd - pointer to structure for Supply Status Response command
// 1856  * @param   srcAddr - pointer to source address
// 1857  * @param   seqNum - Sequence no of the message
// 1858  *
// 1859  * @return  none
// 1860  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1861 static void esp_SupplyStatusRspCB( zclCCSupplyStatusResponse_t *pCmd,
esp_SupplyStatusRspCB:
          CFI Block cfiBlock36 Using cfiCommon0
          CFI Function esp_SupplyStatusRspCB
        CODE
// 1862                                        afAddrType_t *srcAddr, uint8 seqNum )
// 1863 {
        ; Saved register size: 0
        ; Auto size: 0
// 1864   // add user code here
// 1865 }
        LJMP    ?BRET
          CFI EndBlock cfiBlock36
// 1866 
// 1867 #if defined ( SE_UK_EXT )
// 1868 /*********************************************************************
// 1869  * @fn      esp_GetSnapshotRspCB
// 1870  *
// 1871  * @brief   Callback from the ZCL SE Profile Simple Metering Cluster Library when
// 1872  *          it received a Get Snapshot Response for
// 1873  *          this application.
// 1874  *
// 1875  * @param   pCmd - pointer to structure for Get Snapshot Response command
// 1876  * @param   srcAddr - pointer to source address
// 1877  * @param   seqNum - sequence number of this command
// 1878  *
// 1879  * @return  none
// 1880  */
// 1881 static void esp_GetSnapshotRspCB( zclCCReqGetSnapshotRsp_t *pCmd,
// 1882                                   afAddrType_t *srcAddr, uint8 seqNum )
// 1883 {
// 1884   // add user code here
// 1885 }
// 1886 
// 1887 /*********************************************************************
// 1888  * @fn      esp_PublishTariffInformationCB
// 1889  *
// 1890  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1891  *          it received a Publish Tariff Information for this application.
// 1892  *
// 1893  * @param   pCmd - pointer to structure for Publish Tariff Information command
// 1894  * @param   srcAddr - pointer to source address
// 1895  * @param   seqNum - sequence number of this command
// 1896  *
// 1897  * @return  none
// 1898  */
// 1899 static void esp_PublishTariffInformationCB( zclCCPublishTariffInformation_t *pCmd,
// 1900                                             afAddrType_t *srcAddr, uint8 seqNum )
// 1901 {
// 1902   // add user code here
// 1903 }
// 1904 
// 1905 /*********************************************************************
// 1906  * @fn      esp_PublishPriceMatrixCB
// 1907  *
// 1908  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1909  *          it received a Publish Price Matrix for this application.
// 1910  *
// 1911  * @param   pCmd - pointer to structure for Publish Price Matrix command
// 1912  * @param   srcAddr - pointer to source address
// 1913  * @param   seqNum - sequence number of this command
// 1914  *
// 1915  * @return  none
// 1916  */
// 1917 static void esp_PublishPriceMatrixCB( zclCCPublishPriceMatrix_t *pCmd,
// 1918                                       afAddrType_t *srcAddr, uint8 seqNum )
// 1919 {
// 1920   // add user code here
// 1921 }
// 1922 
// 1923 /*********************************************************************
// 1924  * @fn      esp_PublishBlockThresholdsCB
// 1925  *
// 1926  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1927  *          it received a Publish Block Thresholds for this application.
// 1928  *
// 1929  * @param   pCmd - pointer to structure for Publish Block Thresholds command
// 1930  * @param   srcAddr - pointer to source address
// 1931  * @param   seqNum - sequence number of this command
// 1932  *
// 1933  * @return  none
// 1934  */
// 1935 static void esp_PublishBlockThresholdsCB( zclCCPublishBlockThresholds_t *pCmd,
// 1936                                           afAddrType_t *srcAddr, uint8 seqNum )
// 1937 {
// 1938   // add user code here
// 1939 }
// 1940 
// 1941 /*********************************************************************
// 1942  * @fn      esp_PublishConversionFactorCB
// 1943  *
// 1944  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1945  *          it received a Publish Conversion Factor for this application.
// 1946  *
// 1947  * @param   pCmd - pointer to structure for Publish Conversion Factor command
// 1948  * @param   srcAddr - pointer to source address
// 1949  * @param   seqNum - sequence number of this command
// 1950  *
// 1951  * @return  none
// 1952  */
// 1953 static void esp_PublishConversionFactorCB( zclCCPublishConversionFactor_t *pCmd,
// 1954                                            afAddrType_t *srcAddr, uint8 seqNum )
// 1955 {
// 1956   // add user code here
// 1957 }
// 1958 
// 1959 /*********************************************************************
// 1960  * @fn      esp_PublishCalorificValueCB
// 1961  *
// 1962  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1963  *          it received a Publish Calorific Value for this application.
// 1964  *
// 1965  * @param   pCmd - pointer to structure for Publish Calorific Value command
// 1966  * @param   srcAddr - pointer to source address
// 1967  * @param   seqNum - sequence number of this command
// 1968  *
// 1969  * @return  none
// 1970  */
// 1971 static void esp_PublishCalorificValueCB( zclCCPublishCalorificValue_t *pCmd,
// 1972                                          afAddrType_t *srcAddr, uint8 seqNum )
// 1973 {
// 1974   // add user code here
// 1975 }
// 1976 
// 1977 /*********************************************************************
// 1978  * @fn      esp_PublishCO2ValueCB
// 1979  *
// 1980  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1981  *          it received a Publish CO2 Value for this application.
// 1982  *
// 1983  * @param   pCmd - pointer to structure for Publish CO2 Value command
// 1984  * @param   srcAddr - pointer to source address
// 1985  * @param   seqNum - sequence number of this command
// 1986  *
// 1987  * @return  none
// 1988  */
// 1989 static void esp_PublishCO2ValueCB( zclCCPublishCO2Value_t *pCmd,
// 1990                                    afAddrType_t *srcAddr, uint8 seqNum )
// 1991 {
// 1992   // add user code here
// 1993 }
// 1994 
// 1995 /*********************************************************************
// 1996  * @fn      esp_PublishCPPEventCB
// 1997  *
// 1998  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 1999  *          it received a Publish CPP Event for this application.
// 2000  *
// 2001  * @param   pCmd - pointer to structure for Publish CPP Event command
// 2002  * @param   srcAddr - pointer to source address
// 2003  * @param   seqNum - sequence number of this command
// 2004  *
// 2005  * @return  none
// 2006  */
// 2007 static void esp_PublishCPPEventCB( zclCCPublishCPPEvent_t *pCmd,
// 2008                                    afAddrType_t *srcAddr, uint8 seqNum )
// 2009 {
// 2010   // add user code here
// 2011 }
// 2012 
// 2013 /*********************************************************************
// 2014  * @fn      esp_PublishBillingPeriodCB
// 2015  *
// 2016  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2017  *          it received a Publish Billing Period for this application.
// 2018  *
// 2019  * @param   pCmd - pointer to structure for Publish Billing Period command
// 2020  * @param   srcAddr - pointer to source address
// 2021  * @param   seqNum - sequence number of this command
// 2022  *
// 2023  * @return  none
// 2024  */
// 2025 static void esp_PublishBillingPeriodCB( zclCCPublishBillingPeriod_t *pCmd,
// 2026                                         afAddrType_t *srcAddr, uint8 seqNum )
// 2027 {
// 2028   // add user code here
// 2029 }
// 2030 
// 2031 /*********************************************************************
// 2032  * @fn      esp_PublishConsolidatedBillCB
// 2033  *
// 2034  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2035  *          it received a Publish Consolidated Bill for this application.
// 2036  *
// 2037  * @param   pCmd - pointer to structure for Publish Consolidated Bill command
// 2038  * @param   srcAddr - pointer to source address
// 2039  * @param   seqNum - sequence number of this command
// 2040  *
// 2041  * @return  none
// 2042  */
// 2043 static void esp_PublishConsolidatedBillCB( zclCCPublishConsolidatedBill_t *pCmd,
// 2044                                            afAddrType_t *srcAddr, uint8 seqNum )
// 2045 {
// 2046   // add user code here
// 2047 }
// 2048 
// 2049 /*********************************************************************
// 2050  * @fn      esp_PublishCreditPaymentInfoCB
// 2051  *
// 2052  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2053  *          it received a Publish Credit Payment Info for this application.
// 2054  *
// 2055  * @param   pCmd - pointer to structure for Publish Credit Payment Info command
// 2056  * @param   srcAddr - pointer to source address
// 2057  * @param   seqNum - sequence number of this command
// 2058  *
// 2059  * @return  none
// 2060  */
// 2061 static void esp_PublishCreditPaymentInfoCB( zclCCPublishCreditPaymentInfo_t *pCmd,
// 2062                                             afAddrType_t *srcAddr, uint8 seqNum )
// 2063 {
// 2064   // add user code here
// 2065 }
// 2066 
// 2067 /*********************************************************************
// 2068  * @fn      esp_GetTariffInformationCB
// 2069  *
// 2070  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2071  *          it received a Get Tariff Information for this application.
// 2072  *
// 2073  * @param   pCmd - pointer to structure for Get Tariff Information command
// 2074  * @param   srcAddr - pointer to source address
// 2075  * @param   seqNum - sequence number of this command
// 2076  *
// 2077  * @return  none
// 2078  */
// 2079 static void esp_GetTariffInformationCB( zclCCGetTariffInformation_t *pCmd,
// 2080                                         afAddrType_t *srcAddr, uint8 seqNum )
// 2081 {
// 2082   // add user code here
// 2083 }
// 2084 
// 2085 /*********************************************************************
// 2086  * @fn      esp_GetPriceMatrixCB
// 2087  *
// 2088  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2089  *          it received a Get Price Matrix for this application.
// 2090  *
// 2091  * @param   issuerTariffId - issuer tariff Id
// 2092  * @param   srcAddr - pointer to source address
// 2093  * @param   seqNum - sequence number of this command
// 2094  *
// 2095  * @return  none
// 2096  */
// 2097 static void esp_GetPriceMatrixCB( uint32 issuerTariffId,
// 2098                                   afAddrType_t *srcAddr, uint8 seqNum )
// 2099 {
// 2100   // add user code here
// 2101 }
// 2102 
// 2103 /*********************************************************************
// 2104  * @fn      esp_GetBlockThresholdsCB
// 2105  *
// 2106  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2107  *          it received a Get Block Thresholds for this application.
// 2108  *
// 2109  * @param   issuerTariffId - issuer tariff Id
// 2110  * @param   srcAddr - pointer to source address
// 2111  * @param   seqNum - sequence number of this command
// 2112  *
// 2113  * @return  none
// 2114  */
// 2115 static void esp_GetBlockThresholdsCB( uint32 issuerTariffId,
// 2116                                       afAddrType_t *srcAddr, uint8 seqNum )
// 2117 {
// 2118   // add user code here
// 2119 }
// 2120 
// 2121 /*********************************************************************
// 2122  * @fn      esp_GetConversionFactorCB
// 2123  *
// 2124  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2125  *          it received a Get Conversion Factor for this application.
// 2126  *
// 2127  * @param   pCmd - pointer to structure for Get Conversion Factor command
// 2128  * @param   srcAddr - pointer to source address
// 2129  * @param   seqNum - sequence number of this command
// 2130  *
// 2131  * @return  none
// 2132  */
// 2133 static void esp_GetConversionFactorCB( zclCCGetConversionFactor_t *pCmd,
// 2134                                        afAddrType_t *srcAddr, uint8 seqNum )
// 2135 {
// 2136   // add user code here
// 2137 }
// 2138 
// 2139 /*********************************************************************
// 2140  * @fn      esp_GetCalorificValueCB
// 2141  *
// 2142  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2143  *          it received a Get Calorific Value for this application.
// 2144  *
// 2145  * @param   pCmd - pointer to structure for Get Calorific Value command
// 2146  * @param   srcAddr - pointer to source address
// 2147  * @param   seqNum - sequence number of this command
// 2148  *
// 2149  * @return  none
// 2150  */
// 2151 static void esp_GetCalorificValueCB( zclCCGetCalorificValue_t *pCmd,
// 2152                                      afAddrType_t *srcAddr, uint8 seqNum )
// 2153 {
// 2154   // add user code here
// 2155 }
// 2156 
// 2157 /*********************************************************************
// 2158  * @fn      esp_GetCO2ValueCB
// 2159  *
// 2160  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2161  *          it received a Get CO2 Value for this application.
// 2162  *
// 2163  * @param   pCmd - pointer to structure for Get CO2 Value command
// 2164  * @param   srcAddr - pointer to source address
// 2165  * @param   seqNum - sequence number of this command
// 2166  *
// 2167  * @return  none
// 2168  */
// 2169 static void esp_GetCO2ValueCB( zclCCGetCO2Value_t *pCmd,
// 2170                                afAddrType_t *srcAddr, uint8 seqNum )
// 2171 {
// 2172   // add user code here
// 2173 }
// 2174 
// 2175 /*********************************************************************
// 2176  * @fn      esp_GetBillingPeriodCB
// 2177  *
// 2178  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2179  *          it received a Get Billing Period for this application.
// 2180  *
// 2181  * @param   pCmd - pointer to structure for Get Billing Period command
// 2182  * @param   srcAddr - pointer to source address
// 2183  * @param   seqNum - sequence number of this command
// 2184  *
// 2185  * @return  none
// 2186  */
// 2187 static void esp_GetBillingPeriodCB( zclCCGetBillingPeriod_t *pCmd,
// 2188                                     afAddrType_t *srcAddr, uint8 seqNum )
// 2189 {
// 2190   // add user code here
// 2191 }
// 2192 
// 2193 /*********************************************************************
// 2194  * @fn      esp_GetConsolidatedBillCB
// 2195  *
// 2196  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2197  *          it received a Get Consolidated Bill for this application.
// 2198  *
// 2199  * @param   pCmd - pointer to structure for Get Consolidated Bill command
// 2200  * @param   srcAddr - pointer to source address
// 2201  * @param   seqNum - sequence number of this command
// 2202  *
// 2203  * @return  none
// 2204  */
// 2205 static void esp_GetConsolidatedBillCB( zclCCGetConsolidatedBill_t *pCmd,
// 2206                                        afAddrType_t *srcAddr, uint8 seqNum )
// 2207 {
// 2208   // add user code here
// 2209 }
// 2210 
// 2211 /*********************************************************************
// 2212  * @fn      esp_CPPEventResponseCB
// 2213  *
// 2214  * @brief   Callback from the ZCL SE Profile Price Cluster Library when
// 2215  *          it received a CPP Event Response for this application.
// 2216  *
// 2217  * @param   pCmd - pointer to structure for CPP Event Response command
// 2218  * @param   srcAddr - pointer to source address
// 2219  * @param   seqNum - sequence number of this command
// 2220  *
// 2221  * @return  none
// 2222  */
// 2223 static void esp_CPPEventResponseCB( zclCCCPPEventResponse_t *pCmd,
// 2224                                     afAddrType_t *srcAddr, uint8 seqNum )
// 2225 {
// 2226   // add user code here
// 2227 }
// 2228 
// 2229 /*********************************************************************
// 2230  * @fn      esp_ChangeDebtCB
// 2231  *
// 2232  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2233  *          it received a Change Debt for this application.
// 2234  *
// 2235  * @param   pCmd - pointer to structure for Change Debt command
// 2236  * @param   srcAddr - pointer to source address
// 2237  * @param   seqNum - sequence number of this command
// 2238  *
// 2239  * @return  none
// 2240  */
// 2241 static void esp_ChangeDebtCB( zclCCChangeDebt_t *pCmd,
// 2242                               afAddrType_t *srcAddr, uint8 seqNum )
// 2243 {
// 2244   // add user code here
// 2245 }
// 2246 
// 2247 /*********************************************************************
// 2248  * @fn      esp_EmergencyCreditSetupCB
// 2249  *
// 2250  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2251  *          it received a Emergency Credit Setup for this application.
// 2252  *
// 2253  * @param   pCmd - pointer to structure for Emergency Credit Setup command
// 2254  * @param   srcAddr - pointer to source address
// 2255  * @param   seqNum - sequence number of this command
// 2256  *
// 2257  * @return  none
// 2258  */
// 2259 static void esp_EmergencyCreditSetupCB( zclCCEmergencyCreditSetup_t *pCmd,
// 2260                                         afAddrType_t *srcAddr, uint8 seqNum )
// 2261 {
// 2262   // add user code here
// 2263 }
// 2264 
// 2265 /*********************************************************************
// 2266  * @fn      esp_ConsumerTopupCB
// 2267  *
// 2268  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2269  *          it received a Consumer Topup for this application.
// 2270  *
// 2271  * @param   pCmd - pointer to structure for Consumer Topup command
// 2272  * @param   srcAddr - pointer to source address
// 2273  * @param   seqNum - sequence number of this command
// 2274  *
// 2275  * @return  none
// 2276  */
// 2277 static void esp_ConsumerTopupCB( zclCCConsumerTopup_t *pCmd,
// 2278                                  afAddrType_t *srcAddr, uint8 seqNum )
// 2279 {
// 2280   // add user code here
// 2281 }
// 2282 
// 2283 /*********************************************************************
// 2284  * @fn      esp_CreditAdjustmentCB
// 2285  *
// 2286  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2287  *          it received a Credit Adjustment for this application.
// 2288  *
// 2289  * @param   pCmd - pointer to structure for Credit Adjustment command
// 2290  * @param   srcAddr - pointer to source address
// 2291  * @param   seqNum - sequence number of this command
// 2292  *
// 2293  * @return  none
// 2294  */
// 2295 static void esp_CreditAdjustmentCB( zclCCCreditAdjustment_t *pCmd,
// 2296                                     afAddrType_t *srcAddr, uint8 seqNum )
// 2297 {
// 2298   // add user code here
// 2299 }
// 2300 
// 2301 /*********************************************************************
// 2302  * @fn      esp_ChangePaymentModeCB
// 2303  *
// 2304  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2305  *          it received a Change Payment Mode for this application.
// 2306  *
// 2307  * @param   pCmd - pointer to structure for Change Payment Mode command
// 2308  * @param   srcAddr - pointer to source address
// 2309  * @param   seqNum - sequence number of this command
// 2310  *
// 2311  * @return  none
// 2312  */
// 2313 static void esp_ChangePaymentModeCB( zclCCChangePaymentMode_t *pCmd,
// 2314                                      afAddrType_t *srcAddr, uint8 seqNum )
// 2315 {
// 2316   // add user code here
// 2317 }
// 2318 
// 2319 /*********************************************************************
// 2320  * @fn      esp_GetPrepaySnapshotCB
// 2321  *
// 2322  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2323  *          it received a Get Prepay Snapshot for this application.
// 2324  *
// 2325  * @param   pCmd - pointer to structure for Get Prepay Snapshot command
// 2326  * @param   srcAddr - pointer to source address
// 2327  * @param   seqNum - sequence number of this command
// 2328  *
// 2329  * @return  none
// 2330  */
// 2331 static void esp_GetPrepaySnapshotCB( zclCCGetPrepaySnapshot_t *pCmd,
// 2332                                      afAddrType_t *srcAddr, uint8 seqNum )
// 2333 {
// 2334   // add user code here
// 2335 }
// 2336 
// 2337 /*********************************************************************
// 2338  * @fn      esp_GetTopupLogCB
// 2339  *
// 2340  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2341  *          it received a Get Topup Log for this application.
// 2342  *
// 2343  * @param   numEvents - number of events
// 2344  * @param   srcAddr - pointer to source address
// 2345  * @param   seqNum - sequence number of this command
// 2346  *
// 2347  * @return  none
// 2348  */
// 2349 static void esp_GetTopupLogCB( uint8 numEvents,
// 2350                                afAddrType_t *srcAddr, uint8 seqNum )
// 2351 {
// 2352   // add user code here
// 2353 }
// 2354 
// 2355 /*********************************************************************
// 2356  * @fn      esp_SetLowCreditWarningLevelCB
// 2357  *
// 2358  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2359  *          it received a Set Low Credit Warning Level for this application.
// 2360  *
// 2361  * @param   numEvents - number of events
// 2362  * @param   srcAddr - pointer to source address
// 2363  * @param   seqNum - sequence number of this command
// 2364  *
// 2365  * @return  none
// 2366  */
// 2367 static void esp_SetLowCreditWarningLevelCB( uint8 numEvents,
// 2368                                             afAddrType_t *srcAddr, uint8 seqNum )
// 2369 {
// 2370   // add user code here
// 2371 }
// 2372 
// 2373 /*********************************************************************
// 2374  * @fn      esp_GetDebtRepaymentLogCB
// 2375  *
// 2376  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2377  *          it received a Get Debt Repayment Log for this application.
// 2378  *
// 2379  * @param   pCmd - pointer to structure for Get Debt Repayment Log command
// 2380  * @param   srcAddr - pointer to source address
// 2381  * @param   seqNum - sequence number of this command
// 2382  *
// 2383  * @return  none
// 2384  */
// 2385 static void esp_GetDebtRepaymentLogCB( zclCCGetDebtRepaymentLog_t *pCmd,
// 2386                                        afAddrType_t *srcAddr, uint8 seqNum )
// 2387 {
// 2388   // add user code here
// 2389 }
// 2390 
// 2391 /*********************************************************************
// 2392  * @fn      esp_GetPrepaySnapshotResponseCB
// 2393  *
// 2394  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2395  *          it received a Get Prepay Snapshot Response for this application.
// 2396  *
// 2397  * @param   pCmd - pointer to structure for Get Prepay Snapshot Response command
// 2398  * @param   srcAddr - pointer to source address
// 2399  * @param   seqNum - sequence number of this command
// 2400  *
// 2401  * @return  none
// 2402  */
// 2403 static void esp_GetPrepaySnapshotResponseCB( zclCCGetPrepaySnapshotResponse_t *pCmd,
// 2404                                              afAddrType_t *srcAddr, uint8 seqNum )
// 2405 {
// 2406   // add user code here
// 2407 }
// 2408 
// 2409 /*********************************************************************
// 2410  * @fn      esp_ChangePaymentModeResponseCB
// 2411  *
// 2412  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2413  *          it received a Change Payment Mode Response for this application.
// 2414  *
// 2415  * @param   pCmd - pointer to structure for Change Payment Mode Response command
// 2416  * @param   srcAddr - pointer to source address
// 2417  * @param   seqNum - sequence number of this command
// 2418  *
// 2419  * @return  none
// 2420  */
// 2421 static void esp_ChangePaymentModeResponseCB( zclCCChangePaymentModeResponse_t *pCmd,
// 2422                                              afAddrType_t *srcAddr, uint8 seqNum )
// 2423 {
// 2424   // add user code here
// 2425 }
// 2426 
// 2427 /*********************************************************************
// 2428  * @fn      esp_ConsumerTopupResponseCB
// 2429  *
// 2430  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2431  *          it received a Consumer Topup Response for this application.
// 2432  *
// 2433  * @param   pCmd - pointer to structure for Consumer Topup Response command
// 2434  * @param   srcAddr - pointer to source address
// 2435  * @param   seqNum - sequence number of this command
// 2436  *
// 2437  * @return  none
// 2438  */
// 2439 static void esp_ConsumerTopupResponseCB( zclCCConsumerTopupResponse_t *pCmd,
// 2440                                          afAddrType_t *srcAddr, uint8 seqNum )
// 2441 {
// 2442   // add user code here
// 2443 }
// 2444 
// 2445 /*********************************************************************
// 2446  * @fn      esp_GetCommandsCB
// 2447  *
// 2448  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2449  *          it received a Get Commands for this application.
// 2450  *
// 2451  * @param   prepayNotificationFlags - prepayment notification flags
// 2452  * @param   srcAddr - pointer to source address
// 2453  * @param   seqNum - sequence number of this command
// 2454  *
// 2455  * @return  none
// 2456  */
// 2457 static void esp_GetCommandsCB( uint8 prepayNotificationFlags,
// 2458                                afAddrType_t *srcAddr, uint8 seqNum )
// 2459 {
// 2460   // add user code here
// 2461 }
// 2462 
// 2463 /*********************************************************************
// 2464  * @fn      esp_PublishTopupLogCB
// 2465  *
// 2466  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2467  *          it received a Publish Topup Log for this application.
// 2468  *
// 2469  * @param   pCmd - pointer to structure for Publish Topup Log command
// 2470  * @param   srcAddr - pointer to source address
// 2471  * @param   seqNum - sequence number of this command
// 2472  *
// 2473  * @return  none
// 2474  */
// 2475 static void esp_PublishTopupLogCB( zclCCPublishTopupLog_t *pCmd,
// 2476                                    afAddrType_t *srcAddr, uint8 seqNum )
// 2477 {
// 2478   // add user code here
// 2479 }
// 2480 
// 2481 /*********************************************************************
// 2482  * @fn      esp_PublishDebtLogCB
// 2483  *
// 2484  * @brief   Callback from the ZCL SE Profile Prepayment Cluster Library when
// 2485  *          it received a Publish Debt Log for this application.
// 2486  *
// 2487  * @param   pCmd - pointer to structure for Publish Debt Log command
// 2488  * @param   srcAddr - pointer to source address
// 2489  * @param   seqNum - sequence number of this command
// 2490  *
// 2491  * @return  none
// 2492  */
// 2493 static void esp_PublishDebtLogCB( zclCCPublishDebtLog_t *pCmd,
// 2494                                   afAddrType_t *srcAddr, uint8 seqNum )
// 2495 {
// 2496   // add user code here
// 2497 }
// 2498 #endif // SE_UK_EXT
// 2499 
// 2500 /******************************************************************************
// 2501  *
// 2502  *  Functions for processing ZDO incoming messages
// 2503  *
// 2504  *****************************************************************************/
// 2505 
// 2506 /*********************************************************************
// 2507  * @fn      esp_ProcessZDOMsg
// 2508  *
// 2509  * @brief   Process the incoming ZDO messages.
// 2510  *
// 2511  * @param   inMsg - message to process
// 2512  *
// 2513  * @return  none
// 2514  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2515 static void esp_ProcessZDOMsg( zdoIncomingMsg_t *inMsg )
esp_ProcessZDOMsg:
          CFI Block cfiBlock37 Using cfiCommon0
          CFI Function esp_ProcessZDOMsg
        CODE
// 2516 {
        FUNCALL esp_ProcessZDOMsg, ZDO_ParseDeviceAnnce
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZDOMsg, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZDOMsg, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZDOMsg, ZDO_ParseSimpleDescRsp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZDOMsg, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZDOMsg, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZDOMsg, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 23, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 23, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 11
        MOV     A,#-0xb
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 23)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 2517   ZDO_DeviceAnnce_t devAnnce;
// 2518 
// 2519   switch ( inMsg->clusterID )
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     ?V0 + 0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 1,A
        MOV     R0,#?V0 + 0
        LCALL   ?US_SWITCH_SPARSE
`?<Jumptable for esp_ProcessZDOMsg>_0`:
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        2
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        19
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??esp_ProcessZDOMsg_0
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        32772
        DATA
        DATA16
        DATA
        DATA16
        DATA
        DATA16
        DW        ??esp_ProcessZDOMsg_1
        DATA
        DATA16
        DATA
        DATA16
        DW        ??esp_ProcessZDOMsg_2
        CODE
// 2520   {
// 2521     case Device_annce:
// 2522       {
// 2523         ZDO_ParseDeviceAnnce( inMsg, &devAnnce );
??esp_ProcessZDOMsg_0:
        ; Setup parameters for call to function ZDO_ParseDeviceAnnce
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??ZDO_ParseDeviceAnnce?relay
// 2524         simpleDescReqAddr.addrMode = (afAddrMode_t)Addr16Bit;
        MOV     DPTR,#simpleDescReqAddr + 8
        MOV     A,#0x2
        MOVX    @DPTR,A
// 2525         simpleDescReqAddr.addr.shortAddr = devAnnce.nwkAddr;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#simpleDescReqAddr
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 2526 
// 2527         // set simple descriptor query event
// 2528         osal_set_event( espTaskID, SIMPLE_DESC_QUERY_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x4
        MOV     R3,#0x0
        MOV     DPTR,#espTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
        MOV     A,R1
// 2529       }
// 2530       break;
        LJMP    ??esp_ProcessZDOMsg_2 & 0xFFFF
// 2531 
// 2532     case Simple_Desc_rsp:
// 2533       {
// 2534         ZDO_SimpleDescRsp_t *pSimpleDescRsp;   // pointer to received simple desc response
// 2535         pSimpleDescRsp = (ZDO_SimpleDescRsp_t *)osal_mem_alloc( sizeof( ZDO_SimpleDescRsp_t ) );
??esp_ProcessZDOMsg_1:
        ; Setup parameters for call to function osal_mem_alloc
        MOV     R2,#0xf
        MOV     R3,#0x0
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     ?V0 + 0,?V0 + 2
        MOV     ?V0 + 1,?V0 + 3
// 2536 
// 2537         if(pSimpleDescRsp)
        MOV     A,?V0 + 0
        ORL     A,?V0 + 1
        JNZ     $+5
        LJMP    ??esp_ProcessZDOMsg_2 & 0xFFFF
// 2538         {
// 2539           pSimpleDescRsp->simpleDesc.pAppInClusterList = NULL;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 2540           pSimpleDescRsp->simpleDesc.pAppOutClusterList = NULL;
        MOV     A,?V0 + 0
        ADD     A,#0xd
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 2541 
// 2542           ZDO_ParseSimpleDescRsp( inMsg, pSimpleDescRsp );
        ; Setup parameters for call to function ZDO_ParseSimpleDescRsp
        MOV     R4,?V0 + 0
        MOV     R5,?V0 + 1
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??ZDO_ParseSimpleDescRsp?relay
// 2543           if( pSimpleDescRsp->simpleDesc.AppDeviceId == ZCL_SE_DEVICEID_PCT ) // this is a PCT
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??esp_ProcessZDOMsg_3
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x5
??esp_ProcessZDOMsg_3:
        JNZ     ??esp_ProcessZDOMsg_4
// 2544           {
// 2545             pctAddr.addr.shortAddr = pSimpleDescRsp->nwkAddr;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#pctAddr
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
        SJMP    ??esp_ProcessZDOMsg_5
// 2546           }
// 2547           else if ( pSimpleDescRsp->simpleDesc.AppDeviceId == ZCL_SE_DEVICEID_LOAD_CTRL_EXTENSION ) // this is a load control device
??esp_ProcessZDOMsg_4:
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x4
        JNZ     ??esp_ProcessZDOMsg_6
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x5
??esp_ProcessZDOMsg_6:
        JNZ     ??esp_ProcessZDOMsg_5
// 2548           {
// 2549             loadControlAddr.addr.shortAddr = pSimpleDescRsp->nwkAddr;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPTR,#loadControlAddr
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 2550           }
// 2551 
// 2552           // free memory for InClusterList
// 2553           if (pSimpleDescRsp->simpleDesc.pAppInClusterList)
??esp_ProcessZDOMsg_5:
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_ProcessZDOMsg_7
// 2554           {
// 2555             osal_mem_free(pSimpleDescRsp->simpleDesc.pAppInClusterList);
        ; Setup parameters for call to function osal_mem_free
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 2556           }
// 2557 
// 2558           // free memory for OutClusterList
// 2559           if (pSimpleDescRsp->simpleDesc.pAppOutClusterList)
??esp_ProcessZDOMsg_7:
        MOV     A,?V0 + 0
        ADD     A,#0xd
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_ProcessZDOMsg_8
// 2560           {
// 2561             osal_mem_free(pSimpleDescRsp->simpleDesc.pAppOutClusterList);
        ; Setup parameters for call to function osal_mem_free
        MOV     A,?V0 + 0
        ADD     A,#0xd
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 2562           }
// 2563 
// 2564           osal_mem_free( pSimpleDescRsp );
??esp_ProcessZDOMsg_8:
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??osal_mem_free?relay
// 2565         }
// 2566       }
// 2567       break;
// 2568   }
// 2569 }
??esp_ProcessZDOMsg_2:
        MOV     A,#0xb
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 12)
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock37
// 2570 
// 2571 
// 2572 /******************************************************************************
// 2573  *
// 2574  *  Functions for processing ZCL Foundation incoming Command/Response messages
// 2575  *
// 2576  *****************************************************************************/
// 2577 
// 2578 /*********************************************************************
// 2579  * @fn      esp_ProcessZCLMsg
// 2580  *
// 2581  * @brief   Process ZCL Foundation incoming message
// 2582  *
// 2583  * @param   pInMsg - message to process
// 2584  *
// 2585  * @return  none
// 2586  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2587 static void esp_ProcessZCLMsg( zclIncomingMsg_t *pInMsg )
esp_ProcessZCLMsg:
          CFI Block cfiBlock38 Using cfiCommon0
          CFI Function esp_ProcessZCLMsg
        CODE
// 2588 {
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInReadRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInWriteRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInConfigReportCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInConfigReportRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInReadReportCfgCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInReadReportCfgRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInReportCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, esp_ProcessInDefaultRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessZCLMsg, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 2589 
// 2590 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
// 2591   if ( esp_IsMirrorEndpoint( pInMsg->endPoint ) )
// 2592   {
// 2593     esp_MirrorProcessZCLMsg( pInMsg );
// 2594   }
// 2595   else
// 2596 #endif  // SE_UK_EXT && SE_MIRROR
// 2597   {
// 2598     switch ( pInMsg->zclHdr.commandID )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        DEC     A
        JZ      ??esp_ProcessZCLMsg_0
        ADD     A,#-0x3
        JZ      ??esp_ProcessZCLMsg_1
        ADD     A,#-0x2
        JZ      ??esp_ProcessZCLMsg_2
        DEC     A
        JZ      ??esp_ProcessZCLMsg_3
        DEC     A
        JZ      ??esp_ProcessZCLMsg_4
        DEC     A
        JZ      ??esp_ProcessZCLMsg_5
        DEC     A
        JZ      ??esp_ProcessZCLMsg_6
        DEC     A
        JZ      ??esp_ProcessZCLMsg_7
        SJMP    ??esp_ProcessZCLMsg_8
// 2599     {
// 2600 #if defined ( ZCL_READ )
// 2601       case ZCL_CMD_READ_RSP:
// 2602         esp_ProcessInReadRspCmd( pInMsg );
??esp_ProcessZCLMsg_0:
        ; Setup parameters for call to function esp_ProcessInReadRspCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInReadRspCmd?relay
        MOV     A,R1
// 2603         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2604 #endif // ZCL_READ
// 2605 #if defined ( ZCL_WRITE )
// 2606       case ZCL_CMD_WRITE_RSP:
// 2607         esp_ProcessInWriteRspCmd( pInMsg );
??esp_ProcessZCLMsg_1:
        ; Setup parameters for call to function esp_ProcessInWriteRspCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInWriteRspCmd?relay
        MOV     A,R1
// 2608         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2609 #endif // ZCL_WRITE
// 2610 #if defined ( ZCL_REPORT )
// 2611       case ZCL_CMD_CONFIG_REPORT:
// 2612         esp_ProcessInConfigReportCmd( pInMsg );
??esp_ProcessZCLMsg_2:
        ; Setup parameters for call to function esp_ProcessInConfigReportCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInConfigReportCmd?relay
        MOV     A,R1
// 2613         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2614 
// 2615       case ZCL_CMD_CONFIG_REPORT_RSP:
// 2616         esp_ProcessInConfigReportRspCmd( pInMsg );
??esp_ProcessZCLMsg_3:
        ; Setup parameters for call to function esp_ProcessInConfigReportRspCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInConfigReportRspCmd?relay
        MOV     A,R1
// 2617         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2618 
// 2619       case ZCL_CMD_READ_REPORT_CFG:
// 2620         esp_ProcessInReadReportCfgCmd( pInMsg );
??esp_ProcessZCLMsg_4:
        ; Setup parameters for call to function esp_ProcessInReadReportCfgCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInReadReportCfgCmd?relay
        MOV     A,R1
// 2621         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2622 
// 2623       case ZCL_CMD_READ_REPORT_CFG_RSP:
// 2624         esp_ProcessInReadReportCfgRspCmd( pInMsg );
??esp_ProcessZCLMsg_5:
        ; Setup parameters for call to function esp_ProcessInReadReportCfgRspCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInReadReportCfgRspCmd?relay
        MOV     A,R1
// 2625         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2626 
// 2627       case ZCL_CMD_REPORT:
// 2628         esp_ProcessInReportCmd( pInMsg );
??esp_ProcessZCLMsg_6:
        ; Setup parameters for call to function esp_ProcessInReportCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInReportCmd?relay
        MOV     A,R1
// 2629         break;
        SJMP    ??esp_ProcessZCLMsg_8
// 2630 #endif // ZCL_REPORT
// 2631       case ZCL_CMD_DEFAULT_RSP:
// 2632         esp_ProcessInDefaultRspCmd( pInMsg );
??esp_ProcessZCLMsg_7:
        ; Setup parameters for call to function esp_ProcessInDefaultRspCmd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??esp_ProcessInDefaultRspCmd?relay
        MOV     A,R1
// 2633         break;
// 2634 #if defined ( ZCL_DISCOVER )
// 2635       case ZCL_CMD_DISCOVER_RSP:
// 2636         esp_ProcessInDiscRspCmd( pInMsg );
// 2637         break;
// 2638 #endif // ZCL_DISCOVER
// 2639       default:
// 2640         break;
// 2641     }
// 2642   }
// 2643 
// 2644   if ( pInMsg->attrCmd != NULL )
??esp_ProcessZCLMsg_8:
        MOV     A,R6
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_ProcessZCLMsg_9
// 2645   {
// 2646     // free the parsed command
// 2647     osal_mem_free( pInMsg->attrCmd );
        ; Setup parameters for call to function osal_mem_free
        MOV     A,R6
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
// 2648     pInMsg->attrCmd = NULL;
        MOV     A,R6
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 2649   }
// 2650 }
??esp_ProcessZCLMsg_9:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock38
// 2651 
// 2652 #if defined ( ZCL_READ )
// 2653 /*********************************************************************
// 2654  * @fn      esp_ProcessInReadRspCmd
// 2655  *
// 2656  * @brief   Process the "Profile" Read Response Command
// 2657  *
// 2658  * @param   pInMsg - incoming message to process
// 2659  *
// 2660  * @return  none
// 2661  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2662 static uint8 esp_ProcessInReadRspCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInReadRspCmd:
          CFI Block cfiBlock39 Using cfiCommon0
          CFI Function esp_ProcessInReadRspCmd
        CODE
// 2663 {
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
// 2664   zclReadRspCmd_t *readRspCmd;
// 2665   uint8 i;
// 2666 
// 2667   readRspCmd = (zclReadRspCmd_t *)pInMsg->attrCmd;
        MOV     A,R2
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R3
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
// 2668   for (i = 0; i < readRspCmd->numAttr; i++)
        MOV     R4,#0x0
??esp_ProcessInReadRspCmd_0:
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R4
        CLR     C
        SUBB    A,R0
        JNC     ??esp_ProcessInReadRspCmd_1
        INC     R4
        SJMP    ??esp_ProcessInReadRspCmd_0
// 2669   {
// 2670     // Notify the originator of the results of the original read attributes
// 2671     // attempt and, for each successfull request, the value of the requested
// 2672     // attribute
// 2673   }
// 2674 
// 2675   return TRUE;
??esp_ProcessInReadRspCmd_1:
        MOV     R1,#0x1
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock39
// 2676 }
// 2677 #endif // ZCL_READ
// 2678 
// 2679 #if defined ( ZCL_WRITE )
// 2680 /*********************************************************************
// 2681  * @fn      esp_ProcessInWriteRspCmd
// 2682  *
// 2683  * @brief   Process the "Profile" Write Response Command
// 2684  *
// 2685  * @param   pInMsg - incoming message to process
// 2686  *
// 2687  * @return  none
// 2688  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2689 static uint8 esp_ProcessInWriteRspCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInWriteRspCmd:
          CFI Block cfiBlock40 Using cfiCommon0
          CFI Function esp_ProcessInWriteRspCmd
        CODE
// 2690 {
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
// 2691   zclWriteRspCmd_t *writeRspCmd;
// 2692   uint8 i;
// 2693 
// 2694   writeRspCmd = (zclWriteRspCmd_t *)pInMsg->attrCmd;
        MOV     A,R2
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R3
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
// 2695   for (i = 0; i < writeRspCmd->numAttr; i++)
        MOV     R4,#0x0
??esp_ProcessInWriteRspCmd_0:
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R4
        CLR     C
        SUBB    A,R0
        JNC     ??esp_ProcessInWriteRspCmd_1
        INC     R4
        SJMP    ??esp_ProcessInWriteRspCmd_0
// 2696   {
// 2697     // Notify the device of the results of the its original write attributes
// 2698     // command.
// 2699   }
// 2700 
// 2701   return TRUE;
??esp_ProcessInWriteRspCmd_1:
        MOV     R1,#0x1
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock40
// 2702 }
// 2703 #endif // ZCL_WRITE
// 2704 
// 2705 #if defined ( ZCL_REPORT )
// 2706 /*********************************************************************
// 2707  * @fn      esp_ProcessInConfigReportCmd
// 2708  *
// 2709  * @brief   Process the "Profile" Configure Reporting Command
// 2710  *
// 2711  * @param   pInMsg - incoming message to process
// 2712  *
// 2713  * @return  TRUE if attribute was found in the Attribute list,
// 2714  *          FALSE if not
// 2715  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2716 static uint8 esp_ProcessInConfigReportCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInConfigReportCmd:
          CFI Block cfiBlock41 Using cfiCommon0
          CFI Function esp_ProcessInConfigReportCmd
        CODE
// 2717 {
        FUNCALL esp_ProcessInConfigReportCmd, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInConfigReportCmd, zclFindAttrRec
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInConfigReportCmd, zcl_SendConfigReportRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInConfigReportCmd, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x14
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
// 2718   zclCfgReportCmd_t *cfgReportCmd;
// 2719   zclCfgReportRec_t *reportRec;
// 2720   zclCfgReportRspCmd_t *cfgReportRspCmd;
// 2721   zclAttrRec_t attrRec;
// 2722   uint8 status;
// 2723   uint8 i, j = 0;
        MOV     R6,#0x0
// 2724 
// 2725   cfgReportCmd = (zclCfgReportCmd_t *)pInMsg->attrCmd;
        MOV     A,?V0 + 4
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,?V0 + 5
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     ?V0 + 6,R0
        MOV     ?V0 + 7,R1
// 2726 
// 2727   // Allocate space for the response command
// 2728   cfgReportRspCmd = (zclCfgReportRspCmd_t *)osal_mem_alloc( sizeof ( zclCfgReportRspCmd_t ) +
// 2729                                         sizeof ( zclCfgReportStatus_t) * cfgReportCmd->numAttr );
        ; Setup parameters for call to function osal_mem_alloc
        MOV     DPL,?V0 + 6
        MOV     DPH,?V0 + 7
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x1
        MOV     R2,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 10,R2
        MOV     ?V0 + 11,R3
        MOV     ?V0 + 8,?V0 + 10
        MOV     ?V0 + 9,?V0 + 11
// 2730   if ( cfgReportRspCmd == NULL )
        MOV     A,?V0 + 8
        ORL     A,?V0 + 9
        JNZ     ??esp_ProcessInConfigReportCmd_0
// 2731   {
// 2732     return FALSE; // EMBEDDED RETURN
        MOV     R1,#0x0
        LJMP    ??esp_ProcessInConfigReportCmd_1 & 0xFFFF
// 2733   }
// 2734 
// 2735   // Process each Attribute Reporting Configuration record
// 2736   for ( i = 0; i < cfgReportCmd->numAttr; i++ )
??esp_ProcessInConfigReportCmd_0:
        MOV     ?V0 + 2,#0x0
??esp_ProcessInConfigReportCmd_2:
        MOV     DPL,?V0 + 6
        MOV     DPH,?V0 + 7
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,?V0 + 2
        CLR     C
        SUBB    A,R0
        JC      $+5
        LJMP    ??esp_ProcessInConfigReportCmd_3 & 0xFFFF
// 2737   {
// 2738     reportRec = &(cfgReportCmd->attrList[i]);
        MOV     A,?V0 + 2
        MOV     R0,?V0 + 2
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0xc
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0xc
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 6
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 7
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
// 2739 
// 2740     status = ZCL_STATUS_SUCCESS;
        MOV     R7,#0x0
// 2741 
// 2742     if ( zclFindAttrRec( ESP_ENDPOINT, pInMsg->clusterId, reportRec->attrID, &attrRec ) )
        ; Setup parameters for call to function zclFindAttrRec
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 10,DPL
        MOV     ?V0 + 11,DPH
        MOV     R0,#?V0 + 10
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,?V0 + 4
        MOV     DPH,?V0 + 5
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclFindAttrRec?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     A,R1
        JNZ     $+5
        LJMP    ??esp_ProcessInConfigReportCmd_4 & 0xFFFF
// 2743     {
// 2744       if ( reportRec->direction == ZCL_SEND_ATTR_REPORTS )
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        JZ      $+5
        LJMP    ??esp_ProcessInConfigReportCmd_5 & 0xFFFF
// 2745       {
// 2746         if ( reportRec->dataType == attrRec.attr.dataType )
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        XRL     A,R0
        JNZ     ??esp_ProcessInConfigReportCmd_6
// 2747         {
// 2748           // This the attribute that is to be reported
// 2749           if ( zcl_MandatoryReportableAttribute( &attrRec ) == TRUE )
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ORL     A,DPH
        JNZ     ??esp_ProcessInConfigReportCmd_7
// 2750           {
// 2751             if ( reportRec->minReportInt < ESP_MIN_REPORTING_INTERVAL ||
// 2752                  ( reportRec->maxReportInt != 0 &&
// 2753                    reportRec->maxReportInt < reportRec->minReportInt ) )
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,#0x5
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,#0x0
        JC      ??esp_ProcessInConfigReportCmd_8
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??esp_ProcessInConfigReportCmd_9
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        PUSH    DPL
          CFI CFA_SP SP+-1
        PUSH    DPH
          CFI CFA_SP SP+-2
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        POP     DPH
          CFI CFA_SP SP+-1
        POP     DPL
          CFI CFA_SP SP+0
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,R0
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,R1
        JNC     ??esp_ProcessInConfigReportCmd_9
// 2754             {
// 2755               // Invalid fields
// 2756               status = ZCL_STATUS_INVALID_VALUE;
??esp_ProcessInConfigReportCmd_8:
        MOV     R7,#-0x79
        SJMP    ??esp_ProcessInConfigReportCmd_10
// 2757             }
// 2758             else
// 2759             {
// 2760               // Set the Min and Max Reporting Intervals and Reportable Change
// 2761               //status = zclSetAttrReportInterval( pAttr, cfgReportCmd );
// 2762               status = ZCL_STATUS_UNREPORTABLE_ATTRIBUTE; // for now
??esp_ProcessInConfigReportCmd_9:
        MOV     R7,#-0x74
        SJMP    ??esp_ProcessInConfigReportCmd_10
// 2763             }
// 2764           }
// 2765           else
// 2766           {
// 2767             // Attribute cannot be reported
// 2768             status = ZCL_STATUS_UNREPORTABLE_ATTRIBUTE;
??esp_ProcessInConfigReportCmd_7:
        MOV     R7,#-0x74
        SJMP    ??esp_ProcessInConfigReportCmd_10
// 2769           }
// 2770         }
// 2771         else
// 2772         {
// 2773           // Attribute data type is incorrect
// 2774           status = ZCL_STATUS_INVALID_DATA_TYPE;
??esp_ProcessInConfigReportCmd_6:
        MOV     R7,#-0x73
        SJMP    ??esp_ProcessInConfigReportCmd_10
// 2775         }
// 2776       }
// 2777       else
// 2778       {
// 2779         // We shall expect reports of values of this attribute
// 2780         if ( zcl_MandatoryReportableAttribute( &attrRec ) == TRUE )
??esp_ProcessInConfigReportCmd_5:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ORL     A,DPH
        JNZ     ??esp_ProcessInConfigReportCmd_11
// 2781         {
// 2782           // Set the Timeout Period
// 2783           //status = zclSetAttrTimeoutPeriod( pAttr, cfgReportCmd );
// 2784           status = ZCL_STATUS_UNSUPPORTED_ATTRIBUTE; // for now
        MOV     R7,#-0x7a
        SJMP    ??esp_ProcessInConfigReportCmd_10
// 2785         }
// 2786         else
// 2787         {
// 2788           // Reports of attribute cannot be received
// 2789           status = ZCL_STATUS_UNSUPPORTED_ATTRIBUTE;
??esp_ProcessInConfigReportCmd_11:
        MOV     R7,#-0x7a
        SJMP    ??esp_ProcessInConfigReportCmd_10
// 2790         }
// 2791       }
// 2792     }
// 2793     else
// 2794     {
// 2795       // Attribute is not supported
// 2796       status = ZCL_STATUS_UNSUPPORTED_ATTRIBUTE;
??esp_ProcessInConfigReportCmd_4:
        MOV     R7,#-0x7a
// 2797     }
// 2798 
// 2799     // If not successful then record the status
// 2800     if ( status != ZCL_STATUS_SUCCESS )
??esp_ProcessInConfigReportCmd_10:
        MOV     A,R7
        JZ      ??esp_ProcessInConfigReportCmd_12
// 2801     {
// 2802       cfgReportRspCmd->attrList[j].status = status;
        MOV     A,R7
        PUSH    A
          CFI CFA_SP SP+-1
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 8
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 9
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        POP     A
          CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 2803       cfgReportRspCmd->attrList[j++].attrID = reportRec->attrID;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R4,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R4
        MOV     R4,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R4
        MOV     R1,A
        MOV     A,?V0 + 8
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 9
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        INC     R6
// 2804     }
// 2805   } // for loop
??esp_ProcessInConfigReportCmd_12:
        INC     ?V0 + 2
        LJMP    ??esp_ProcessInConfigReportCmd_2 & 0xFFFF
// 2806 
// 2807   if ( j == 0 )
??esp_ProcessInConfigReportCmd_3:
        MOV     A,R6
        JNZ     ??esp_ProcessInConfigReportCmd_13
// 2808   {
// 2809     // Since all attributes were configured successfully, include a single
// 2810     // attribute status record in the response command with the status field
// 2811     // set to SUCCESS and the attribute ID field omitted.
// 2812     cfgReportRspCmd->attrList[0].status = ZCL_STATUS_SUCCESS;
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 2813     cfgReportRspCmd->numAttr = 1;
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        MOV     A,#0x1
        MOVX    @DPTR,A
        SJMP    ??esp_ProcessInConfigReportCmd_14
// 2814   }
// 2815   else
// 2816   {
// 2817     cfgReportRspCmd->numAttr = j;
??esp_ProcessInConfigReportCmd_13:
        MOV     A,R6
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        MOVX    @DPTR,A
// 2818   }
// 2819 
// 2820   // Send the response back
// 2821   zcl_SendConfigReportRspCmd( ESP_ENDPOINT, &(pInMsg->srcAddr),
// 2822                               pInMsg->clusterId, cfgReportRspCmd, ZCL_FRAME_SERVER_CLIENT_DIR,
// 2823                               TRUE, pInMsg->zclHdr.transSeqNum );
??esp_ProcessInConfigReportCmd_14:
        ; Setup parameters for call to function zcl_SendConfigReportRspCmd
        MOV     DPL,?V0 + 4
        MOV     DPH,?V0 + 5
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 3
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 29)
        MOV     ?V0 + 3,#0x1
        MOV     R0,#?V0 + 3
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 3,#0x1
        MOV     R0,#?V0 + 3
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 31)
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 33)
        MOV     DPL,?V0 + 4
        MOV     DPH,?V0 + 5
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,?V0 + 4
        ADD     A,#0xa
        MOV     R2,A
        MOV     A,?V0 + 5
        ADDC    A,#0x0
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zcl_SendConfigReportRspCmd?relay
        MOV     A,#0x5
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 28)
        MOV     A,R1
// 2824   osal_mem_free( cfgReportRspCmd );
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        LCALL   ??osal_mem_free?relay
// 2825 
// 2826   return TRUE ;
        MOV     R1,#0x1
??esp_ProcessInConfigReportCmd_1:
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 20)
        MOV     R7,#0xc
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock41
// 2827 }
// 2828 
// 2829 /*********************************************************************
// 2830  * @fn      esp_ProcessInConfigReportRspCmd
// 2831  *
// 2832  * @brief   Process the "Profile" Configure Reporting Response Command
// 2833  *
// 2834  * @param   pInMsg - incoming message to process
// 2835  *
// 2836  * @return  none
// 2837  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2838 static uint8 esp_ProcessInConfigReportRspCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInConfigReportRspCmd:
          CFI Block cfiBlock42 Using cfiCommon0
          CFI Function esp_ProcessInConfigReportRspCmd
        CODE
// 2839 {
        FUNCALL esp_ProcessInConfigReportRspCmd, zclFindAttrRec
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 8
        MOV     A,#-0x8
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 22)
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
// 2840   zclCfgReportRspCmd_t *cfgReportRspCmd;
// 2841   zclAttrRec_t attrRec;
// 2842   uint8 i;
// 2843 
// 2844   cfgReportRspCmd = (zclCfgReportRspCmd_t *)pInMsg->attrCmd;
        MOV     A,?V0 + 0
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
// 2845   for (i = 0; i < cfgReportRspCmd->numAttr; i++)
        MOV     ?V0 + 2,#0x0
??esp_ProcessInConfigReportRspCmd_0:
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,?V0 + 2
        CLR     C
        SUBB    A,R0
        JNC     ??esp_ProcessInConfigReportRspCmd_1
// 2846   {
// 2847     if ( zclFindAttrRec( ESP_ENDPOINT, pInMsg->clusterId,
// 2848                          cfgReportRspCmd->attrList[i].attrID, &attrRec ) )
        ; Setup parameters for call to function zclFindAttrRec
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 4,DPL
        MOV     ?V0 + 5,DPH
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,?V0 + 2
        MOV     R0,?V0 + 2
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x4
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x4
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R6
        ADD     A,R0
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclFindAttrRec?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 22)
        MOV     A,R1
// 2849     {
// 2850       // Notify the device of success (or otherwise) of the its original configure
// 2851       // reporting command, for each attribute.
// 2852     }
// 2853   }
        INC     ?V0 + 2
        SJMP    ??esp_ProcessInConfigReportRspCmd_0
// 2854 
// 2855   return TRUE;
??esp_ProcessInConfigReportRspCmd_1:
        MOV     R1,#0x1
        MOV     A,#0x8
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 14)
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock42
// 2856 }
// 2857 
// 2858 /*********************************************************************
// 2859  * @fn      esp_ProcessInReadReportCfgCmd
// 2860  *
// 2861  * @brief   Process the "Profile" Read Reporting Configuration Command
// 2862  *
// 2863  * @param   pInMsg - incoming message to process
// 2864  *
// 2865  * @return  none
// 2866  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2867 static uint8 esp_ProcessInReadReportCfgCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInReadReportCfgCmd:
          CFI Block cfiBlock43 Using cfiCommon0
          CFI Function esp_ProcessInReadReportCfgCmd
        CODE
// 2868 {
        FUNCALL esp_ProcessInReadReportCfgCmd, zclFindAttrRec
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, zclAnalogDataType
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, zclGetDataTypeLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, osal_mem_alloc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, zclFindAttrRec
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, zclAnalogDataType
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, zclGetDataTypeLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, zcl_SendReadReportCfgRspCmd
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 39, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 39, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReadReportCfgCmd, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 10
        MOV     A,#-0xa
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     ?V0 + 6,R2
        MOV     ?V0 + 7,R3
// 2869   zclReadReportCfgCmd_t *readReportCfgCmd;
// 2870   zclReadReportCfgRspCmd_t *readReportCfgRspCmd;
// 2871   zclReportCfgRspRec_t *reportRspRec;
// 2872   zclAttrRec_t attrRec;
// 2873   uint8 reportChangeLen;
// 2874   uint8 *dataPtr;
// 2875   uint8 hdrLen;
// 2876   uint8 dataLen = 0;
        MOV     ?V0 + 1,#0x0
// 2877   uint8 status;
// 2878   uint8 i;
// 2879 
// 2880   readReportCfgCmd = (zclReadReportCfgCmd_t *)pInMsg->attrCmd;
        MOV     A,?V0 + 6
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,?V0 + 7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     ?V0 + 2,R0
        MOV     ?V0 + 3,R1
// 2881 
// 2882   // Find out the response length (Reportable Change field is of variable length)
// 2883   for ( i = 0; i < readReportCfgCmd->numAttr; i++ )
        MOV     R6,#0x0
??esp_ProcessInReadReportCfgCmd_0:
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R6
        CLR     C
        SUBB    A,R0
        JC      $+5
        LJMP    ??esp_ProcessInReadReportCfgCmd_1 & 0xFFFF
// 2884   {
// 2885     // For supported attributes with 'analog' data type, find out the length of
// 2886     // the Reportable Change field
// 2887     if ( zclFindAttrRec( ESP_ENDPOINT, pInMsg->clusterId,
// 2888                          readReportCfgCmd->attrList[i].attrID, &attrRec ) )
        ; Setup parameters for call to function zclFindAttrRec
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x3
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x3
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 2
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,?V0 + 6
        MOV     DPH,?V0 + 7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclFindAttrRec?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     A,R1
        JZ      ??esp_ProcessInReadReportCfgCmd_2
// 2889     {
// 2890       if ( zclAnalogDataType( attrRec.attr.dataType ) )
        ; Setup parameters for call to function zclAnalogDataType
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??zclAnalogDataType?relay
        MOV     A,R1
        JZ      ??esp_ProcessInReadReportCfgCmd_2
// 2891       {
// 2892          reportChangeLen = zclGetDataTypeLength( attrRec.attr.dataType );
        ; Setup parameters for call to function zclGetDataTypeLength
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??zclGetDataTypeLength?relay
        MOV     A,R1
        MOV     R7,A
// 2893 
// 2894          // add padding if neede
// 2895          if ( PADDING_NEEDED( reportChangeLen ) )
        MOV     A,R7
        MOV     B,#0x2
        DIV     AB
        MOV     A,B
        JZ      ??esp_ProcessInReadReportCfgCmd_3
// 2896          {
// 2897            reportChangeLen++;
        INC     R7
// 2898          }
// 2899          dataLen += reportChangeLen;
??esp_ProcessInReadReportCfgCmd_3:
        MOV     A,R7
        ADD     A,?V0 + 1
        MOV     ?V0 + 1,A
// 2900       }
// 2901     }
// 2902   }
??esp_ProcessInReadReportCfgCmd_2:
        INC     R6
        LJMP    ??esp_ProcessInReadReportCfgCmd_0 & 0xFFFF
// 2903 
// 2904   hdrLen = sizeof( zclReadReportCfgRspCmd_t ) + ( readReportCfgCmd->numAttr * sizeof( zclReportCfgRspRec_t ) );
??esp_ProcessInReadReportCfgCmd_1:
        MOV     B,#0xd
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        MUL     AB
        ADD     A,#0x1
        MOV     ?V0 + 12,A
// 2905 
// 2906   // Allocate space for the response command
// 2907   readReportCfgRspCmd = (zclReadReportCfgRspCmd_t *)osal_mem_alloc( hdrLen + dataLen );
        ; Setup parameters for call to function osal_mem_alloc
        MOV     ?V0 + 10,?V0 + 12
        MOV     ?V0 + 11,#0x0
        MOV     ?V0 + 8,?V0 + 1
        MOV     ?V0 + 9,#0x0
        MOV     A,?V0 + 10
        ADD     A,?V0 + 8
        MOV     R2,A
        MOV     A,?V0 + 11
        ADDC    A,?V0 + 9
        MOV     R3,A
        LCALL   ??osal_mem_alloc?relay
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
// 2908   if ( readReportCfgRspCmd == NULL )
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        JNZ     ??esp_ProcessInReadReportCfgCmd_4
// 2909   {
// 2910     return FALSE; // EMBEDDED RETURN
        MOV     R1,#0x0
        LJMP    ??esp_ProcessInReadReportCfgCmd_5 & 0xFFFF
// 2911   }
// 2912 
// 2913   dataPtr = (uint8 *)( (uint8 *)readReportCfgRspCmd + hdrLen );
??esp_ProcessInReadReportCfgCmd_4:
        MOV     ?V0 + 8,?V0 + 12
        MOV     ?V0 + 9,#0x0
        MOV     A,?V0 + 4
        ADD     A,?V0 + 8
        MOV     R0,A
        MOV     A,?V0 + 5
        ADDC    A,?V0 + 9
        MOV     R1,A
        MOV     ?V0 + 14,R0
        MOV     ?V0 + 15,R1
// 2914   readReportCfgRspCmd->numAttr = readReportCfgCmd->numAttr;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        MOV     DPL,?V0 + 4
        MOV     DPH,?V0 + 5
        MOVX    @DPTR,A
// 2915   for (i = 0; i < readReportCfgCmd->numAttr; i++)
        MOV     R6,#0x0
??esp_ProcessInReadReportCfgCmd_6:
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R6
        CLR     C
        SUBB    A,R0
        JC      $+5
        LJMP    ??esp_ProcessInReadReportCfgCmd_7 & 0xFFFF
// 2916   {
// 2917     reportRspRec = &(readReportCfgRspCmd->attrList[i]);
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0xd
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0xd
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 4
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 5
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        MOV     R0,DPL
        MOV     R1,DPH
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
// 2918 
// 2919     if ( zclFindAttrRec( ESP_ENDPOINT, pInMsg->clusterId,
// 2920                          readReportCfgCmd->attrList[i].attrID, &attrRec ) )
        ; Setup parameters for call to function zclFindAttrRec
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x3
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x3
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 2
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,?V0 + 6
        MOV     DPH,?V0 + 7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zclFindAttrRec?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     A,R1
        JZ      ??esp_ProcessInReadReportCfgCmd_8
// 2921     {
// 2922       if ( zcl_MandatoryReportableAttribute( &attrRec ) == TRUE )
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,DPL
        ORL     A,DPH
        JNZ     ??esp_ProcessInReadReportCfgCmd_9
// 2923       {
// 2924         // Get the Reporting Configuration
// 2925         // status = zclReadReportCfg( readReportCfgCmd->attrID[i], reportRspRec );
// 2926         status = ZCL_STATUS_UNREPORTABLE_ATTRIBUTE; // for now
        MOV     ?V0 + 0,#-0x74
// 2927         if ( status == ZCL_STATUS_SUCCESS && zclAnalogDataType( attrRec.attr.dataType ) )
        MOV     A,?V0 + 0
        JNZ     ??esp_ProcessInReadReportCfgCmd_10
        ; Setup parameters for call to function zclAnalogDataType
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??zclAnalogDataType?relay
        MOV     A,R1
        JZ      ??esp_ProcessInReadReportCfgCmd_10
// 2928         {
// 2929           reportChangeLen = zclGetDataTypeLength( attrRec.attr.dataType );
        ; Setup parameters for call to function zclGetDataTypeLength
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??zclGetDataTypeLength?relay
        MOV     A,R1
        MOV     R7,A
// 2930           //osal_memcpy( dataPtr, pBuf, reportChangeLen );
// 2931           reportRspRec->reportableChange = dataPtr;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        XCH     A,R0
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,R0
        ADDC    A,#0x0
        MOV     DPH,A
        MOV     A,?V0 + 14
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,?V0 + 15
        MOVX    @DPTR,A
// 2932 
// 2933           // add padding if needed
// 2934           if ( PADDING_NEEDED( reportChangeLen ) )
        MOV     A,R7
        MOV     B,#0x2
        DIV     AB
        MOV     A,B
        JZ      ??esp_ProcessInReadReportCfgCmd_11
// 2935           {
// 2936             reportChangeLen++;
        INC     R7
// 2937           }
// 2938           dataPtr += reportChangeLen;
??esp_ProcessInReadReportCfgCmd_11:
        MOV     ?V0 + 8,R7
        MOV     ?V0 + 9,#0x0
        MOV     A,?V0 + 14
        ADD     A,?V0 + 8
        MOV     ?V0 + 14,A
        MOV     A,?V0 + 15
        ADDC    A,?V0 + 9
        MOV     ?V0 + 15,A
        SJMP    ??esp_ProcessInReadReportCfgCmd_10
// 2939         }
// 2940       }
// 2941       else
// 2942       {
// 2943         // Attribute not in the Mandatory Reportable Attribute list
// 2944         status = ZCL_STATUS_UNREPORTABLE_ATTRIBUTE;
??esp_ProcessInReadReportCfgCmd_9:
        MOV     ?V0 + 0,#-0x74
        SJMP    ??esp_ProcessInReadReportCfgCmd_10
// 2945       }
// 2946     }
// 2947     else
// 2948     {
// 2949       // Attribute not found
// 2950       status = ZCL_STATUS_UNSUPPORTED_ATTRIBUTE;
??esp_ProcessInReadReportCfgCmd_8:
        MOV     ?V0 + 0,#-0x7a
// 2951     }
// 2952 
// 2953     reportRspRec->status = status;
??esp_ProcessInReadReportCfgCmd_10:
        MOV     A,?V0 + 0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
// 2954     reportRspRec->attrID = readReportCfgCmd->attrList[i].attrID;
        MOV     A,R6
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x3
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x3
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 2
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 3
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        INC     DPTR
        INC     DPTR
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
// 2955   }
        INC     R6
        LJMP    ??esp_ProcessInReadReportCfgCmd_6 & 0xFFFF
// 2956 
// 2957   // Send the response back
// 2958   zcl_SendReadReportCfgRspCmd( ESP_ENDPOINT, &(pInMsg->srcAddr),
// 2959                                pInMsg->clusterId, readReportCfgRspCmd, ZCL_FRAME_SERVER_CLIENT_DIR,
// 2960                                TRUE, pInMsg->zclHdr.transSeqNum );
??esp_ProcessInReadReportCfgCmd_7:
        ; Setup parameters for call to function zcl_SendReadReportCfgRspCmd
        MOV     DPL,?V0 + 6
        MOV     DPH,?V0 + 7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 8,A
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 35)
        MOV     ?V0 + 8,#0x1
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 36)
        MOV     ?V0 + 8,#0x1
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_ONE
          CFI CFA_XSP16 add(XSP16, 37)
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 39)
        MOV     DPL,?V0 + 6
        MOV     DPH,?V0 + 7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     A,?V0 + 6
        ADD     A,#0xa
        MOV     R2,A
        MOV     A,?V0 + 7
        ADDC    A,#0x0
        MOV     R3,A
        MOV     R1,#0x9
        LCALL   ??zcl_SendReadReportCfgRspCmd?relay
        MOV     A,#0x5
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 34)
        MOV     A,R1
// 2961   osal_mem_free( readReportCfgRspCmd );
        ; Setup parameters for call to function osal_mem_free
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        LCALL   ??osal_mem_free?relay
// 2962 
// 2963   return TRUE;
        MOV     R1,#0x1
??esp_ProcessInReadReportCfgCmd_5:
        MOV     A,#0xa
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock43
// 2964 }
// 2965 
// 2966 /*********************************************************************
// 2967  * @fn      esp_ProcessInReadReportCfgRspCmd
// 2968  *
// 2969  * @brief   Process the "Profile" Read Reporting Configuration Response Command
// 2970  *
// 2971  * @param   pInMsg - incoming message to process
// 2972  *
// 2973  * @return  none
// 2974  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2975 static uint8 esp_ProcessInReadReportCfgRspCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInReadReportCfgRspCmd:
          CFI Block cfiBlock44 Using cfiCommon0
          CFI Function esp_ProcessInReadReportCfgRspCmd
        CODE
// 2976 {
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
// 2977   zclReadReportCfgRspCmd_t *readReportCfgRspCmd;
// 2978   zclReportCfgRspRec_t *reportRspRec;
// 2979   uint8 i;
// 2980 
// 2981   readReportCfgRspCmd = (zclReadReportCfgRspCmd_t *)pInMsg->attrCmd;
        MOV     A,R2
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,R3
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R4,A
        MOV     A,R1
        MOV     R5,A
// 2982   for ( i = 0; i < readReportCfgRspCmd->numAttr; i++ )
        MOV     R7,#0x0
??esp_ProcessInReadReportCfgRspCmd_0:
        MOV     DPL,R4
        MOV     DPH,R5
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,R7
        CLR     C
        SUBB    A,R0
        JNC     ??esp_ProcessInReadReportCfgRspCmd_1
// 2983   {
// 2984     reportRspRec = &(readReportCfgRspCmd->attrList[i]);
        MOV     A,R7
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0xd
        MUL     AB
        MOV     R0,A
        MOV     R6,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R6
        MOV     R6,A
        MOV     B,#0xd
        MOV     A,R1
        MUL     AB
        ADD     A,R6
        MOV     R1,A
        MOV     A,R4
        ADD     A,R0
        MOV     DPL,A
        MOV     A,R5
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
// 2985 
// 2986     // Notify the device of the results of the its original read reporting
// 2987     // configuration command.
// 2988 
// 2989     if ( reportRspRec->status == ZCL_STATUS_SUCCESS )
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
// 2990     {
// 2991       if ( reportRspRec->direction == ZCL_SEND_ATTR_REPORTS )
// 2992       {
// 2993         // add user code here
// 2994       }
// 2995       else
// 2996       {
// 2997         // expecting attribute reports
// 2998       }
// 2999     }
// 3000   }
        INC     R7
        SJMP    ??esp_ProcessInReadReportCfgRspCmd_0
// 3001 
// 3002   return TRUE;
??esp_ProcessInReadReportCfgRspCmd_1:
        MOV     R1,#0x1
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock44
// 3003 }
// 3004 
// 3005 /*********************************************************************
// 3006  * @fn      esp_ProcessInReportCmd
// 3007  *
// 3008  * @brief   Process the "Profile" Report Command
// 3009  *
// 3010  * @param   pInMsg - incoming message to process
// 3011  *
// 3012  * @return  none
// 3013  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 3014 static uint8 esp_ProcessInReportCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInReportCmd:
          CFI Block cfiBlock45 Using cfiCommon0
          CFI Function esp_ProcessInReportCmd
        CODE
// 3015 {
        FUNCALL esp_ProcessInReportCmd, _ltoa
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReportCmd, _ltoa
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReportCmd, HalLcdWriteString
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReportCmd, HalLcdWriteString
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL esp_ProcessInReportCmd, HalLcdWriteString
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x12
        LCALL   ?BANKED_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
          CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
          CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 13
        MOV     A,#-0xd
        LCALL   ?ALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 31)
        MOV     ?V0 + 6,R2
        MOV     ?V0 + 7,R3
// 3016   zclReportCmd_t *reportCmd;
// 3017   zclReport_t *reportRec;
// 3018   uint8 i;
// 3019   uint8 *meterData;
// 3020   char lcdBuf[13];
// 3021 
// 3022   reportCmd = (zclReportCmd_t *)pInMsg->attrCmd;
        MOV     A,?V0 + 6
        ADD     A,#0x17
        MOV     DPL,A
        MOV     A,?V0 + 7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     ?V0 + 4,R0
        MOV     ?V0 + 5,R1
// 3023   for (i = 0; i < reportCmd->numAttr; i++)
        MOV     ?V0 + 0,#0x0
??esp_ProcessInReportCmd_0:
        MOV     DPL,?V0 + 4
        MOV     DPH,?V0 + 5
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,R0
        JC      $+5
        LJMP    ??esp_ProcessInReportCmd_1 & 0xFFFF
// 3024   {
// 3025     // Device is notified of the latest values of the attribute of another device.
// 3026     reportRec = &(reportCmd->attrList[i]);
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x5
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x5
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,?V0 + 4
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 5
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        MOV     ?V0 + 2,DPL
        MOV     ?V0 + 3,DPH
// 3027 
// 3028     if ( reportRec->attrID == ATTRID_SE_CURRENT_SUMMATION_DELIVERED )
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      $+5
        LJMP    ??esp_ProcessInReportCmd_2 & 0xFFFF
// 3029     {
// 3030       // process simple metering current summation delivered attribute
// 3031       meterData = reportRec->attrData;
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
// 3032 
// 3033       // process to convert hex to ascii
// 3034       for(i=0; i<6; i++)
        MOV     ?V0 + 0,#0x0
??esp_ProcessInReportCmd_3:
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,#0x6
        JC      $+5
        LJMP    ??esp_ProcessInReportCmd_4 & 0xFFFF
// 3035       {
// 3036         if(meterData[5-i] == 0)
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        CLR     C
        CLR     A
        SUBB    A,R0
        MOV     R0,A
        CLR     A
        SUBB    A,R1
        MOV     R1,A
        MOV     A,R6
        ADD     A,R0
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??esp_ProcessInReportCmd_5
// 3037         {
// 3038           lcdBuf[i*2] = '0';
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,R0
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x30
        MOVX    @DPTR,A
// 3039           lcdBuf[i*2+1] = '0';
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,R0
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        MOV     A,#0x30
        MOVX    @DPTR,A
        LJMP    ??esp_ProcessInReportCmd_6 & 0xFFFF
// 3040         }
// 3041         else if(meterData[5-i] <= 0x0A)
??esp_ProcessInReportCmd_5:
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        CLR     C
        CLR     A
        SUBB    A,R0
        MOV     R0,A
        CLR     A
        SUBB    A,R1
        MOV     R1,A
        MOV     A,R6
        ADD     A,R0
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        CLR     C
        SUBB    A,#0xb
        JC      $+5
        LJMP    ??esp_ProcessInReportCmd_7 & 0xFFFF
// 3042         {
// 3043           lcdBuf[i*2] = '0';
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,R0
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,R1
        MOV     DPH,A
        MOV     A,#0x30
        MOVX    @DPTR,A
// 3044           _ltoa(meterData[5-i],(uint8*)&lcdBuf[i*2+1],16);
        ; Setup parameters for call to function _ltoa
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,R0
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        MOV     ?V0 + 8,DPL
        MOV     ?V0 + 9,DPH
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 33)
        MOV     R1,#0x10
        MOV     A,?V0 + 0
        MOV     R2,?V0 + 0
        MOV     R3,#0x0
        CLR     C
        CLR     A
        SUBB    A,R2
        MOV     R2,A
        CLR     A
        SUBB    A,R3
        MOV     R3,A
        MOV     A,R6
        ADD     A,R2
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,R3
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 1,A
        MOV     R2,?V0 + 1
        CLR     A
        MOV     R3,A
        MOV     R4,A
        MOV     R5,A
        LCALL   ??_ltoa?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 31)
        SJMP    ??esp_ProcessInReportCmd_6
// 3045         }
// 3046         else
// 3047         {
// 3048           _ltoa(meterData[5-i],(uint8*)&lcdBuf[i*2],16);
??esp_ProcessInReportCmd_7:
        ; Setup parameters for call to function _ltoa
        MOV     A,?V0 + 0
        MOV     R0,?V0 + 0
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,R0
        MOV     ?V0 + 8,A
        MOV     A,DPH
        ADDC    A,R1
        MOV     ?V0 + 9,A
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
          CFI CFA_XSP16 add(XSP16, 33)
        MOV     R1,#0x10
        MOV     A,?V0 + 0
        MOV     R2,?V0 + 0
        MOV     R3,#0x0
        CLR     C
        CLR     A
        SUBB    A,R2
        MOV     R2,A
        CLR     A
        SUBB    A,R3
        MOV     R3,A
        MOV     A,R6
        ADD     A,R2
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,R3
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 1,A
        MOV     R2,?V0 + 1
        CLR     A
        MOV     R3,A
        MOV     R4,A
        MOV     R5,A
        LCALL   ??_ltoa?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 31)
// 3049         }
// 3050       }
??esp_ProcessInReportCmd_6:
        INC     ?V0 + 0
        LJMP    ??esp_ProcessInReportCmd_3 & 0xFFFF
// 3051 
// 3052       // print out value of current summation delivered in hex
// 3053       HalLcdWriteString("Zigbee Coord esp", HAL_LCD_LINE_1);
??esp_ProcessInReportCmd_4:
        ; Setup parameters for call to function HalLcdWriteString
        MOV     R1,#0x1
        MOV     R2,#`?<Constant "Zigbee Coord esp">` & 0xff
        MOV     R3,#(`?<Constant "Zigbee Coord esp">` >> 8) & 0xff
        LCALL   ??HalLcdWriteString?relay
// 3054       HalLcdWriteString("Curr Summ Dlvd", HAL_LCD_LINE_2);
        ; Setup parameters for call to function HalLcdWriteString
        MOV     R1,#0x2
        MOV     R2,#`?<Constant "Curr Summ Dlvd">` & 0xff
        MOV     R3,#(`?<Constant "Curr Summ Dlvd">` >> 8) & 0xff
        LCALL   ??HalLcdWriteString?relay
// 3055       HalLcdWriteString(lcdBuf, HAL_LCD_LINE_3);
        ; Setup parameters for call to function HalLcdWriteString
        MOV     R1,#0x3
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??HalLcdWriteString?relay
// 3056     }
// 3057   }
??esp_ProcessInReportCmd_2:
        INC     ?V0 + 0
        LJMP    ??esp_ProcessInReportCmd_0 & 0xFFFF
// 3058   return TRUE;
??esp_ProcessInReportCmd_1:
        MOV     R1,#0x1
        MOV     A,#0xd
        LCALL   ?DEALLOC_XSTACK8
          CFI CFA_XSP16 add(XSP16, 18)
        MOV     R7,#0xa
        LJMP    ?BANKED_LEAVE_XDATA
          CFI EndBlock cfiBlock45
// 3059 }
// 3060 #endif // ZCL_REPORT
// 3061 
// 3062 /*********************************************************************
// 3063  * @fn      esp_ProcessInDefaultRspCmd
// 3064  *
// 3065  * @brief   Process the "Profile" Default Response Command
// 3066  *
// 3067  * @param   pInMsg - incoming message to process
// 3068  *
// 3069  * @return  none
// 3070  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 3071 static uint8 esp_ProcessInDefaultRspCmd( zclIncomingMsg_t *pInMsg )
esp_ProcessInDefaultRspCmd:
          CFI Block cfiBlock46 Using cfiCommon0
          CFI Function esp_ProcessInDefaultRspCmd
        CODE
// 3072 {
        ; Saved register size: 0
        ; Auto size: 0
// 3073   // zclDefaultRspCmd_t *defaultRspCmd = (zclDefaultRspCmd_t *)pInMsg->attrCmd;
// 3074 
// 3075   // Device is notified of the Default Response command.
// 3076 
// 3077   return TRUE;
        MOV     R1,#0x1
        LJMP    ?BRET
          CFI EndBlock cfiBlock46
// 3078 }

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for espEp>`:
        DATA8
        DB 9
        DATA16
        DW espTaskID
        DW espSimpleDesc
        DATA8
        DB 0

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for esp_GenCmdCallbacks>`:
        DATA16
        DW ??esp_BasicResetCB?relay
        DW ??esp_IdentifyCB?relay
        DW ??esp_IdentifyQueryRspCB?relay
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW ??esp_AlarmCB?relay
        DW 0H
        DW 0H

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for esp_SECmdCallbacks>`:
        DATA16
        DW ??esp_PublishPriceCB?relay
        DW ??esp_PublishBlockPeriodCB?relay
        DW ??esp_GetCurrentPriceCB?relay
        DW ??esp_GetScheduledPriceCB?relay
        DW ??esp_PriceAcknowledgementCB?relay
        DW ??esp_GetBlockPeriodCB?relay
        DW ??esp_LoadControlEventCB?relay
        DW ??esp_CancelLoadControlEventCB?relay
        DW ??esp_CancelAllLoadControlEventsCB?relay
        DW ??esp_ReportEventStatusCB?relay
        DW ??esp_GetScheduledEventCB?relay
        DW ??esp_GetProfileRspCB?relay
        DW ??esp_ReqMirrorCmdCB?relay
        DW ??esp_MirrorRemCmdCB?relay
        DW ??esp_ReqFastPollModeRspCB?relay
        DW ??esp_GetProfileCmdCB?relay
        DW ??esp_ReqMirrorRspCB?relay
        DW ??esp_MirrorRemRspCB?relay
        DW ??esp_ReqFastPollModeCmdCB?relay
        DW ??esp_DisplayMessageCB?relay
        DW ??esp_CancelMessageCB?relay
        DW ??esp_GetLastMessageCB?relay
        DW ??esp_MessageConfirmationCB?relay
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW 0H
        DW ??esp_SupplyStatusRspCB?relay
        DW ??esp_SelAvailEmergencyCreditCmdCB?relay
        DW ??esp_ChangeSupplyCmdCB?relay

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_Init?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_event_loop?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_event_loop

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessAppMsg?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessAppMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessIdentifyTimeChange?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessIdentifyTimeChange

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_HandleKeys?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_HandleKeys

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ValidateAttrDataCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ValidateAttrDataCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_BasicResetCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_BasicResetCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_IdentifyCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_IdentifyCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_IdentifyQueryRspCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_IdentifyQueryRspCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_AlarmCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_AlarmCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetProfileCmdCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetProfileCmdCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetProfileRspCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetProfileRspCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ReqMirrorCmdCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ReqMirrorCmdCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ReqMirrorRspCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ReqMirrorRspCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_MirrorRemCmdCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_MirrorRemCmdCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_MirrorRemRspCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_MirrorRemRspCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ReqFastPollModeCmdCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ReqFastPollModeCmdCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ReqFastPollModeRspCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ReqFastPollModeRspCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetCurrentPriceCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetCurrentPriceCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetScheduledPriceCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetScheduledPriceCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_PriceAcknowledgementCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_PriceAcknowledgementCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetBlockPeriodCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetBlockPeriodCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_PublishPriceCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_PublishPriceCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_PublishBlockPeriodCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_PublishBlockPeriodCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_DisplayMessageCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_DisplayMessageCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_CancelMessageCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_CancelMessageCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetLastMessageCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetLastMessageCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_MessageConfirmationCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_MessageConfirmationCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_SendReportEventStatus?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_SendReportEventStatus

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_LoadControlEventCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_LoadControlEventCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_CancelLoadControlEventCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_CancelLoadControlEventCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_CancelAllLoadControlEventsCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_CancelAllLoadControlEventsCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ReportEventStatusCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ReportEventStatusCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_GetScheduledEventCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_GetScheduledEventCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_SelAvailEmergencyCreditCmdCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_SelAvailEmergencyCreditCmdCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ChangeSupplyCmdCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ChangeSupplyCmdCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_SupplyStatusRspCB?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_SupplyStatusRspCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessZDOMsg?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessZDOMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessZCLMsg?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessZCLMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInReadRspCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInReadRspCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInWriteRspCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInWriteRspCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInConfigReportCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInConfigReportCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInConfigReportRspCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInConfigReportRspCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInReadReportCfgCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInReadReportCfgCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInReadReportCfgRspCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInReadReportCfgRspCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInReportCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInReportCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??esp_ProcessInDefaultRspCmd?relay:
        CODE
        LCALL   ?BDISPATCH
        DATA24
        DC24    esp_ProcessInDefaultRspCmd

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "TI IPD Test Msg!">`:
        DB "TI IPD Test Msg!"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {10485761L, 10485762L, 10485763L, 1`:
        DATA32
        DD 10485761
        DD 10485762
        DD 10485763
        DD 10485764
        DD 10485765

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Fast Polling">`:
        DB "Fast Polling"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Cur 0x">`:
        DB "Cur 0x"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "End 0x">`:
        DB "End 0x"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "BASE">`:
        DB "BASE"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {32, 33, 34, 35, 36, 37, 38, 39, 40`:
        DB 32
        DB 33
        DB 34
        DB 35
        DB 36
        DB 37
        DB 38
        DB 39
        DB 40
        DB 41

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Zigbee Coord esp">`:
        DB "Zigbee Coord esp"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "Curr Summ Dlvd">`:
        DB "Curr Summ Dlvd"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_ffffffff:
        DD 4294967295

        END
// 3079 
// 3080 #if defined ( ZCL_DISCOVER )
// 3081 /*********************************************************************
// 3082  * @fn      esp_ProcessInDiscRspCmd
// 3083  *
// 3084  * @brief   Process the "Profile" Discover Response Command
// 3085  *
// 3086  * @param   pInMsg - incoming message to process
// 3087  *
// 3088  * @return  none
// 3089  */
// 3090 static uint8 esp_ProcessInDiscRspCmd( zclIncomingMsg_t *pInMsg )
// 3091 {
// 3092   zclDiscoverRspCmd_t *discoverRspCmd;
// 3093   uint8 i;
// 3094 
// 3095   discoverRspCmd = (zclDiscoverRspCmd_t *)pInMsg->attrCmd;
// 3096 
// 3097   for ( i = 0; i < discoverRspCmd->numAttr; i++ )
// 3098   {
// 3099     // Device is notified of the result of its attribute discovery command.
// 3100   }
// 3101 
// 3102   return TRUE;
// 3103 }
// 3104 #endif // ZCL_DISCOVER
// 3105 
// 3106 #if defined ( SE_UK_EXT ) && defined ( SE_MIRROR )
// 3107 /*********************************************************************
// 3108  * @fn      esp_MirrorInit
// 3109  *
// 3110  * @brief   Initialize the ESP Mirror Subsystem.
// 3111  *
// 3112  * @param   none
// 3113  *
// 3114  * @return  none
// 3115  */
// 3116 static void esp_MirrorInit( void )
// 3117 {
// 3118   osal_memset( &esp_MirrorControl, 0, sizeof( esp_MirrorControl ) );
// 3119 
// 3120   // set the attribute
// 3121   espPhysicalEnvironment |= PHY_MIRROR_CAPACITY_ENV;
// 3122 }
// 3123 
// 3124 /*********************************************************************
// 3125  * @fn      esp_GetMirrorEndpoint
// 3126  *
// 3127  * @brief   Get the endpoint of a mirror using the Source Address and
// 3128  *          source endpoint.
// 3129  *
// 3130  * @param   srcAddr - source address to lookup
// 3131  *
// 3132  * @return  Endpoint of the mirror or
// 3133  *          ESP_MIRROR_INVALID_ENDPOINT if there is no space
// 3134  */
// 3135 static uint8 esp_GetMirrorEndpoint( afAddrType_t *srcAddr )
// 3136 {
// 3137   uint8 i;
// 3138 
// 3139   for ( i = 0; i < ESP_MAX_MIRRORS; i++ )
// 3140   {
// 3141     if ( ( esp_MirrorControl.mirrorMask & (1 << i) ) &&
// 3142          ( esp_MirrorControl.mirrorInfo[i].srcAddr == srcAddr->addr.shortAddr ) &&
// 3143          ( esp_MirrorControl.mirrorInfo[i].srcEndpoint == srcAddr->endPoint ) )
// 3144     {
// 3145       return ( i + ESP_MIRROR_EP_BASE );
// 3146     }
// 3147   }
// 3148 
// 3149   return ESP_MIRROR_INVALID_ENDPOINT;
// 3150 }
// 3151 
// 3152 /*********************************************************************
// 3153  * @fn      esp_GetMirrorInfo
// 3154  *
// 3155  * @brief   Get the control information for a mirror endpoint.
// 3156  *
// 3157  * @param   endpoint - to lookup
// 3158  *
// 3159  * @return  Pointer to Mirror Information or
// 3160  *          NULL if no Mirror found for the Endpoint
// 3161  */
// 3162 static espMirrorInfo_t *esp_GetMirrorInfo( uint8 endpoint )
// 3163 {
// 3164   if ( esp_IsMirrorEndpoint( endpoint ) )
// 3165   {
// 3166     // Get the index to the mirror
// 3167     uint8 index = endpoint - ESP_MIRROR_EP_BASE;
// 3168 
// 3169     // Return a pointer to the attributes
// 3170     return &esp_MirrorControl.mirrorInfo[index];
// 3171   }
// 3172 
// 3173   return NULL;
// 3174 }
// 3175 
// 3176 /*********************************************************************
// 3177  * @fn      esp_MirrorInitAttributeSet
// 3178  *
// 3179  * @brief   Adds notification attributes to the mirror endpoint
// 3180  *
// 3181  * @param   endpoint - Endpoint of the mirror
// 3182  *
// 3183  * @return  none
// 3184  */
// 3185 static void esp_MirrorInitAttributeSet( uint8 endpoint )
// 3186 {
// 3187   espMirrorInfo_t *pInfo = esp_GetMirrorInfo( endpoint );
// 3188 
// 3189   if ( pInfo != NULL )
// 3190   {
// 3191     zclAttrRec_t *pAttributes = pInfo->pAttr;
// 3192 
// 3193     if ( pAttributes != NULL )
// 3194     {
// 3195       // Note: Attributes 0 through ESP_MIRROR_USER_ATTRIBUTES_POSITION-1 are used for
// 3196       // the mirror notify attribute set.  The rest of the attributes are reserved for
// 3197       // the meter.  The meter creates attributes with a report attribute command.
// 3198       pAttributes[0].clusterID = ZCL_CLUSTER_ID_SE_SIMPLE_METERING;
// 3199       pAttributes[0].attr.attrId = ATTRID_SE_NOTIFICATION_CONTROL_FLAGS;
// 3200       pAttributes[0].attr.dataType = ZCL_DATATYPE_BITMAP8;
// 3201       pAttributes[0].attr.accessControl = ACCESS_CONTROL_READ | ACCESS_CONTROL_WRITE;
// 3202       pAttributes[0].attr.dataPtr = &pInfo->notificationControl;
// 3203 
// 3204       pAttributes[1].clusterID = ZCL_CLUSTER_ID_SE_SIMPLE_METERING;
// 3205       pAttributes[1].attr.attrId = ATTRID_SE_NOTIFICATION_FLAGS;
// 3206       pAttributes[1].attr.dataType = ZCL_DATATYPE_BITMAP8;
// 3207       pAttributes[1].attr.accessControl = ACCESS_CONTROL_READ;
// 3208       pAttributes[1].attr.dataPtr = &pInfo->notificationSet.NotificationFlags;
// 3209 
// 3210       pAttributes[2].clusterID = ZCL_CLUSTER_ID_SE_SIMPLE_METERING;
// 3211       pAttributes[2].attr.attrId = ATTRID_SE_PRICE_NOTIFICATION_FLAGS;
// 3212       pAttributes[2].attr.dataType = ZCL_DATATYPE_BITMAP16;
// 3213       pAttributes[2].attr.accessControl = ACCESS_CONTROL_READ;
// 3214       pAttributes[2].attr.dataPtr = &pInfo->notificationSet.PriceNotificationFlags;
// 3215 
// 3216       pAttributes[3].clusterID = ZCL_CLUSTER_ID_SE_SIMPLE_METERING;
// 3217       pAttributes[3].attr.attrId = ATTRID_SE_CALENDAR_NOTIFICATION_FLAGS;
// 3218       pAttributes[3].attr.dataType = ZCL_DATATYPE_BITMAP8;
// 3219       pAttributes[3].attr.accessControl = ACCESS_CONTROL_READ;
// 3220       pAttributes[3].attr.dataPtr = &pInfo->notificationSet.CalendarNotificationFlags;
// 3221 
// 3222       pAttributes[4].clusterID = ZCL_CLUSTER_ID_SE_SIMPLE_METERING;
// 3223       pAttributes[4].attr.attrId = ATTRID_SE_PRE_PAY_NOTIFICATION_FLAGS;
// 3224       pAttributes[4].attr.dataType = ZCL_DATATYPE_BITMAP16;
// 3225       pAttributes[4].attr.accessControl = ACCESS_CONTROL_READ;
// 3226       pAttributes[4].attr.dataPtr = &pInfo->notificationSet.PrePayNotificationFlags;
// 3227 
// 3228       pAttributes[5].clusterID = ZCL_CLUSTER_ID_SE_SIMPLE_METERING;
// 3229       pAttributes[5].attr.attrId = ATTRID_SE_DEVICE_MANAGEMENT_FLAGS;
// 3230       pAttributes[5].attr.dataType = ZCL_DATATYPE_BITMAP8;
// 3231       pAttributes[5].attr.accessControl = ACCESS_CONTROL_READ;
// 3232       pAttributes[5].attr.dataPtr = &pInfo->notificationSet.DeviceMgmtNotificationFlags;
// 3233     }
// 3234   }
// 3235 }
// 3236 
// 3237 /*********************************************************************
// 3238  * @fn      esp_AllocMirror
// 3239  *
// 3240  * @brief   Allocate a mirror endpoint in the mirror control structure.
// 3241  *
// 3242  * @param   srcAddr - of the device requesting a Mirror
// 3243  *
// 3244  * @return  Endpoint of the mirror or
// 3245  *          ESP_MIRROR_INVALID_ENDPOINT if there is no space
// 3246  */
// 3247 static uint8 esp_AllocMirror( afAddrType_t *srcAddr )
// 3248 {
// 3249   uint8 i;
// 3250   zclAttrRec_t *pAttr;
// 3251   uint8 endpoint;
// 3252 
// 3253   // Verify space is available for another mirror endpoint
// 3254   if ( esp_MirrorControl.mirrorMask != ESP_MIRROR_FULL_MASK )
// 3255   {
// 3256     // Allocate memory for the attribute table
// 3257     pAttr = osal_mem_alloc( sizeof( zclAttrRec_t ) * ESP_MIRROR_MAX_ATTRIBUTES );
// 3258 
// 3259     if ( pAttr != NULL )
// 3260     {
// 3261       // Initialize the attribute
// 3262       osal_memset( pAttr, 0, sizeof( zclAttrRec_t ) * ESP_MIRROR_MAX_ATTRIBUTES );
// 3263 
// 3264       // Set the attribute clusters to 0xFFFF indicating they are not in use
// 3265       for ( i = 0; i < ESP_MIRROR_MAX_ATTRIBUTES; i++ )
// 3266       {
// 3267         pAttr[i].clusterID = 0xFFFF;
// 3268       }
// 3269 
// 3270       // Find the next free endpoint slot
// 3271       for ( i = 0; i < ESP_MAX_MIRRORS; i++ )
// 3272       {
// 3273         if ( esp_MirrorControl.mirrorMask & (1 << i) )
// 3274         {
// 3275           continue;
// 3276         }
// 3277 
// 3278         endpoint = i + ESP_MIRROR_EP_BASE;
// 3279 
// 3280         // Zero out the info memory
// 3281         osal_memset( &esp_MirrorControl.mirrorInfo[i], 0, sizeof( espMirrorInfo_t ) );
// 3282 
// 3283         // Setup mirror information
// 3284         esp_MirrorControl.mirrorMask |= 1 << i;
// 3285         esp_MirrorControl.mirrorInfo[i].srcAddr = srcAddr->addr.shortAddr;
// 3286         esp_MirrorControl.mirrorInfo[i].srcEndpoint = srcAddr->endPoint;
// 3287         esp_MirrorControl.mirrorInfo[i].pAttr = pAttr;
// 3288 
// 3289         // Create attributes for the notification set
// 3290         esp_MirrorInitAttributeSet( endpoint );
// 3291 
// 3292         // If all endpoints are in use, set the PhysicalEnvironment attribute
// 3293         // indicating all mirror slot are used
// 3294         if ( esp_MirrorControl.mirrorMask == ESP_MIRROR_FULL_MASK )
// 3295         {
// 3296           espPhysicalEnvironment &= ~PHY_MIRROR_CAPACITY_ENV;
// 3297         }
// 3298 
// 3299         return endpoint;
// 3300       }
// 3301 
// 3302       // Free the attribute memory if we could not allocate the endpoint
// 3303       osal_mem_free( pAttr );
// 3304     }
// 3305   }
// 3306 
// 3307   return ESP_MIRROR_INVALID_ENDPOINT;
// 3308 }
// 3309 
// 3310 /*********************************************************************
// 3311  * @fn      esp_FreeMirror
// 3312  *
// 3313  * @brief   Free a mirror endpoint in the mirror control structure.
// 3314  *
// 3315  * @param   endPoint - Endpoint of the mirror to free
// 3316  *
// 3317  * @return  none
// 3318  */
// 3319 void esp_FreeMirror( uint8 endPoint )
// 3320 {
// 3321   if ( esp_IsMirrorEndpoint( endPoint ) )
// 3322   {
// 3323     // Get the index to the mirror
// 3324     uint8 index = endPoint - ESP_MIRROR_EP_BASE;
// 3325     uint8 i;
// 3326 
// 3327     // Clear the endpoint bit in the mask of allocated mirrors
// 3328     esp_MirrorControl.mirrorMask &= ~(1 << index);
// 3329 
// 3330     if ( esp_MirrorControl.mirrorInfo[index].pAttr )
// 3331     {
// 3332       // Free the user attribute data
// 3333       for ( i = ESP_MIRROR_USER_ATTRIBUTES_POSITION; i < ESP_MIRROR_MAX_ATTRIBUTES; i++ )
// 3334       {
// 3335         if ( esp_MirrorControl.mirrorInfo[index].pAttr[i].attr.dataPtr )
// 3336         {
// 3337           osal_mem_free( esp_MirrorControl.mirrorInfo[index].pAttr[i].attr.dataPtr );
// 3338           esp_MirrorControl.mirrorInfo[index].pAttr[i].attr.dataPtr = NULL;
// 3339         }
// 3340       }
// 3341 
// 3342       // Free the attribute table
// 3343       osal_mem_free( esp_MirrorControl.mirrorInfo[index].pAttr );
// 3344       esp_MirrorControl.mirrorInfo[index].pAttr = NULL;
// 3345     }
// 3346   }
// 3347 }
// 3348 
// 3349 /*********************************************************************
// 3350  * @fn      esp_IsMirrorEndpoint
// 3351  *
// 3352  * @brief   Check if the endpoint is in the mirror block of endpoints.
// 3353  *
// 3354  * @param   endpoint - Endpoint of the mirror to free
// 3355  *
// 3356  * @return  TRUE - if Endpoint is in the Mirror Block
// 3357  *          FALSE - Otherwise
// 3358  */
// 3359 static uint8 esp_IsMirrorEndpoint( uint8 endpoint )
// 3360 {
// 3361   if ( (endpoint >= ESP_MIRROR_EP_BASE ) &&
// 3362        (endpoint <= ESP_MIRROR_EP_BASE + ESP_MAX_MIRRORS ) )
// 3363   {
// 3364     return TRUE;
// 3365   }
// 3366 
// 3367   return FALSE;
// 3368 }
// 3369 
// 3370 /*********************************************************************
// 3371  * @fn      esp_MirrorUpdateAttribute
// 3372  *
// 3373  * @brief   Update Attributes in Mirror
// 3374  *
// 3375  * @param   endpoint - Endpoint of the mirror to free
// 3376  *          cluster - Cluster ID
// 3377  *          pReport - Pointer to reported attributes
// 3378  *
// 3379  * @return  TRUE - if Data updated
// 3380  *          FALSE - Otherwise
// 3381  */
// 3382 static uint8 esp_MirrorUpdateAttribute( uint8 endpoint, uint16 cluster, zclReport_t *pReport )
// 3383 {
// 3384   espMirrorInfo_t *pInfo = esp_GetMirrorInfo( endpoint );
// 3385 
// 3386   if ( pInfo != NULL )
// 3387   {
// 3388     zclAttrRec_t *pAttributes = pInfo->pAttr;
// 3389     uint8 i;
// 3390 
// 3391     if ( pAttributes != NULL )
// 3392     {
// 3393       // Check if the attribute already exists
// 3394       for ( i = ESP_MIRROR_USER_ATTRIBUTES_POSITION; i < ESP_MIRROR_MAX_ATTRIBUTES; i++ )
// 3395       {
// 3396         if ( pAttributes[i].clusterID == cluster )
// 3397         {
// 3398           if ( pAttributes[i].attr.attrId == pReport->attrID )
// 3399           {
// 3400             if ( pAttributes[i].attr.dataPtr )
// 3401             {
// 3402               // Update the attribute data
// 3403               zclSerializeData( pReport->dataType, pReport->attrData, pAttributes[i].attr.dataPtr );
// 3404               return TRUE;
// 3405             }
// 3406           }
// 3407         }
// 3408       }
// 3409 
// 3410       // Look for a free attribute slot and add the attribute
// 3411       for ( i = ESP_MIRROR_USER_ATTRIBUTES_POSITION; i < ESP_MIRROR_MAX_ATTRIBUTES; i++ )
// 3412       {
// 3413         if ( pAttributes[i].attr.dataPtr == NULL )
// 3414         {
// 3415           uint8 dataLength = zclGetDataTypeLength( pReport->dataType );
// 3416 
// 3417           if ( dataLength > 0 )
// 3418           {
// 3419             pAttributes[i].clusterID = cluster;
// 3420             pAttributes[i].attr.attrId = pReport->attrID;
// 3421             pAttributes[i].attr.dataType = pReport->dataType;
// 3422             pAttributes[i].attr.accessControl = ACCESS_CONTROL_READ;
// 3423             pAttributes[i].attr.dataPtr = osal_mem_alloc( dataLength );
// 3424 
// 3425             if ( pAttributes[i].attr.dataPtr != NULL )
// 3426             {
// 3427               zclSerializeData( pReport->dataType, pReport->attrData, pAttributes[i].attr.dataPtr );
// 3428               return TRUE;
// 3429             }
// 3430           }
// 3431         }
// 3432       }
// 3433     }
// 3434   }
// 3435 
// 3436   return FALSE;
// 3437 }
// 3438 
// 3439 /*********************************************************************
// 3440  * @fn      esp_MirrorProcessZCLMsg
// 3441  *
// 3442  * @brief   Process ZCL messages for mirror endpoints.
// 3443  *
// 3444  * @param   pInMsg - ZCL Message
// 3445  *
// 3446  * @return  none
// 3447  */
// 3448 static void esp_MirrorProcessZCLMsg( zclIncomingMsg_t *pInMsg )
// 3449 {
// 3450   uint8 i;
// 3451 
// 3452   if ( pInMsg->zclHdr.commandID == ZCL_CMD_REPORT )
// 3453   {
// 3454     zclReportCmd_t *reportCmd = (zclReportCmd_t *)pInMsg->attrCmd;
// 3455 
// 3456     if ( reportCmd != NULL)
// 3457     {
// 3458       for (i = 0; i < reportCmd->numAttr; i++)
// 3459       {
// 3460         // Update the attribute
// 3461         esp_MirrorUpdateAttribute( pInMsg->endPoint, pInMsg->clusterId, &reportCmd->attrList[i] );
// 3462       }
// 3463     }
// 3464 
// 3465     // Build a response
// 3466     espMirrorInfo_t *pInfo = esp_GetMirrorInfo( pInMsg->srcAddr.endPoint );
// 3467 
// 3468     if ( pInfo != NULL )
// 3469     {
// 3470       if ( pInfo->notificationControl & SE_NOTIFICATION_REPORT_ATTR_RSP_BIT )
// 3471       {
// 3472         // Send a mirror report attr rsp using the notification set from the mirror info
// 3473         zclSE_SimpleMetering_Send_MirrorReportAttrRsp( pInMsg->endPoint, &pInMsg->srcAddr,
// 3474                                                        &pInfo->notificationSet, TRUE,
// 3475                                                        pInMsg->zclHdr.transSeqNum);
// 3476       }
// 3477     }
// 3478   }
// 3479 }
// 3480 #endif  // SE_UK_EXT && SE_MIRROR
// 3481 /****************************************************************************
// 3482 ****************************************************************************/
// 
// 5 920 bytes in segment BANKED_CODE
//   282 bytes in segment BANK_RELAYS
//   102 bytes in segment XDATA_I
//   102 bytes in segment XDATA_ID
//   115 bytes in segment XDATA_ROM_C
//    72 bytes in segment XDATA_Z
// 
// 6 304 bytes of CODE  memory
//   111 bytes of CONST memory (+ 4 bytes shared)
//   174 bytes of XDATA memory
//
//Errors: none
//Warnings: none
